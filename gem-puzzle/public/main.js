(()=>{"use strict";class t{constructor(){this.currentTime=0}calcCurrentTime(){this.time=setInterval((()=>{this.currentTime+=1,this.secToMinAndSec()}),1e3)}secToMinAndSec(){this.minutes=Math.floor(this.currentTime/60),this.sec=(this.currentTime%60).toFixed(0),this.timer=`${this.minutes}:${this.sec<10?"0":""}${this.sec}`,this.renderTimer()}timerStop(){clearInterval(this.time),this.timer="0:00",this.renderTimer()}timerPause(){clearInterval(this.time)}renderTimer(){document.querySelector(".time").innerHTML=this.timer}init(){this.timerStop(),this.currentTime=null,this.calcCurrentTime()}load(){this.timerStop(),this.secToMinAndSec(),this.renderTimer(),this.calcCurrentTime()}}const e=new class{constructor(){this.timerC=new t,this.history=[],this.size=4,this.emptyX=0,this.emptyY=0,this.animationTime=200,this.boardWidth=40.8,this.marginSize=.1,this.soundOn=!0,this.winSound=new Audio("../assets/win.mp3"),this.slideSound=new Audio("../assets/slide.mp3"),this.slideSound.volume=.2,this.dragNDropSound=new Audio("../assets/whoosh-grainy_gkoaqyn_.mp3"),this.dragNDropSound.volume=.3,this.removeBoard=()=>{document.querySelectorAll(".board").forEach((t=>{document.body.removeChild(t)}))},this.findElem=t=>{for(let e=0;e<this.arr.length;e+=1)for(let s=0;s<this.arr.length;s+=1)if(this.arr[e][s]===parseInt(t.innerHTML,10))return[e,s];throw new Error(t)},this.dragDrop=t=>{const e=t.target,s=document.querySelector(".hide"),[i,r]=this.findElem(s);this.isNearZero(i,r)&&([this.arr[i][r],this.arr[this.emptyX][this.emptyY]]=[this.arr[this.emptyX][this.emptyY],this.arr[i][r]],[this.emptyX,this.emptyY]=[i,r],[e.style.order,s.style.order]=[s.style.order,e.style.order],this.checkForIdling(),this.history.push([this.emptyX,this.emptyY]),this.playDragSound(),this.addMove()),e.classList.remove("hovered")},this.toggleButtons=()=>{document.querySelectorAll(".btn:not(.sound),#fieldSize").forEach((t=>{t.disabled=!t.disabled}))}}randomImgNumber(t,e){this.imgNumb=Math.floor(Math.random()*(t-e)+e)}back(){this.toggleButtons(),this.history.pop(),this.backTimer()}isNearZero(t,e){return!!(Math.abs(this.emptyX-t)<=1&&this.emptyY-e==0||Math.abs(this.emptyY-e)<=1&&this.emptyX-t==0)}checkForIdling(){const[t,e]=this.history[this.history.length-2];this.emptyX===t&&this.emptyY===e&&this.history.splice(-2,2)}backTimer(){setTimeout((()=>{if(this.history.length){const[t,e]=this.history.pop();this.e=document.querySelector("#cell-"+this.arr[t][e]),this.moveAnimation([t,e]),setTimeout((()=>{const s=this.arr[this.emptyX][this.emptyY];this.arr[this.emptyX][this.emptyY]=this.arr[t][e],this.arr[t][e]=s,this.emptyX=t,this.emptyY=e,this.removeBoard(),this.renderBoard(),this.playSlideSound(),this.backTimer()}),this.animationTime)}else this.checkWin(!0),this.toggleButtons()}),this.animationTime)}move(t){switch(t){case"up":0!==this.emptyX&&(this.history.length<=1||this.emptyX-1!==this.history[this.history.length-2][0])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX-1][this.emptyY],this.arr[this.emptyX-1][this.emptyY]=0,this.emptyX-=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;case"down":this.emptyX!==this.size-1&&(this.history.length<=1||this.emptyX+1!==this.history[this.history.length-2][0])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX+1][this.emptyY],this.arr[this.emptyX+1][this.emptyY]=0,this.emptyX+=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;case"right":this.emptyY!==this.size-1&&(this.history.length<=1||this.emptyY+1!==this.history[this.history.length-2][1])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX][this.emptyY+1],this.arr[this.emptyX][this.emptyY+1]=0,this.emptyY+=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;case"left":0!==this.emptyY&&(this.history.length<=1||this.emptyY-1!==this.history[this.history.length-2][1])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX][this.emptyY-1],this.arr[this.emptyX][this.emptyY-1]=0,this.emptyY-=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;default:throw new Error(">:(")}}createBoard(){const t=[];this.bgPosArr=[];for(let e=0;e<this.size;e+=1){t[e]=[];for(let s=0;s<this.size;s+=1)e+s!==2*(this.size-1)?(t[e][s]=e*this.size+s+1,this.bgPosArr.push(`${Math.round(100/(this.size-1)*s)}% ${Math.round(100/(this.size-1)*e)}%`)):t[e][s]=0}return t}shuffle(){for(this.history.push([this.emptyX,this.emptyY]),this.counter=0;this.counter<this.size**3;this.counter+=1)switch(Math.floor(4*Math.random())){case 0:this.move("up");break;case 1:this.move("right");break;case 2:this.move("down");break;case 3:this.move("left");break;default:throw new Error(">:(")}}renderBoard(){let t='<div class="score-list">test</div>';const e=this.boardWidth+"rem";let s;for(let i=0,r=1;i<this.size;i+=1)for(let n=0;n<this.size;n+=1){s=this.arr[i][n];const h=s?"cell":"cell empty",o=!!s,a=s?"":"ondragover = 'event.preventDefault()'",d=this.bgPosArr[s-1],m=s?`background: url(../assets/images/${this.imgNumb}.jpg); background-position: ${d}; background-size: ${e};`:"";r+=1,t+=`<div \n        ${a}\n          style='width:${this.cellSize}rem;\n          height:${this.cellSize}rem;\n          order:${r};\n          ${m}'\n          id='cell-${s}'\n          class='${h}'\n          draggable="${o}">${s}</div>`}const i=document.createElement("div");i.classList.add("board"),i.style.width=e,i.innerHTML=t,document.body.appendChild(i)}addMove(){this.movesCounter+=1,document.querySelector(".move").innerHTML=this.movesCounter}draw(){const t=this.cellSize/this.animationTime*this.timePassed;switch(this.direction){case"up":this.e.style.transform=`translate( 0, ${-t}rem)`;break;case"down":this.e.style.transform=`translate( 0, ${t}rem)`;break;case"left":this.e.style.transform=`translate( ${-t}rem, 0)`;break;case"right":this.e.style.transform=`translate( ${t}rem, 0)`;break;default:throw new Error(">:(")}}moveAnimation([t,e]){this.emptyX<t?this.direction="up":this.emptyX>t?this.direction="down":this.emptyY<e?this.direction="left":this.emptyY>e&&(this.direction="right"),this.inAnimation=!0,this.start=Date.now(),this.timer=setInterval((()=>{if(this.timePassed=Date.now()-this.start,this.timePassed>=this.animationTime)return clearInterval(this.timer),void(this.inAnimation=!1);this.draw()}),20)}toggleSound(){this.soundOn=!this.soundOn}swap(t){if(!this.inAnimation)for(let e=0;e<this.arr.length;e+=1)for(let s=0;s<this.arr[e].length;s+=1)if(this.arr[e][s]===t&&this.isNearZero(e,s)){this.addMove();const t=document.querySelector("#cell-"+this.arr[this.emptyX][this.emptyY]);return this.e=document.querySelector("#cell-"+this.arr[e][s]),this.moveAnimation([e,s]),this.playSlideSound(),setTimeout((()=>{const e=t.style.order;t.style.order=this.e.style.order,this.e.style.order=e,this.e.style.transform="",this.emptyX===this.emptyY&&this.emptyY===this.size-1&&this.checkWin()&&this.timerC.timerPause()}),this.animationTime),[this.arr[e][s],this.arr[this.emptyX][this.emptyY]]=[this.arr[this.emptyX][this.emptyY],this.arr[e][s]],this.emptyX=e,this.emptyY=s,this.checkForIdling(),void this.history.push([this.emptyX,this.emptyY])}}setScore(){let t=JSON.parse(localStorage.getItem("score-list"))||[];t.push({moves:this.movesCounter,size:this.size,time:this.timerC.timer}),t.length>10&&(t.sort(((t,e)=>t.moves-e.moves)),t=t.slice(0,10)),localStorage.setItem("score-list",JSON.stringify(t))}getScoreList(){this.scoreList=!this.scoreList;const t=document.querySelector(".score-list"),e=JSON.parse(localStorage.getItem("score-list"))||[];let s="";for(let t=e.length-1;t>=0;t-=1)s+=`<li>Size: ${e[t].size},&nbsp;&nbsp;&nbsp;&nbsp;Moves: ${e[t].moves},&nbsp;&nbsp;&nbsp;&nbsp;Time: ${e[t].time}</li>`;t.innerHTML=`<h2>Best Scores</h2>\n      <ol class="score">${s}</ol>`,this.scoreList?(t.classList.add("score-list-on"),this.timerC.timerPause()):(t.classList.remove("score-list-on"),this.timerC.calcCurrentTime())}checkWin(t){for(let t=0;t<this.size;t+=1)for(let e=0;e<this.size;e+=1)if(t+e!==2*(this.size-1)&&this.win[t][e]!==this.arr[t][e])return!1;return this.playWinSound(),this.setWinMessage(t),t||this.setScore(),!0}setWinMessage(t){this.winBoard=document.querySelector(".board"),this.winBoard.classList.add("win"),this.winBoard.innerHTML+=`<div style="background-image: url(../assets/images/${this.imgNumb}.jpg);" class='win-text'>${t?"ЧИТЕР!":`Ура! Вы решили головоломку за ${document.querySelector(".time").innerHTML} и ${document.querySelector(".move").innerHTML} ходов</div>`}</div>`,setTimeout((()=>{this.winBoard.querySelector(".win-text").style.opacity=1}),50)}playWinSound(){this.soundOn&&(this.winSound.currentTime=0,this.winSound.play())}playSlideSound(){this.soundOn&&(this.slideSound.currentTime=0,this.slideSound.play())}playDragSound(){this.soundOn&&(this.dragNDropSound.currentTime=.15,this.dragNDropSound.play())}dragStart(){setTimeout((()=>{this.classList.add("hide")}),0)}dragEnd(){this.classList.remove("hide")}dragEnter(){this.classList.add("hovered")}dragLeave(){this.classList.remove("hovered")}init(){this.scoreList=!1,this.randomImgNumber(150,1),this.history=[],this.movesCounter=0,document.querySelector(".move").innerHTML=this.movesCounter,this.size=document.getElementById("fieldSize").value,this.cellSize=parseFloat(this.boardWidth/this.size-2*this.marginSize).toFixed(3),this.removeBoard(),this.emptyX=this.size-1,this.emptyY=this.size-1,this.arr=this.createBoard(),this.win=this.createBoard(),this.shuffle(),this.renderBoard(),this.timerC.init(),document.querySelectorAll(".cell").forEach((t=>{t.addEventListener("mouseup",(t=>{const e=t.target;this.swap(parseInt(e.innerHTML,10))})),t.addEventListener("dragstart",this.dragStart),t.addEventListener("dragover",this.dragOver),t.addEventListener("drop",this.dragDrop),t.addEventListener("dragend",this.dragEnd),t.addEventListener("dragenter",this.dragEnter),t.addEventListener("dragleave",this.dragLeave)}))}load(){this.cellSize=parseFloat(this.boardWidth/this.size-2*this.marginSize).toFixed(3),document.querySelector(".move").innerHTML=this.movesCounter,this.removeBoard(),this.renderBoard(),this.win=this.createBoard(),this.timerC.init(),document.querySelectorAll(".cell").forEach((t=>{t.addEventListener("mouseup",(t=>{const e=t.target;this.swap(parseInt(e.innerHTML,10))})),t.addEventListener("dragstart",this.dragStart),t.addEventListener("dragover",this.dragOver),t.addEventListener("drop",this.dragDrop),t.addEventListener("dragend",this.dragEnd),t.addEventListener("dragenter",this.dragEnter),t.addEventListener("dragleave",this.dragLeave)}))}},s=document.createElement("header");s.classList.add("header"),s.innerHTML='<h1 class="heading">gem puzzle</h1>',document.body.appendChild(s);const i=document.createElement("div");i.classList.add("menu"),i.innerHTML=`  \n  <div class="settings">\n    <button class="new-game btn">New</button>\n    <button class="save btn">Save</button>\n    <button class="load btn">Load</button>\n    <button class="score btn">Score</button>\n    <button class="sound btn ${e.soundOn?"btn-on":""}">Sound</button>\n    <div class="size">\n      <select id="fieldSize">\n      <option selected="selected" value="4" disabled>Field size</option>\n        <option value="3">3</option>\n        <option value="4">4</option>\n        <option value="5">5</option>\n        <option value="6">6</option>\n        <option value="7">7</option>\n        <option value="8">8</option>\n      </select>\n    </div>\n    <button class="cheat btn">CHEAT</button>\n  </div>\n  <div class="counters">\n    <div class="timer"><span>Timer: </span><span class="time">0:00</span></div>\n    <div class="moves"><span>Moves: </span><span class="move">0</span></div>\n  </div>`,document.body.appendChild(i),e.init(),document.querySelector(".new-game").addEventListener("click",(()=>{e.init()})),document.querySelector(".save").addEventListener("click",(()=>{localStorage.setItem("gameSave",JSON.stringify({bgPosition:e.bgPosArr,history:e.history,size:e.size,boardTable:e.arr,time:e.timerC.currentTime,moves:e.movesCounter,zero:[e.emptyX,e.emptyY],imgNumb:e.imgNumb}))})),document.querySelector(".load").addEventListener("click",(()=>{const{bgPosition:t,history:s,size:i,boardTable:r,time:n,moves:h,zero:o,imgNumb:a}=JSON.parse(localStorage.getItem("gameSave"));e.bgPosArr=t,e.history=s,e.size=i,e.timerC.currentTime=n,e.movesCounter=h,e.arr=r,[e.emptyX,e.emptyY]=o,e.imgNumb=a,e.load(),e.timerC.load()})),document.getElementById("fieldSize").addEventListener("change",(()=>{e.init(),e.timerC.init()})),document.querySelector(".cheat").addEventListener("click",(()=>{e.timerC.timerPause(),e.back()})),document.querySelector(".sound").addEventListener("click",(t=>{e.toggleSound(),e.soundOn?t.target.classList.add("btn-on"):t.target.classList.remove("btn-on")})),document.querySelector(".score").addEventListener("click",(t=>{e.getScoreList(),e.scoreList?t.target.classList.add("btn-on"):t.target.classList.remove("btn-on")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZW0tcHV6emxlLy4vc3JjL1RpbWVyLmpzIiwid2VicGFjazovL2dlbS1wdXp6bGUvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZ2VtLXB1enpsZS8uL3NyYy9Cb2FyZC5qcyJdLCJuYW1lcyI6WyJUaW1lciIsInRoaXMiLCJjdXJyZW50VGltZSIsInRpbWUiLCJzZXRJbnRlcnZhbCIsInNlY1RvTWluQW5kU2VjIiwibWludXRlcyIsIk1hdGgiLCJmbG9vciIsInNlYyIsInRvRml4ZWQiLCJ0aW1lciIsInJlbmRlclRpbWVyIiwiY2xlYXJJbnRlcnZhbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsInRpbWVyU3RvcCIsImNhbGNDdXJyZW50VGltZSIsImJvYXJkIiwidGltZXJDIiwiaGlzdG9yeSIsInNpemUiLCJlbXB0eVgiLCJlbXB0eVkiLCJhbmltYXRpb25UaW1lIiwiYm9hcmRXaWR0aCIsIm1hcmdpblNpemUiLCJzb3VuZE9uIiwid2luU291bmQiLCJBdWRpbyIsInNsaWRlU291bmQiLCJ2b2x1bWUiLCJkcmFnTkRyb3BTb3VuZCIsInJlbW92ZUJvYXJkIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlbGVtIiwiYm9keSIsInJlbW92ZUNoaWxkIiwiZmluZEVsZW0iLCJ4IiwiYXJyIiwibGVuZ3RoIiwieSIsInBhcnNlSW50IiwiRXJyb3IiLCJkcmFnRHJvcCIsImUiLCJ6ZXJvIiwidGFyZ2V0IiwibW92ZWFibGUiLCJpc05lYXJaZXJvIiwic3R5bGUiLCJvcmRlciIsImNoZWNrRm9ySWRsaW5nIiwicHVzaCIsInBsYXlEcmFnU291bmQiLCJhZGRNb3ZlIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidG9nZ2xlQnV0dG9ucyIsImRpc2FibGVkIiwibWF4IiwibWluIiwiaW1nTnVtYiIsInJhbmRvbSIsInBvcCIsImJhY2tUaW1lciIsImFicyIsImJsWCIsImJsWSIsInNwbGljZSIsInNldFRpbWVvdXQiLCJtb3ZlQW5pbWF0aW9uIiwidGVtcCIsInJlbmRlckJvYXJkIiwicGxheVNsaWRlU291bmQiLCJjaGVja1dpbiIsImRpcmVjdGlvbiIsImNvdW50ZXIiLCJiZ1Bvc0FyciIsImkiLCJqIiwicm91bmQiLCJtb3ZlIiwiY2VsbE51bWJlciIsImNsYXNzTmFtZSIsImRyYWdnYWJsZSIsInByZXZlbnREZWYiLCJiR3BvcyIsImJnRm9yQ2VsbCIsImNlbGxTaXplIiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhZGQiLCJ3aWR0aCIsImFwcGVuZENoaWxkIiwibW92ZXNDb3VudGVyIiwicmVtUGVyVGljayIsInRpbWVQYXNzZWQiLCJ0cmFuc2Zvcm0iLCJpbkFuaW1hdGlvbiIsInN0YXJ0IiwiRGF0ZSIsIm5vdyIsImRyYXciLCJudW1iZXIiLCJ0aW1lclBhdXNlIiwic2NvcmVMaXN0IiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIm1vdmVzIiwic29ydCIsImEiLCJiIiwic2xpY2UiLCJzZXRJdGVtIiwic3RyaW5naWZ5Iiwic2NvcmVFbGVtIiwibGlzdCIsImNoZWF0Iiwid2luIiwicGxheVdpblNvdW5kIiwic2V0V2luTWVzc2FnZSIsInNldFNjb3JlIiwid2luQm9hcmQiLCJvcGFjaXR5IiwicGxheSIsInJhbmRvbUltZ051bWJlciIsImdldEVsZW1lbnRCeUlkIiwidmFsdWUiLCJwYXJzZUZsb2F0IiwiY3JlYXRlQm9hcmQiLCJzaHVmZmxlIiwiaW5pdCIsImNlbGwiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0Iiwic3dhcCIsImRyYWdTdGFydCIsImRyYWdPdmVyIiwiZHJhZ0VuZCIsImRyYWdFbnRlciIsImRyYWdMZWF2ZSIsImhlYWRlciIsIm1lbnUiLCJiZ1Bvc2l0aW9uIiwiYm9hcmRUYWJsZSIsImxvYWQiLCJiYWNrIiwidG9nZ2xlU291bmQiLCJnZXRTY29yZUxpc3QiXSwibWFwcGluZ3MiOiJtQkFBZSxNQUFNQSxFQUNuQixjQUNFQyxLQUFLQyxZ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eUMsUUFBUzlDLEVBQU04QyxjQUtyQm5ELFNBQVNDLGNBQWMsU0FBUzRILGlCQUFpQixTQUFTLEtBQ3hELE1BQU0sV0FBRVUsRUFBVSxRQUFFaEksRUFBTyxLQUFFQyxFQUFJLFdBQUVnSSxFQUFVLEtBQUVuSixFQUFJLE1BQUUrRyxFQUFLLEtBQUVqRSxFQUFJLFFBQUVnQixHQUFZNkMsS0FBS0MsTUFDakZDLGFBQWFDLFFBQVEsYUFFdkI5RixFQUFNOEQsU0FBV29FLEVBQ2pCbEksRUFBTUUsUUFBVUEsRUFDaEJGLEVBQU1HLEtBQU9BLEVBQ2JILEVBQU1DLE9BQU9sQixZQUFjQyxFQUMzQmdCLEVBQU0rRSxhQUFlZ0IsRUFDckIvRixFQUFNdUIsSUFBTTRHLEdBQ1ZuSSxFQUFNSSxPQUFRSixFQUFNSyxRQUFXeUIsRUFDakM5QixFQUFNOEMsUUFBVUEsRUFDaEI5QyxFQUFNb0ksT0FDTnBJLEVBQU1DLE9BQU9tSSxVQUdmekksU0FBU3NILGVBQWUsYUFBYU8saUJBQWlCLFVBQVUsS0FDOUR4SCxFQUFNc0gsT0FDTnRILEVBQU1DLE9BQU9xSCxVQUdmM0gsU0FBU0MsY0FBYyxVQUFVNEgsaUJBQWlCLFNBQVMsS0FDekR4SCxFQUFNQyxPQUFPd0YsYUFDYnpGLEVBQU1xSSxVQUdSMUksU0FBU0MsY0FBYyxVQUFVNEgsaUJBQWlCLFNBQVVDLElBQzFEekgsRUFBTXNJLGNBQ0Z0SSxFQUFNUyxRQUNSZ0gsRUFBSTFGLE9BQU9TLFVBQVVvQyxJQUFJLFVBRXpCNkMsRUFBSTFGLE9BQU9TLFVBQVVDLE9BQU8sYUFJaEM5QyxTQUFTQyxjQUFjLFVBQVU0SCxpQkFBaUIsU0FBVUMsSUFDMUR6SCxFQUFNdUksZUFDRnZJLEVBQU0wRixVQUNSK0IsRUFBSTFGLE9BQU9TLFVBQVVvQyxJQUFJLFVBRXpCNkMsRUFBSTFGLE9BQU9TLFVBQVVDLE9BQU8sYyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGltZXIge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5jdXJyZW50VGltZSA9IDA7XHJcbiAgfVxyXG5cclxuICBjYWxjQ3VycmVudFRpbWUoKSB7XHJcbiAgICB0aGlzLnRpbWUgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuY3VycmVudFRpbWUgKz0gMTtcclxuICAgICAgdGhpcy5zZWNUb01pbkFuZFNlYygpO1xyXG4gICAgfSwgMTAwMCk7XHJcbiAgfVxyXG5cclxuICBzZWNUb01pbkFuZFNlYygpIHtcclxuICAgIHRoaXMubWludXRlcyA9IE1hdGguZmxvb3IodGhpcy5jdXJyZW50VGltZSAvIDYwKTtcclxuXHJcbiAgICB0aGlzLnNlYyA9ICh0aGlzLmN1cnJlbnRUaW1lICUgNjApLnRvRml4ZWQoMCk7XHJcbiAgICB0aGlzLnRpbWVyID0gYCR7dGhpcy5taW51dGVzfToke3RoaXMuc2VjIDwgMTAgPyAnMCcgOiAnJ30ke3RoaXMuc2VjfWA7XHJcbiAgICB0aGlzLnJlbmRlclRpbWVyKCk7XHJcbiAgfVxyXG5cclxuICB0aW1lclN0b3AoKSB7XHJcbiAgICBjbGVhckludGVydmFsKHRoaXMudGltZSk7XHJcbiAgICB0aGlzLnRpbWVyID0gJzA6MDAnO1xyXG4gICAgdGhpcy5yZW5kZXJUaW1lcigpO1xyXG4gIH1cclxuXHJcbiAgdGltZXJQYXVzZSgpIHtcclxuICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lKTtcclxuICB9XHJcblxyXG4gIHJlbmRlclRpbWVyKCkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRpbWUnKS5pbm5lckhUTUwgPSB0aGlzLnRpbWVyO1xyXG4gIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMudGltZXJTdG9wKCk7XHJcbiAgICB0aGlzLmN1cnJlbnRUaW1lID0gbnVsbDtcclxuICAgIHRoaXMuY2FsY0N1cnJlbnRUaW1lKCk7XHJcbiAgfVxyXG5cclxuICBsb2FkKCkge1xyXG4gICAgdGhpcy50aW1lclN0b3AoKTtcclxuICAgIHRoaXMuc2VjVG9NaW5BbmRTZWMoKTtcclxuICAgIHRoaXMucmVuZGVyVGltZXIoKTtcclxuXHJcbiAgICB0aGlzLmNhbGNDdXJyZW50VGltZSgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgQm9hcmQgZnJvbSAnLi9Cb2FyZC5qcyc7XHJcblxyXG5jb25zdCBib2FyZCA9IG5ldyBCb2FyZCgpO1xyXG5cclxuY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaGVhZGVyJyk7XHJcbmhlYWRlci5jbGFzc0xpc3QuYWRkKCdoZWFkZXInKTtcclxuaGVhZGVyLmlubmVySFRNTCA9ICc8aDEgY2xhc3M9XCJoZWFkaW5nXCI+Z2VtIHB1enpsZTwvaDE+JztcclxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChoZWFkZXIpO1xyXG5cclxuY29uc3QgbWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5tZW51LmNsYXNzTGlzdC5hZGQoJ21lbnUnKTtcclxuXHJcbm1lbnUuaW5uZXJIVE1MID0gYCAgXHJcbiAgPGRpdiBjbGFzcz1cInNldHRpbmdzXCI+XHJcbiAgICA8YnV0dG9uIGNsYXNzPVwibmV3LWdhbWUgYnRuXCI+TmV3PC9idXR0b24+XHJcbiAgICA8YnV0dG9uIGNsYXNzPVwic2F2ZSBidG5cIj5TYXZlPC9idXR0b24+XHJcbiAgICA8YnV0dG9uIGNsYXNzPVwibG9hZCBidG5cIj5Mb2FkPC9idXR0b24+XHJcbiAgICA8YnV0dG9uIGNsYXNzPVwic2NvcmUgYnRuXCI+U2NvcmU8L2J1dHRvbj5cclxuICAgIDxidXR0b24gY2xhc3M9XCJzb3VuZCBidG4gJHtib2FyZC5zb3VuZE9uID8gJ2J0bi1vbicgOiAnJ31cIj5Tb3VuZDwvYnV0dG9uPlxyXG4gICAgPGRpdiBjbGFzcz1cInNpemVcIj5cclxuICAgICAgPHNlbGVjdCBpZD1cImZpZWxkU2l6ZVwiPlxyXG4gICAgICA8b3B0aW9uIHNlbGVjdGVkPVwic2VsZWN0ZWRcIiB2YWx1ZT1cIjRcIiBkaXNhYmxlZD5GaWVsZCBzaXplPC9vcHRpb24+XHJcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjNcIj4zPC9vcHRpb24+XHJcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjRcIj40PC9vcHRpb24+XHJcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjVcIj41PC9vcHRpb24+XHJcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjZcIj42PC9vcHRpb24+XHJcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjdcIj43PC9vcHRpb24+XHJcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjhcIj44PC9vcHRpb24+XHJcbiAgICAgIDwvc2VsZWN0PlxyXG4gICAgPC9kaXY+XHJcbiAgICA8YnV0dG9uIGNsYXNzPVwiY2hlYXQgYnRuXCI+Q0hFQVQ8L2J1dHRvbj5cclxuICA8L2Rpdj5cclxuICA8ZGl2IGNsYXNzPVwiY291bnRlcnNcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJ0aW1lclwiPjxzcGFuPlRpbWVyOiA8L3NwYW4+PHNwYW4gY2xhc3M9XCJ0aW1lXCI+MDowMDwvc3Bhbj48L2Rpdj5cclxuICAgIDxkaXYgY2xhc3M9XCJtb3Zlc1wiPjxzcGFuPk1vdmVzOiA8L3NwYW4+PHNwYW4gY2xhc3M9XCJtb3ZlXCI+MDwvc3Bhbj48L2Rpdj5cclxuICA8L2Rpdj5gO1xyXG5cclxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtZW51KTtcclxuXHJcbmJvYXJkLmluaXQoKTtcclxuXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXctZ2FtZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGJvYXJkLmluaXQoKTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2F2ZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxyXG4gICAgJ2dhbWVTYXZlJyxcclxuICAgIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgYmdQb3NpdGlvbjogYm9hcmQuYmdQb3NBcnIsXHJcbiAgICAgIGhpc3Rvcnk6IGJvYXJkLmhpc3RvcnksXHJcbiAgICAgIHNpemU6IGJvYXJkLnNpemUsXHJcbiAgICAgIGJvYXJkVGFibGU6IGJvYXJkLmFycixcclxuICAgICAgdGltZTogYm9hcmQudGltZXJDLmN1cnJlbnRUaW1lLFxyXG4gICAgICBtb3ZlczogYm9hcmQubW92ZXNDb3VudGVyLFxyXG4gICAgICB6ZXJvOiBbIGJvYXJkLmVtcHR5WCwgYm9hcmQuZW1wdHlZIF0sXHJcbiAgICAgIGltZ051bWI6IGJvYXJkLmltZ051bWJcclxuICAgIH0pXHJcbiAgKTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9hZCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGNvbnN0IHsgYmdQb3NpdGlvbiwgaGlzdG9yeSwgc2l6ZSwgYm9hcmRUYWJsZSwgdGltZSwgbW92ZXMsIHplcm8sIGltZ051bWIgfSA9IEpTT04ucGFyc2UoXHJcbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2FtZVNhdmUnKVxyXG4gICk7XHJcbiAgYm9hcmQuYmdQb3NBcnIgPSBiZ1Bvc2l0aW9uO1xyXG4gIGJvYXJkLmhpc3RvcnkgPSBoaXN0b3J5O1xyXG4gIGJvYXJkLnNpemUgPSBzaXplO1xyXG4gIGJvYXJkLnRpbWVyQy5jdXJyZW50VGltZSA9IHRpbWU7XHJcbiAgYm9hcmQubW92ZXNDb3VudGVyID0gbW92ZXM7XHJcbiAgYm9hcmQuYXJyID0gYm9hcmRUYWJsZTtcclxuICBbIGJvYXJkLmVtcHR5WCwgYm9hcmQuZW1wdHlZIF0gPSB6ZXJvO1xyXG4gIGJvYXJkLmltZ051bWIgPSBpbWdOdW1iO1xyXG4gIGJvYXJkLmxvYWQoKTtcclxuICBib2FyZC50aW1lckMubG9hZCgpO1xyXG59KTtcclxuXHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZFNpemUnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgYm9hcmQuaW5pdCgpO1xyXG4gIGJvYXJkLnRpbWVyQy5pbml0KCk7XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoZWF0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgYm9hcmQudGltZXJDLnRpbWVyUGF1c2UoKTtcclxuICBib2FyZC5iYWNrKCk7XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNvdW5kJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgYm9hcmQudG9nZ2xlU291bmQoKTtcclxuICBpZiAoYm9hcmQuc291bmRPbikge1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdidG4tb24nKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdidG4tb24nKTtcclxuICB9XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNjb3JlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgYm9hcmQuZ2V0U2NvcmVMaXN0KCk7XHJcbiAgaWYgKGJvYXJkLnNjb3JlTGlzdCkge1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdidG4tb24nKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdidG4tb24nKTtcclxuICB9XHJcbn0pO1xyXG4iLCJpbXBvcnQgVGltZXIgZnJvbSAnLi9UaW1lci5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCb2FyZCB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLnRpbWVyQyA9IG5ldyBUaW1lcigpO1xyXG4gICAgdGhpcy5oaXN0b3J5ID0gW107XHJcbiAgICB0aGlzLnNpemUgPSA0O1xyXG4gICAgdGhpcy5lbXB0eVggPSAwO1xyXG4gICAgdGhpcy5lbXB0eVkgPSAwO1xyXG4gICAgdGhpcy5hbmltYXRpb25UaW1lID0gMjAwO1xyXG4gICAgdGhpcy5ib2FyZFdpZHRoID0gNDAuODtcclxuICAgIHRoaXMubWFyZ2luU2l6ZSA9IDAuMTtcclxuICAgIHRoaXMuc291bmRPbiA9IHRydWU7XHJcbiAgICB0aGlzLndpblNvdW5kID0gbmV3IEF1ZGlvKCcuLi9hc3NldHMvd2luLm1wMycpO1xyXG4gICAgdGhpcy5zbGlkZVNvdW5kID0gbmV3IEF1ZGlvKCcuLi9hc3NldHMvc2xpZGUubXAzJyk7XHJcbiAgICB0aGlzLnNsaWRlU291bmQudm9sdW1lID0gMC4yO1xyXG4gICAgdGhpcy5kcmFnTkRyb3BTb3VuZCA9IG5ldyBBdWRpbygnLi4vYXNzZXRzL3dob29zaC1ncmFpbnlfZ2tvYXF5bl8ubXAzJyk7XHJcbiAgICB0aGlzLmRyYWdORHJvcFNvdW5kLnZvbHVtZSA9IDAuMztcclxuICAgIHRoaXMucmVtb3ZlQm9hcmQgPSAoKSA9PiB7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ib2FyZCcpLmZvckVhY2goKGVsZW0pID0+IHtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsZW0pO1xyXG4gICAgICB9KTtcclxuICAgIH07XHJcbiAgICB0aGlzLmZpbmRFbGVtID0gKGVsZW0pID0+IHtcclxuICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLmFyci5sZW5ndGg7IHggKz0gMSkge1xyXG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgdGhpcy5hcnIubGVuZ3RoOyB5ICs9IDEpIHtcclxuICAgICAgICAgIGlmICh0aGlzLmFyclt4XVt5XSA9PT0gcGFyc2VJbnQoZWxlbS5pbm5lckhUTUwsIDEwKSkgcmV0dXJuIFsgeCwgeSBdO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZWxlbSk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5kcmFnRHJvcCA9IChlKSA9PiB7XHJcbiAgICAgIGNvbnN0IHplcm8gPSBlLnRhcmdldDtcclxuICAgICAgY29uc3QgbW92ZWFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGlkZScpO1xyXG4gICAgICBjb25zdCBbIHgsIHkgXSA9IHRoaXMuZmluZEVsZW0obW92ZWFibGUpO1xyXG4gICAgICBpZiAodGhpcy5pc05lYXJaZXJvKHgsIHkpKSB7XHJcbiAgICAgICAgWyB0aGlzLmFyclt4XVt5XSwgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXSBdID0gW1xyXG4gICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXSxcclxuICAgICAgICAgIHRoaXMuYXJyW3hdW3ldXHJcbiAgICAgICAgXTtcclxuICAgICAgICBbIHRoaXMuZW1wdHlYLCB0aGlzLmVtcHR5WSBdID0gWyB4LCB5IF07XHJcbiAgICAgICAgWyB6ZXJvLnN0eWxlLm9yZGVyLCBtb3ZlYWJsZS5zdHlsZS5vcmRlciBdID0gWyBtb3ZlYWJsZS5zdHlsZS5vcmRlciwgemVyby5zdHlsZS5vcmRlciBdO1xyXG4gICAgICAgIHRoaXMuY2hlY2tGb3JJZGxpbmcoKTtcclxuICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChbIHRoaXMuZW1wdHlYLCB0aGlzLmVtcHR5WSBdKTtcclxuICAgICAgICB0aGlzLnBsYXlEcmFnU291bmQoKTtcclxuICAgICAgICB0aGlzLmFkZE1vdmUoKTtcclxuICAgICAgfVxyXG4gICAgICB6ZXJvLmNsYXNzTGlzdC5yZW1vdmUoJ2hvdmVyZWQnKTtcclxuICAgIH07XHJcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvbnMgPSAoKSA9PiB7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idG46bm90KC5zb3VuZCksI2ZpZWxkU2l6ZScpLmZvckVhY2goKGUpID0+IHtcclxuICAgICAgICBlLmRpc2FibGVkID0gIWUuZGlzYWJsZWQ7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHJhbmRvbUltZ051bWJlcihtYXgsIG1pbikge1xyXG4gICAgdGhpcy5pbWdOdW1iID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW4pO1xyXG4gIH1cclxuXHJcbiAgYmFjaygpIHtcclxuICAgIHRoaXMudG9nZ2xlQnV0dG9ucygpO1xyXG4gICAgdGhpcy5oaXN0b3J5LnBvcCgpO1xyXG4gICAgdGhpcy5iYWNrVGltZXIoKTtcclxuICB9XHJcblxyXG4gIGlzTmVhclplcm8oeCwgeSkge1xyXG4gICAgcmV0dXJuICEhKFxyXG4gICAgICAoTWF0aC5hYnModGhpcy5lbXB0eVggLSB4KSA8PSAxICYmIHRoaXMuZW1wdHlZIC0geSA9PT0gMCkgfHxcclxuICAgICAgKE1hdGguYWJzKHRoaXMuZW1wdHlZIC0geSkgPD0gMSAmJiB0aGlzLmVtcHR5WCAtIHggPT09IDApXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgY2hlY2tGb3JJZGxpbmcoKSB7XHJcbiAgICBjb25zdCBbIGJsWCwgYmxZIF0gPSB0aGlzLmhpc3RvcnlbdGhpcy5oaXN0b3J5Lmxlbmd0aCAtIDJdO1xyXG4gICAgaWYgKHRoaXMuZW1wdHlYID09PSBibFggJiYgdGhpcy5lbXB0eVkgPT09IGJsWSkgdGhpcy5oaXN0b3J5LnNwbGljZSgtMiwgMik7XHJcbiAgfVxyXG5cclxuICBiYWNrVGltZXIoKSB7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgaWYgKHRoaXMuaGlzdG9yeS5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBbIHgsIHkgXSA9IHRoaXMuaGlzdG9yeS5wb3AoKTtcclxuICAgICAgICB0aGlzLmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjY2VsbC0ke3RoaXMuYXJyW3hdW3ldfWApO1xyXG5cclxuICAgICAgICB0aGlzLm1vdmVBbmltYXRpb24oWyB4LCB5IF0pO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIGNvbnN0IHRlbXAgPSB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldO1xyXG4gICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXSA9IHRoaXMuYXJyW3hdW3ldO1xyXG4gICAgICAgICAgdGhpcy5hcnJbeF1beV0gPSB0ZW1wO1xyXG4gICAgICAgICAgdGhpcy5lbXB0eVggPSB4O1xyXG4gICAgICAgICAgdGhpcy5lbXB0eVkgPSB5O1xyXG4gICAgICAgICAgdGhpcy5yZW1vdmVCb2FyZCgpO1xyXG4gICAgICAgICAgdGhpcy5yZW5kZXJCb2FyZCgpO1xyXG4gICAgICAgICAgdGhpcy5wbGF5U2xpZGVTb3VuZCgpO1xyXG4gICAgICAgICAgdGhpcy5iYWNrVGltZXIoKTtcclxuICAgICAgICB9LCB0aGlzLmFuaW1hdGlvblRpbWUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuY2hlY2tXaW4odHJ1ZSk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25zKCk7XHJcbiAgICAgIH1cclxuICAgIH0sIHRoaXMuYW5pbWF0aW9uVGltZSk7XHJcbiAgfVxyXG5cclxuICBtb3ZlKGRpcmVjdGlvbikge1xyXG4gICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcclxuICAgICAgY2FzZSAndXAnOlxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHRoaXMuZW1wdHlYICE9PSAwICYmXHJcbiAgICAgICAgICAodGhpcy5oaXN0b3J5Lmxlbmd0aCA8PSAxIHx8IHRoaXMuZW1wdHlYIC0gMSAhPT0gdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeS5sZW5ndGggLSAyXVswXSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV0gPSB0aGlzLmFyclt0aGlzLmVtcHR5WCAtIDFdW3RoaXMuZW1wdHlZXTtcclxuICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYIC0gMV1bdGhpcy5lbXB0eVldID0gMDtcclxuICAgICAgICAgIHRoaXMuZW1wdHlYIC09IDE7XHJcbiAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChbIHRoaXMuZW1wdHlYLCB0aGlzLmVtcHR5WSBdKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5jb3VudGVyIC09IDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnZG93bic6XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgdGhpcy5lbXB0eVggIT09IHRoaXMuc2l6ZSAtIDEgJiZcclxuICAgICAgICAgICh0aGlzLmhpc3RvcnkubGVuZ3RoIDw9IDEgfHwgdGhpcy5lbXB0eVggKyAxICE9PSB0aGlzLmhpc3RvcnlbdGhpcy5oaXN0b3J5Lmxlbmd0aCAtIDJdWzBdKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXSA9IHRoaXMuYXJyW3RoaXMuZW1wdHlYICsgMV1bdGhpcy5lbXB0eVldO1xyXG4gICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVggKyAxXVt0aGlzLmVtcHR5WV0gPSAwO1xyXG4gICAgICAgICAgdGhpcy5lbXB0eVggKz0gMTtcclxuICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKFsgdGhpcy5lbXB0eVgsIHRoaXMuZW1wdHlZIF0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmNvdW50ZXIgLT0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0aGlzLmVtcHR5WSAhPT0gdGhpcy5zaXplIC0gMSAmJlxyXG4gICAgICAgICAgKHRoaXMuaGlzdG9yeS5sZW5ndGggPD0gMSB8fCB0aGlzLmVtcHR5WSArIDEgIT09IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnkubGVuZ3RoIC0gMl1bMV0pXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldID0gdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZICsgMV07XHJcbiAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVkgKyAxXSA9IDA7XHJcbiAgICAgICAgICB0aGlzLmVtcHR5WSArPSAxO1xyXG4gICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2goWyB0aGlzLmVtcHR5WCwgdGhpcy5lbXB0eVkgXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuY291bnRlciAtPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgdGhpcy5lbXB0eVkgIT09IDAgJiZcclxuICAgICAgICAgICh0aGlzLmhpc3RvcnkubGVuZ3RoIDw9IDEgfHwgdGhpcy5lbXB0eVkgLSAxICE9PSB0aGlzLmhpc3RvcnlbdGhpcy5oaXN0b3J5Lmxlbmd0aCAtIDJdWzFdKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXSA9IHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WSAtIDFdO1xyXG4gICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZIC0gMV0gPSAwO1xyXG4gICAgICAgICAgdGhpcy5lbXB0eVkgLT0gMTtcclxuICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKFsgdGhpcy5lbXB0eVgsIHRoaXMuZW1wdHlZIF0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmNvdW50ZXIgLT0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCc+OignKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNyZWF0ZUJvYXJkKCkge1xyXG4gICAgY29uc3QgYXJyID0gW107XHJcblxyXG4gICAgdGhpcy5iZ1Bvc0FyciA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNpemU7IGkgKz0gMSkge1xyXG4gICAgICBhcnJbaV0gPSBbXTtcclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnNpemU7IGogKz0gMSkge1xyXG4gICAgICAgIGlmIChpICsgaiAhPT0gKHRoaXMuc2l6ZSAtIDEpICogMikge1xyXG4gICAgICAgICAgYXJyW2ldW2pdID0gaSAqIHRoaXMuc2l6ZSArIGogKyAxO1xyXG4gICAgICAgICAgdGhpcy5iZ1Bvc0Fyci5wdXNoKFxyXG4gICAgICAgICAgICBgJHtNYXRoLnJvdW5kKDEwMCAvICh0aGlzLnNpemUgLSAxKSAqIGopfSUgJHtNYXRoLnJvdW5kKDEwMCAvICh0aGlzLnNpemUgLSAxKSAqIGkpfSVgXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBhcnJbaV1bal0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFycjtcclxuICB9XHJcblxyXG4gIHNodWZmbGUoKSB7XHJcbiAgICB0aGlzLmhpc3RvcnkucHVzaChbIHRoaXMuZW1wdHlYLCB0aGlzLmVtcHR5WSBdKTtcclxuICAgIGZvciAodGhpcy5jb3VudGVyID0gMDsgdGhpcy5jb3VudGVyIDwgdGhpcy5zaXplICoqIDM7IHRoaXMuY291bnRlciArPSAxKSB7XHJcbiAgICAgIHN3aXRjaCAoTWF0aC5mbG9vcig0ICogTWF0aC5yYW5kb20oKSkpIHtcclxuICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAvLyAgTU9WRSBVUFxyXG5cclxuICAgICAgICAgIHRoaXMubW92ZSgndXAnKTtcclxuXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAvLyAgTU9WRSBSSUdIVFxyXG4gICAgICAgICAgdGhpcy5tb3ZlKCdyaWdodCcpO1xyXG5cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgIC8vICBNT1ZFIERPV05cclxuICAgICAgICAgIHRoaXMubW92ZSgnZG93bicpO1xyXG5cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgIC8vICBNT1ZFIExFRlRcclxuICAgICAgICAgIHRoaXMubW92ZSgnbGVmdCcpO1xyXG5cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJz46KCcpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXJCb2FyZCgpIHtcclxuICAgIGxldCBib2FyZCA9IGA8ZGl2IGNsYXNzPVwic2NvcmUtbGlzdFwiPnRlc3Q8L2Rpdj5gO1xyXG4gICAgY29uc3QgYm9hcmRXaWR0aCA9IGAke3RoaXMuYm9hcmRXaWR0aH1yZW1gO1xyXG4gICAgbGV0IGNlbGxOdW1iZXI7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDAsIG9yZGVyID0gMTsgaSA8IHRoaXMuc2l6ZTsgaSArPSAxKSB7XHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5zaXplOyBqICs9IDEpIHtcclxuICAgICAgICBjZWxsTnVtYmVyID0gdGhpcy5hcnJbaV1bal07XHJcblxyXG4gICAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IGNlbGxOdW1iZXIgPyAnY2VsbCcgOiAnY2VsbCBlbXB0eSc7XHJcblxyXG4gICAgICAgIGNvbnN0IGRyYWdnYWJsZSA9ICEhY2VsbE51bWJlcjtcclxuXHJcbiAgICAgICAgY29uc3QgcHJldmVudERlZiA9ICFjZWxsTnVtYmVyID8gXCJvbmRyYWdvdmVyID0gJ2V2ZW50LnByZXZlbnREZWZhdWx0KCknXCIgOiAnJztcclxuICAgICAgICBjb25zdCBiR3BvcyA9IHRoaXMuYmdQb3NBcnJbY2VsbE51bWJlciAtIDFdO1xyXG4gICAgICAgIGNvbnN0IGJnRm9yQ2VsbCA9IGNlbGxOdW1iZXJcclxuICAgICAgICAgID8gYGJhY2tncm91bmQ6IHVybCguLi9hc3NldHMvaW1hZ2VzLyR7dGhpc1xyXG4gICAgICAgICAgICAgIC5pbWdOdW1ifS5qcGcpOyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAke2JHcG9zfTsgYmFja2dyb3VuZC1zaXplOiAke2JvYXJkV2lkdGh9O2BcclxuICAgICAgICAgIDogJyc7XHJcbiAgICAgICAgb3JkZXIgKz0gMTtcclxuXHJcbiAgICAgICAgYm9hcmQgKz0gYDxkaXYgXHJcbiAgICAgICAgJHtwcmV2ZW50RGVmfVxyXG4gICAgICAgICAgc3R5bGU9J3dpZHRoOiR7dGhpcy5jZWxsU2l6ZX1yZW07XHJcbiAgICAgICAgICBoZWlnaHQ6JHt0aGlzLmNlbGxTaXplfXJlbTtcclxuICAgICAgICAgIG9yZGVyOiR7b3JkZXJ9O1xyXG4gICAgICAgICAgJHtiZ0ZvckNlbGx9J1xyXG4gICAgICAgICAgaWQ9J2NlbGwtJHtjZWxsTnVtYmVyfSdcclxuICAgICAgICAgIGNsYXNzPScke2NsYXNzTmFtZX0nXHJcbiAgICAgICAgICBkcmFnZ2FibGU9XCIke2RyYWdnYWJsZX1cIj4ke2NlbGxOdW1iZXJ9PC9kaXY+YDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYm9hcmQnKTtcclxuICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSBib2FyZFdpZHRoO1xyXG4gICAgZWxlbWVudC5pbm5lckhUTUwgPSBib2FyZDtcclxuXHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgYWRkTW92ZSgpIHtcclxuICAgIHRoaXMubW92ZXNDb3VudGVyICs9IDE7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW92ZScpLmlubmVySFRNTCA9IHRoaXMubW92ZXNDb3VudGVyO1xyXG4gIH1cclxuXHJcbiAgZHJhdygpIHtcclxuICAgIGNvbnN0IHJlbVBlclRpY2sgPSB0aGlzLmNlbGxTaXplIC8gdGhpcy5hbmltYXRpb25UaW1lICogdGhpcy50aW1lUGFzc2VkO1xyXG4gICAgc3dpdGNoICh0aGlzLmRpcmVjdGlvbikge1xyXG4gICAgICBjYXNlICd1cCc6XHJcbiAgICAgICAgdGhpcy5lLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoIDAsICR7LXJlbVBlclRpY2t9cmVtKWA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2Rvd24nOlxyXG4gICAgICAgIHRoaXMuZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCAwLCAke3JlbVBlclRpY2t9cmVtKWA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgIHRoaXMuZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCAkey1yZW1QZXJUaWNrfXJlbSwgMClgO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgICAgdGhpcy5lLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoICR7cmVtUGVyVGlja31yZW0sIDApYDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJz46KCcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbW92ZUFuaW1hdGlvbihbIHgsIHkgXSkge1xyXG4gICAgaWYgKHRoaXMuZW1wdHlYIDwgeCkge1xyXG4gICAgICB0aGlzLmRpcmVjdGlvbiA9ICd1cCc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZW1wdHlYID4geCkge1xyXG4gICAgICB0aGlzLmRpcmVjdGlvbiA9ICdkb3duJztcclxuICAgIH0gZWxzZSBpZiAodGhpcy5lbXB0eVkgPCB5KSB7XHJcbiAgICAgIHRoaXMuZGlyZWN0aW9uID0gJ2xlZnQnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmVtcHR5WSA+IHkpIHtcclxuICAgICAgdGhpcy5kaXJlY3Rpb24gPSAncmlnaHQnO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaW5BbmltYXRpb24gPSB0cnVlO1xyXG4gICAgdGhpcy5zdGFydCA9IERhdGUubm93KCk7XHJcblxyXG4gICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgdGhpcy50aW1lUGFzc2VkID0gRGF0ZS5ub3coKSAtIHRoaXMuc3RhcnQ7XHJcblxyXG4gICAgICBpZiAodGhpcy50aW1lUGFzc2VkID49IHRoaXMuYW5pbWF0aW9uVGltZSkge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XHJcbiAgICAgICAgdGhpcy5pbkFuaW1hdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICB9LCAyMCk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVTb3VuZCgpIHtcclxuICAgIHRoaXMuc291bmRPbiA9ICF0aGlzLnNvdW5kT247XHJcbiAgfVxyXG5cclxuICBzd2FwKG51bWJlcikge1xyXG4gICAgaWYgKHRoaXMuaW5BbmltYXRpb24pIHJldHVybjtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYXJyLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5hcnJbaV0ubGVuZ3RoOyBqICs9IDEpIHtcclxuICAgICAgICBpZiAodGhpcy5hcnJbaV1bal0gPT09IG51bWJlcikge1xyXG4gICAgICAgICAgaWYgKHRoaXMuaXNOZWFyWmVybyhpLCBqKSkge1xyXG4gICAgICAgICAgICAvLyBNb3ZlIGNvdW50ZXJcclxuICAgICAgICAgICAgdGhpcy5hZGRNb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB6ZXJvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2NlbGwtJHt0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldfWApO1xyXG4gICAgICAgICAgICB0aGlzLmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjY2VsbC0ke3RoaXMuYXJyW2ldW2pdfWApO1xyXG5cclxuICAgICAgICAgICAgLy8gIGZpbmQgd2hlcmUgYXJlIHdlIG1vdmluZ1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVBbmltYXRpb24oWyBpLCBqIF0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wbGF5U2xpZGVTb3VuZCgpO1xyXG5cclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHplcm8uc3R5bGUub3JkZXI7XHJcbiAgICAgICAgICAgICAgemVyby5zdHlsZS5vcmRlciA9IHRoaXMuZS5zdHlsZS5vcmRlcjtcclxuICAgICAgICAgICAgICB0aGlzLmUuc3R5bGUub3JkZXIgPSB0ZW1wO1xyXG5cclxuICAgICAgICAgICAgICB0aGlzLmUuc3R5bGUudHJhbnNmb3JtID0gJyc7XHJcblxyXG4gICAgICAgICAgICAgIGlmICh0aGlzLmVtcHR5WCA9PT0gdGhpcy5lbXB0eVkgJiYgdGhpcy5lbXB0eVkgPT09IHRoaXMuc2l6ZSAtIDEpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrV2luKCkpIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy50aW1lckMudGltZXJQYXVzZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgdGhpcy5hbmltYXRpb25UaW1lKTtcclxuICAgICAgICAgICAgWyB0aGlzLmFycltpXVtqXSwgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXSBdID0gW1xyXG4gICAgICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV0sXHJcbiAgICAgICAgICAgICAgdGhpcy5hcnJbaV1bal1cclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgdGhpcy5lbXB0eVggPSBpO1xyXG4gICAgICAgICAgICB0aGlzLmVtcHR5WSA9IGo7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNoZWNrRm9ySWRsaW5nKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKFsgdGhpcy5lbXB0eVgsIHRoaXMuZW1wdHlZIF0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRTY29yZSgpIHtcclxuICAgIGxldCBzY29yZUxpc3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzY29yZS1saXN0JykpIHx8IFtdO1xyXG4gICAgc2NvcmVMaXN0LnB1c2goeyBtb3ZlczogdGhpcy5tb3Zlc0NvdW50ZXIsIHNpemU6IHRoaXMuc2l6ZSwgdGltZTogdGhpcy50aW1lckMudGltZXIgfSk7XHJcbiAgICBpZiAoc2NvcmVMaXN0Lmxlbmd0aCA+IDEwKSB7XHJcbiAgICAgIHNjb3JlTGlzdC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGEubW92ZXMgLSBiLm1vdmVzO1xyXG4gICAgICB9KTtcclxuICAgICAgc2NvcmVMaXN0ID0gc2NvcmVMaXN0LnNsaWNlKDAsIDEwKTtcclxuICAgIH1cclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzY29yZS1saXN0JywgSlNPTi5zdHJpbmdpZnkoc2NvcmVMaXN0KSk7XHJcbiAgfVxyXG5cclxuICBnZXRTY29yZUxpc3QoKSB7XHJcbiAgICB0aGlzLnNjb3JlTGlzdCA9ICF0aGlzLnNjb3JlTGlzdDtcclxuXHJcbiAgICBjb25zdCBzY29yZUVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2NvcmUtbGlzdCcpO1xyXG4gICAgY29uc3Qgc2NvcmVMaXN0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2NvcmUtbGlzdCcpKSB8fCBbXTtcclxuICAgIGxldCBsaXN0ID0gJyc7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IHNjb3JlTGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGkgLT0gMSkge1xyXG4gICAgICBsaXN0ICs9IGA8bGk+U2l6ZTogJHtzY29yZUxpc3RbaV0uc2l6ZX0sJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7TW92ZXM6ICR7c2NvcmVMaXN0W2ldXHJcbiAgICAgICAgLm1vdmVzfSwmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDtUaW1lOiAke3Njb3JlTGlzdFtpXS50aW1lfTwvbGk+YDtcclxuICAgIH1cclxuICAgIHNjb3JlRWxlbS5pbm5lckhUTUwgPSBgPGgyPkJlc3QgU2NvcmVzPC9oMj5cclxuICAgICAgPG9sIGNsYXNzPVwic2NvcmVcIj4ke2xpc3R9PC9vbD5gO1xyXG4gICAgaWYgKHRoaXMuc2NvcmVMaXN0KSB7XHJcbiAgICAgIHNjb3JlRWxlbS5jbGFzc0xpc3QuYWRkKCdzY29yZS1saXN0LW9uJyk7XHJcbiAgICAgIHRoaXMudGltZXJDLnRpbWVyUGF1c2UoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNjb3JlRWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdzY29yZS1saXN0LW9uJyk7XHJcbiAgICAgIHRoaXMudGltZXJDLmNhbGNDdXJyZW50VGltZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2hlY2tXaW4oY2hlYXQpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zaXplOyBpICs9IDEpIHtcclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnNpemU7IGogKz0gMSkge1xyXG4gICAgICAgIGlmIChpICsgaiAhPT0gKHRoaXMuc2l6ZSAtIDEpICogMikge1xyXG4gICAgICAgICAgaWYgKHRoaXMud2luW2ldW2pdICE9PSB0aGlzLmFycltpXVtqXSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5wbGF5V2luU291bmQoKTtcclxuICAgIHRoaXMuc2V0V2luTWVzc2FnZShjaGVhdCk7XHJcbiAgICBpZiAoIWNoZWF0KSB7XHJcbiAgICAgIHRoaXMuc2V0U2NvcmUoKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgc2V0V2luTWVzc2FnZShjaGVhdCkge1xyXG4gICAgdGhpcy53aW5Cb2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib2FyZCcpO1xyXG4gICAgdGhpcy53aW5Cb2FyZC5jbGFzc0xpc3QuYWRkKCd3aW4nKTtcclxuXHJcbiAgICB0aGlzLndpbkJvYXJkLmlubmVySFRNTCArPSBgPGRpdiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCguLi9hc3NldHMvaW1hZ2VzLyR7dGhpc1xyXG4gICAgICAuaW1nTnVtYn0uanBnKTtcIiBjbGFzcz0nd2luLXRleHQnPiR7Y2hlYXRcclxuICAgICAgPyAn0KfQmNCi0JXQoCEnXHJcbiAgICAgIDogYNCj0YDQsCEg0JLRiyDRgNC10YjQuNC70Lgg0LPQvtC70L7QstC+0LvQvtC80LrRgyDQt9CwICR7ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRpbWUnKVxyXG4gICAgICAgICAgLmlubmVySFRNTH0g0LggJHtkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW92ZScpLmlubmVySFRNTH0g0YXQvtC00L7QsjwvZGl2PmB9PC9kaXY+YDtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLndpbkJvYXJkLnF1ZXJ5U2VsZWN0b3IoJy53aW4tdGV4dCcpLnN0eWxlLm9wYWNpdHkgPSAxO1xyXG4gICAgfSwgNTApO1xyXG4gIH1cclxuXHJcbiAgcGxheVdpblNvdW5kKCkge1xyXG4gICAgaWYgKCF0aGlzLnNvdW5kT24pIHJldHVybjtcclxuICAgIHRoaXMud2luU291bmQuY3VycmVudFRpbWUgPSAwO1xyXG4gICAgdGhpcy53aW5Tb3VuZC5wbGF5KCk7XHJcbiAgfVxyXG5cclxuICBwbGF5U2xpZGVTb3VuZCgpIHtcclxuICAgIGlmICghdGhpcy5zb3VuZE9uKSByZXR1cm47XHJcbiAgICB0aGlzLnNsaWRlU291bmQuY3VycmVudFRpbWUgPSAwO1xyXG4gICAgdGhpcy5zbGlkZVNvdW5kLnBsYXkoKTtcclxuICB9XHJcblxyXG4gIHBsYXlEcmFnU291bmQoKSB7XHJcbiAgICBpZiAoIXRoaXMuc291bmRPbikgcmV0dXJuO1xyXG4gICAgdGhpcy5kcmFnTkRyb3BTb3VuZC5jdXJyZW50VGltZSA9IDAuMTU7XHJcbiAgICB0aGlzLmRyYWdORHJvcFNvdW5kLnBsYXkoKTtcclxuICB9XHJcblxyXG4gIGRyYWdTdGFydCgpIHtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcclxuICAgIH0sIDApO1xyXG4gIH1cclxuXHJcbiAgZHJhZ0VuZCgpIHtcclxuICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xyXG4gIH1cclxuXHJcbiAgZHJhZ0VudGVyKCkge1xyXG4gICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdob3ZlcmVkJyk7XHJcbiAgfVxyXG5cclxuICBkcmFnTGVhdmUoKSB7XHJcbiAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2hvdmVyZWQnKTtcclxuICB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnNjb3JlTGlzdCA9IGZhbHNlO1xyXG4gICAgdGhpcy5yYW5kb21JbWdOdW1iZXIoMTUwLCAxKTtcclxuICAgIHRoaXMuaGlzdG9yeSA9IFtdO1xyXG4gICAgdGhpcy5tb3Zlc0NvdW50ZXIgPSAwO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vdmUnKS5pbm5lckhUTUwgPSB0aGlzLm1vdmVzQ291bnRlcjtcclxuICAgIHRoaXMuc2l6ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZFNpemUnKS52YWx1ZTtcclxuXHJcbiAgICB0aGlzLmNlbGxTaXplID0gcGFyc2VGbG9hdCh0aGlzLmJvYXJkV2lkdGggLyB0aGlzLnNpemUgLSAyICogdGhpcy5tYXJnaW5TaXplKS50b0ZpeGVkKDMpO1xyXG5cclxuICAgIHRoaXMucmVtb3ZlQm9hcmQoKTtcclxuXHJcbiAgICB0aGlzLmVtcHR5WCA9IHRoaXMuc2l6ZSAtIDE7XHJcbiAgICB0aGlzLmVtcHR5WSA9IHRoaXMuc2l6ZSAtIDE7XHJcblxyXG4gICAgdGhpcy5hcnIgPSB0aGlzLmNyZWF0ZUJvYXJkKCk7XHJcbiAgICB0aGlzLndpbiA9IHRoaXMuY3JlYXRlQm9hcmQoKTtcclxuXHJcbiAgICB0aGlzLnNodWZmbGUoKTtcclxuXHJcbiAgICB0aGlzLnJlbmRlckJvYXJkKCk7XHJcbiAgICB0aGlzLnRpbWVyQy5pbml0KCk7XHJcblxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKS5mb3JFYWNoKChjZWxsKSA9PiB7XHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIChldnQpID0+IHtcclxuICAgICAgICBjb25zdCBlbGVtID0gZXZ0LnRhcmdldDtcclxuICAgICAgICB0aGlzLnN3YXAocGFyc2VJbnQoZWxlbS5pbm5lckhUTUwsIDEwKSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCB0aGlzLmRyYWdTdGFydCk7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgdGhpcy5kcmFnT3Zlcik7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCB0aGlzLmRyYWdEcm9wKTtcclxuXHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIHRoaXMuZHJhZ0VuZCk7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbnRlcicsIHRoaXMuZHJhZ0VudGVyKTtcclxuXHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgdGhpcy5kcmFnTGVhdmUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBsb2FkKCkge1xyXG4gICAgdGhpcy5jZWxsU2l6ZSA9IHBhcnNlRmxvYXQodGhpcy5ib2FyZFdpZHRoIC8gdGhpcy5zaXplIC0gMiAqIHRoaXMubWFyZ2luU2l6ZSkudG9GaXhlZCgzKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb3ZlJykuaW5uZXJIVE1MID0gdGhpcy5tb3Zlc0NvdW50ZXI7XHJcbiAgICB0aGlzLnJlbW92ZUJvYXJkKCk7XHJcbiAgICB0aGlzLnJlbmRlckJvYXJkKCk7XHJcbiAgICB0aGlzLndpbiA9IHRoaXMuY3JlYXRlQm9hcmQoKTtcclxuICAgIHRoaXMudGltZXJDLmluaXQoKTtcclxuXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpLmZvckVhY2goKGNlbGwpID0+IHtcclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKGV2dCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGVsZW0gPSBldnQudGFyZ2V0O1xyXG4gICAgICAgIHRoaXMuc3dhcChwYXJzZUludChlbGVtLmlubmVySFRNTCwgMTApKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIHRoaXMuZHJhZ1N0YXJ0KTtcclxuXHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCB0aGlzLmRyYWdPdmVyKTtcclxuXHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIHRoaXMuZHJhZ0Ryb3ApO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgdGhpcy5kcmFnRW5kKTtcclxuXHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgdGhpcy5kcmFnRW50ZXIpO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCB0aGlzLmRyYWdMZWF2ZSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==