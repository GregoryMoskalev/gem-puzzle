(()=>{"use strict";class t{constructor(){this.currentTime=0}calcCurrentTime(){this.time=setInterval((()=>{this.currentTime+=1,this.secToMinAndSec()}),1e3)}secToMinAndSec(){this.minutes=Math.floor(this.currentTime/60),this.sec=(this.currentTime%60).toFixed(0),this.timer=`${this.minutes}:${this.sec<10?"0":""}${this.sec}`,this.renderTimer()}timerStop(){clearInterval(this.time),this.timer="0:00",this.renderTimer()}timerPause(){clearInterval(this.time)}renderTimer(){document.querySelector(".time").innerHTML=this.timer}init(){this.timerStop(),this.currentTime=null,this.calcCurrentTime()}load(){this.timerStop(),this.secToMinAndSec(),this.renderTimer(),this.calcCurrentTime()}}const e=new class{constructor(){this.timerC=new t,this.history=[],this.size=4,this.emptyX=0,this.emptyY=0,this.animationTime=200,this.boardWidth=40.8,this.marginSize=.1,this.soundOn=!0,this.winSound=new Audio("../assets/win.mp3"),this.slideSound=new Audio("../assets/slide.mp3"),this.slideSound.volume=.2,this.removeBoard=()=>{document.querySelectorAll(".board").forEach((t=>{document.body.removeChild(t)}))},this.findElem=t=>{for(let e=0;e<this.arr.length;e+=1)for(let s=0;s<this.arr.length;s+=1)if(this.arr[e][s]===parseInt(t.innerHTML,10))return[e,s];throw new Error(t)},this.dragDrop=t=>{const e=t.target,s=document.querySelector(".hide"),[i,r]=this.findElem(s);this.isNearZero(i,r)&&([this.arr[i][r],this.arr[this.emptyX][this.emptyY]]=[this.arr[this.emptyX][this.emptyY],this.arr[i][r]],[this.emptyX,this.emptyY]=[i,r],[e.style.order,s.style.order]=[s.style.order,e.style.order],console.log(this.arr)),e.classList.remove("hovered"),console.log(this.arr)}}randomImgNumber(t,e){this.imgNumb=Math.floor(Math.random()*(t-e)+e)}back(){this.history.pop(),this.backTimer()}isNearZero(t,e){return!!(Math.abs(this.emptyX-t)<=1&&this.emptyY-e==0||Math.abs(this.emptyY-e)<=1&&this.emptyX-t==0)}backTimer(){setTimeout((()=>{if(this.history.length){const[t,e]=this.history.pop();this.e=document.querySelector("#cell-"+this.arr[t][e]),this.moveAnimation([t,e]),setTimeout((()=>{const s=this.arr[this.emptyX][this.emptyY];this.arr[this.emptyX][this.emptyY]=this.arr[t][e],this.arr[t][e]=s,this.emptyX=t,this.emptyY=e,this.removeBoard(),this.renderBoard(),this.playSlideSound(),this.backTimer()}),this.animationTime)}else this.checkWin(!0)}),this.animationTime)}move(t){switch(t){case"up":0!==this.emptyX&&(this.history.length<=1||this.emptyX-1!==this.history[this.history.length-2][0])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX-1][this.emptyY],this.arr[this.emptyX-1][this.emptyY]=0,this.emptyX-=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;case"down":this.emptyX!==this.size-1&&(this.history.length<=1||this.emptyX+1!==this.history[this.history.length-2][0])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX+1][this.emptyY],this.arr[this.emptyX+1][this.emptyY]=0,this.emptyX+=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;case"right":this.emptyY!==this.size-1&&(this.history.length<=1||this.emptyY+1!==this.history[this.history.length-2][1])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX][this.emptyY+1],this.arr[this.emptyX][this.emptyY+1]=0,this.emptyY+=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;case"left":0!==this.emptyY&&(this.history.length<=1||this.emptyY-1!==this.history[this.history.length-2][1])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX][this.emptyY-1],this.arr[this.emptyX][this.emptyY-1]=0,this.emptyY-=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;default:throw new Error(">:(")}}createBoard(){const t=[];this.bgPosArr=[];for(let e=0;e<this.size;e+=1){t[e]=[];for(let s=0;s<this.size;s+=1)e+s!==2*(this.size-1)?(t[e][s]=e*this.size+s+1,this.bgPosArr.push(`${Math.round(100/(this.size-1)*s)}% ${Math.round(100/(this.size-1)*e)}%`)):t[e][s]=0}return t}shuffle(){for(this.history.push([this.emptyX,this.emptyY]),this.counter=0;this.counter<this.size**3;this.counter+=1)switch(Math.floor(4*Math.random())){case 0:this.move("up");break;case 1:this.move("right");break;case 2:this.move("down");break;case 3:this.move("left");break;default:throw new Error(">:(")}}renderBoard(){let t='<div class="score-list">test</div>';const e=this.boardWidth+"rem";let s;for(let i=0,r=1;i<this.size;i+=1)for(let n=0;n<this.size;n+=1){s=this.arr[i][n];const h=s?"cell":"cell empty",o=!!s,a=s?"":"ondragover = 'event.preventDefault()'",m=this.bgPosArr[s-1],d=s?`background: url(../assets/images/${this.imgNumb}.jpg); background-position: ${m}; background-size: ${e};`:"";r+=1,t+=`<div \n        ${a}\n          style='width:${this.cellSize}rem;\n          height:${this.cellSize}rem;\n          order:${r};\n          ${d}'\n          id='cell-${s}'\n          class='${h}'\n          draggable="${o}">${s}</div>`}const i=document.createElement("div");i.classList.add("board"),i.style.width=e,i.innerHTML=t,document.body.appendChild(i)}draw(){const t=this.cellSize/this.animationTime*this.timePassed;switch(this.direction){case"up":this.e.style.transform=`translate( 0, ${-t}rem)`;break;case"down":this.e.style.transform=`translate( 0, ${t}rem)`;break;case"left":this.e.style.transform=`translate( ${-t}rem, 0)`;break;case"right":this.e.style.transform=`translate( ${t}rem, 0)`;break;default:throw new Error(">:(")}}moveAnimation([t,e]){this.emptyX<t?this.direction="up":this.emptyX>t?this.direction="down":this.emptyY<e?this.direction="left":this.emptyY>e&&(this.direction="right"),this.inAnimation=!0,this.start=Date.now(),this.timer=setInterval((()=>{if(this.timePassed=Date.now()-this.start,this.timePassed>=this.animationTime)return clearInterval(this.timer),void(this.inAnimation=!1);this.draw()}),20)}toggleSound(){this.soundOn=!this.soundOn}swap(t){if(!this.inAnimation)for(let e=0;e<this.arr.length;e+=1)for(let s=0;s<this.arr[e].length;s+=1)if(this.arr[e][s]===t&&this.isNearZero(e,s)){this.movesCounter+=1,document.querySelector(".move").innerHTML=this.movesCounter;const t=document.querySelector("#cell-"+this.arr[this.emptyX][this.emptyY]);return this.e=document.querySelector("#cell-"+this.arr[e][s]),this.moveAnimation([e,s]),this.playSlideSound(),setTimeout((()=>{const e=t.style.order;t.style.order=this.e.style.order,this.e.style.order=e,this.e.style.transform="",this.emptyX===this.emptyY&&this.emptyY===this.size-1&&this.checkWin()&&this.timerC.timerPause()}),this.animationTime),[this.arr[e][s],this.arr[this.emptyX][this.emptyY]]=[this.arr[this.emptyX][this.emptyY],this.arr[e][s]],this.emptyX=e,this.emptyY=s,void this.history.push([this.emptyX,this.emptyY])}}setScore(){let t=JSON.parse(localStorage.getItem("score-list"))||[];t.push({moves:this.movesCounter,size:this.size,time:this.timerC.timer}),t.length>10&&(t.sort(((t,e)=>t.moves-e.moves)),t=t.slice(0,10)),localStorage.setItem("score-list",JSON.stringify(t))}getScoreList(){this.scoreList=!this.scoreList;const t=document.querySelector(".score-list"),e=JSON.parse(localStorage.getItem("score-list"))||[];let s="";for(let t=e.length-1;t>=0;t-=1)s+=`<li>Size: ${e[t].size},&nbsp;&nbsp;&nbsp;&nbsp;Moves: ${e[t].moves},&nbsp;&nbsp;&nbsp;&nbsp;Time: ${e[t].time}</li>`;t.innerHTML=`<h2>Best Scores</h2>\n      <ol class="score">${s}</ol>`,this.scoreList?(t.classList.add("score-list-on"),this.timerC.timerPause()):(t.classList.remove("score-list-on"),this.timerC.calcCurrentTime())}checkWin(t){for(let t=0;t<this.size;t+=1)for(let e=0;e<this.size;e+=1)if(t+e!==2*(this.size-1)&&this.win[t][e]!==this.arr[t][e])return!1;return this.playWinSound(),this.setWinMessage(t),this.setScore(),!0}setWinMessage(t){this.winBoard=document.querySelector(".board"),this.winBoard.classList.add("win"),this.winBoard.innerHTML+=`<div style="background-image: url(../assets/images/${this.imgNumb}.jpg);" class='win-text'>${t?"ЧИТЕР!":`Ура! Вы решили головоломку за ${document.querySelector(".time").innerHTML} и ${document.querySelector(".move").innerHTML} ходов</div>`}</div>`,setTimeout((()=>{this.winBoard.querySelector(".win-text").style.opacity=1}),50)}playWinSound(){this.soundOn&&(this.winSound.currentTime=0,this.winSound.play())}playSlideSound(){this.soundOn&&(this.slideSound.currentTime=0,this.slideSound.play())}dragStart(){setTimeout((()=>{this.classList.add("hide")}),0)}dragEnd(){this.classList.remove("hide")}dragEnter(){this.classList.add("hovered")}dragLeave(){this.classList.remove("hovered")}init(){this.scoreList=!1,this.randomImgNumber(150,1),this.history=[],this.movesCounter=0,document.querySelector(".move").innerHTML=this.movesCounter,this.size=document.getElementById("fieldSize").value,this.cellSize=parseFloat(this.boardWidth/this.size-2*this.marginSize).toFixed(3),this.removeBoard(),this.emptyX=this.size-1,this.emptyY=this.size-1,this.arr=this.createBoard(),this.win=this.createBoard(),this.shuffle(),this.renderBoard(),this.timerC.init(),document.querySelectorAll(".cell").forEach((t=>{t.addEventListener("mouseup",(t=>{const e=t.target;this.swap(parseInt(e.innerHTML,10))})),t.addEventListener("dragstart",this.dragStart),t.addEventListener("dragover",this.dragOver),t.addEventListener("drop",this.dragDrop),t.addEventListener("dragend",this.dragEnd),t.addEventListener("dragenter",this.dragEnter),t.addEventListener("dragleave",this.dragLeave)}))}load(){this.cellSize=parseFloat(this.boardWidth/this.size-2*this.marginSize).toFixed(3),document.querySelector(".move").innerHTML=this.movesCounter,this.removeBoard(),this.renderBoard(),this.win=this.createBoard(),this.timerC.init(),document.querySelectorAll(".cell").forEach((t=>{t.addEventListener("mouseup",(t=>{const e=t.target;this.swap(parseInt(e.innerHTML,10))})),t.addEventListener("dragstart",this.dragStart),t.addEventListener("dragover",this.dragOver),t.addEventListener("drop",this.dragDrop),t.addEventListener("dragend",this.dragEnd)}))}},s=document.createElement("header");s.classList.add("header"),s.innerHTML='<h1 class="heading">gem puzzle</h1>',document.body.appendChild(s);const i=document.createElement("div");i.classList.add("menu"),i.innerHTML=`  \n  <div class="settings">\n    <button class="new-game btn">New</button>\n    <button class="save btn">Save</button>\n    <button class="load btn">Load</button>\n    <button class="score btn">Score</button>\n    <button class="sound btn ${e.soundOn?"btn-on":""}">Sound</button>\n    <div class="size">\n      <select id="fieldSize">\n      <option selected="selected" value="4" disabled>Field size</option>\n        <option value="3">3</option>\n        <option value="4">4</option>\n        <option value="5">5</option>\n        <option value="6">6</option>\n        <option value="7">7</option>\n        <option value="8">8</option>\n      </select>\n    </div>\n    <button class="cheat btn">CHEAT</button>\n  </div>\n  <div class="counters">\n    <div class="timer"><span>Timer: </span><span class="time">0:00</span></div>\n    <div class="moves"><span>Moves: </span><span class="move">0</span></div>\n  </div>`,document.body.appendChild(i),e.init(),document.querySelector(".new-game").addEventListener("click",(()=>{e.init()})),document.querySelector(".save").addEventListener("click",(()=>{localStorage.setItem("gameSave",JSON.stringify({bgPosition:e.bgPosArr,history:e.history,size:e.size,boardTable:e.arr,time:e.timerC.currentTime,moves:e.movesCounter,zero:[e.emptyX,e.emptyY],imgNumb:e.imgNumb}))})),document.querySelector(".load").addEventListener("click",(()=>{const{bgPosition:t,history:s,size:i,boardTable:r,time:n,moves:h,zero:o,imgNumb:a}=JSON.parse(localStorage.getItem("gameSave"));e.bgPosArr=t,e.history=s,e.size=i,e.timerC.currentTime=n,e.movesCounter=h,e.arr=r,[e.emptyX,e.emptyY]=o,e.imgNumb=a,e.load(),e.timerC.load()})),document.getElementById("fieldSize").addEventListener("change",(()=>{e.init(),e.timerC.init()})),document.querySelector(".cheat").addEventListener("click",(()=>{e.timerC.timerPause(),e.back()})),document.querySelector(".sound").addEventListener("click",(t=>{e.toggleSound(),e.soundOn?t.target.classList.add("btn-on"):t.target.classList.remove("btn-on")})),document.querySelector(".score").addEventListener("click",(t=>{e.getScoreList(),e.scoreList?t.target.classList.add("btn-on"):t.target.classList.remove("btn-on")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZW0tcHV6emxlLy4vc3JjL1RpbWVyLmpzIiwid2VicGFjazovL2dlbS1wdXp6bGUvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZ2VtLXB1enpsZS8uL3NyYy9Cb2FyZC5qcyJdLCJuYW1lcyI6WyJUaW1lciIsInRoaXMiLCJjdXJyZW50VGltZSIsInRpbWUiLCJzZXRJbnRlcnZhbCIsInNlY1RvTWluQW5kU2VjIiwibWludXRlcyIsIk1hdGgiLCJmbG9vciIsInNlYyIsInRvRml4ZWQiLCJ0aW1lciIsInJlbmRlclRpbWVyIiwiY2xlYXJJbnRlcnZhbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsInRpbWVyU3RvcCIsImNhbGNDdXJyZW50VGltZSIsImJvYXJkIiwidGltZXJDIiwiaGlzdG9yeSIsInNpemUiLCJlbXB0eVgiLCJlbXB0eVkiLCJhbmltYXRpb25UaW1lIiwiYm9hcmRXaWR0aCIsIm1hcmdpblNpemUiLCJzb3VuZE9uIiwid2luU291bmQiLCJBdWRpbyIsInNsaWRlU291bmQiLCJ2b2x1bWUiLCJyZW1vdmVCb2FyZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWxlbSIsImJvZHkiLCJyZW1vdmVDaGlsZCIsImZpbmRFbGVtIiwieCIsImFyciIsImxlbmd0aCIsInkiLCJwYXJzZUludCIsIkVycm9yIiwiZHJhZ0Ryb3AiLCJlIiwiemVybyIsInRhcmdldCIsIm1vdmVhYmxlIiwiaXNOZWFyWmVybyIsInN0eWxlIiwib3JkZXIiLCJjb25zb2xlIiwibG9nIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwibWF4IiwibWluIiwiaW1nTnVtYiIsInJhbmRvbSIsInBvcCIsImJhY2tUaW1lciIsImFicyIsInNldFRpbWVvdXQiLCJtb3ZlQW5pbWF0aW9uIiwidGVtcCIsInJlbmRlckJvYXJkIiwicGxheVNsaWRlU291bmQiLCJjaGVja1dpbiIsImRpcmVjdGlvbiIsInB1c2giLCJjb3VudGVyIiwiYmdQb3NBcnIiLCJpIiwiaiIsInJvdW5kIiwibW92ZSIsImNlbGxOdW1iZXIiLCJjbGFzc05hbWUiLCJkcmFnZ2FibGUiLCJwcmV2ZW50RGVmIiwiYkdwb3MiLCJiZ0ZvckNlbGwiLCJjZWxsU2l6ZSIsImVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYWRkIiwid2lkdGgiLCJhcHBlbmRDaGlsZCIsInJlbVBlclRpY2siLCJ0aW1lUGFzc2VkIiwidHJhbnNmb3JtIiwiaW5BbmltYXRpb24iLCJzdGFydCIsIkRhdGUiLCJub3ciLCJkcmF3IiwibnVtYmVyIiwibW92ZXNDb3VudGVyIiwidGltZXJQYXVzZSIsInNjb3JlTGlzdCIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJtb3ZlcyIsInNvcnQiLCJhIiwiYiIsInNsaWNlIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInNjb3JlRWxlbSIsImxpc3QiLCJjaGVhdCIsIndpbiIsInBsYXlXaW5Tb3VuZCIsInNldFdpbk1lc3NhZ2UiLCJzZXRTY29yZSIsIndpbkJvYXJkIiwib3BhY2l0eSIsInBsYXkiLCJyYW5kb21JbWdOdW1iZXIiLCJnZXRFbGVtZW50QnlJZCIsInZhbHVlIiwicGFyc2VGbG9hdCIsImNyZWF0ZUJvYXJkIiwic2h1ZmZsZSIsImluaXQiLCJjZWxsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsInN3YXAiLCJkcmFnU3RhcnQiLCJkcmFnT3ZlciIsImRyYWdFbmQiLCJkcmFnRW50ZXIiLCJkcmFnTGVhdmUiLCJoZWFkZXIiLCJtZW51IiwiYmdQb3NpdGlvbiIsImJvYXJkVGFibGUiLCJsb2FkIiwiYmFjayIsInRvZ2dsZVNvdW5kIiwiZ2V0U2NvcmVMaXN0Il0sIm1hcHBpbmdzIjoibUJBQWUsTUFBTUEsRUFDbkIsY0FDRUMsS0FBS0MsWUFBYyxFQUdyQixrQkFDRUQsS0FBS0UsS0FBT0MsYUFBWSxLQUN0QkgsS0FBS0MsYUFBZSxFQUNwQkQsS0FBS0ksbUJBQ0osS0FHTCxpQkFDRUosS0FBS0ssUUFB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cEYsT0FBT08sVUFBVWdDLElBQUksVUFFekI2QyxFQUFJcEYsT0FBT08sVUFBVUMsT0FBTyxhQUloQzNDLFNBQVNDLGNBQWMsVUFBVXFILGlCQUFpQixTQUFVQyxJQUMxRGxILEVBQU1nSSxlQUNGaEksRUFBTW1GLFVBQ1IrQixFQUFJcEYsT0FBT08sVUFBVWdDLElBQUksVUFFekI2QyxFQUFJcEYsT0FBT08sVUFBVUMsT0FBTyxjIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBUaW1lciB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmN1cnJlbnRUaW1lID0gMDtcclxuICB9XHJcblxyXG4gIGNhbGNDdXJyZW50VGltZSgpIHtcclxuICAgIHRoaXMudGltZSA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgdGhpcy5jdXJyZW50VGltZSArPSAxO1xyXG4gICAgICB0aGlzLnNlY1RvTWluQW5kU2VjKCk7XHJcbiAgICB9LCAxMDAwKTtcclxuICB9XHJcblxyXG4gIHNlY1RvTWluQW5kU2VjKCkge1xyXG4gICAgdGhpcy5taW51dGVzID0gTWF0aC5mbG9vcih0aGlzLmN1cnJlbnRUaW1lIC8gNjApO1xyXG5cclxuICAgIHRoaXMuc2VjID0gKHRoaXMuY3VycmVudFRpbWUgJSA2MCkudG9GaXhlZCgwKTtcclxuICAgIHRoaXMudGltZXIgPSBgJHt0aGlzLm1pbnV0ZXN9OiR7dGhpcy5zZWMgPCAxMCA/ICcwJyA6ICcnfSR7dGhpcy5zZWN9YDtcclxuICAgIHRoaXMucmVuZGVyVGltZXIoKTtcclxuICB9XHJcblxyXG4gIHRpbWVyU3RvcCgpIHtcclxuICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lKTtcclxuICAgIHRoaXMudGltZXIgPSAnMDowMCc7XHJcbiAgICB0aGlzLnJlbmRlclRpbWVyKCk7XHJcbiAgfVxyXG5cclxuICB0aW1lclBhdXNlKCkge1xyXG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWUpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyVGltZXIoKSB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGltZScpLmlubmVySFRNTCA9IHRoaXMudGltZXI7XHJcbiAgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy50aW1lclN0b3AoKTtcclxuICAgIHRoaXMuY3VycmVudFRpbWUgPSBudWxsO1xyXG4gICAgdGhpcy5jYWxjQ3VycmVudFRpbWUoKTtcclxuICB9XHJcblxyXG4gIGxvYWQoKSB7XHJcbiAgICB0aGlzLnRpbWVyU3RvcCgpO1xyXG4gICAgdGhpcy5zZWNUb01pbkFuZFNlYygpO1xyXG4gICAgdGhpcy5yZW5kZXJUaW1lcigpO1xyXG5cclxuICAgIHRoaXMuY2FsY0N1cnJlbnRUaW1lKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBCb2FyZCBmcm9tICcuL0JvYXJkLmpzJztcclxuXHJcbmNvbnN0IGJvYXJkID0gbmV3IEJvYXJkKCk7XHJcblxyXG5jb25zdCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoZWFkZXInKTtcclxuaGVhZGVyLmNsYXNzTGlzdC5hZGQoJ2hlYWRlcicpO1xyXG5oZWFkZXIuaW5uZXJIVE1MID0gJzxoMSBjbGFzcz1cImhlYWRpbmdcIj5nZW0gcHV6emxlPC9oMT4nO1xyXG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGhlYWRlcik7XHJcblxyXG5jb25zdCBtZW51ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbm1lbnUuY2xhc3NMaXN0LmFkZCgnbWVudScpO1xyXG5cclxubWVudS5pbm5lckhUTUwgPSBgICBcclxuICA8ZGl2IGNsYXNzPVwic2V0dGluZ3NcIj5cclxuICAgIDxidXR0b24gY2xhc3M9XCJuZXctZ2FtZSBidG5cIj5OZXc8L2J1dHRvbj5cclxuICAgIDxidXR0b24gY2xhc3M9XCJzYXZlIGJ0blwiPlNhdmU8L2J1dHRvbj5cclxuICAgIDxidXR0b24gY2xhc3M9XCJsb2FkIGJ0blwiPkxvYWQ8L2J1dHRvbj5cclxuICAgIDxidXR0b24gY2xhc3M9XCJzY29yZSBidG5cIj5TY29yZTwvYnV0dG9uPlxyXG4gICAgPGJ1dHRvbiBjbGFzcz1cInNvdW5kIGJ0biAke2JvYXJkLnNvdW5kT24gPyAnYnRuLW9uJyA6ICcnfVwiPlNvdW5kPC9idXR0b24+XHJcbiAgICA8ZGl2IGNsYXNzPVwic2l6ZVwiPlxyXG4gICAgICA8c2VsZWN0IGlkPVwiZmllbGRTaXplXCI+XHJcbiAgICAgIDxvcHRpb24gc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiIHZhbHVlPVwiNFwiIGRpc2FibGVkPkZpZWxkIHNpemU8L29wdGlvbj5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiM1wiPjM8L29wdGlvbj5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiNFwiPjQ8L29wdGlvbj5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiNVwiPjU8L29wdGlvbj5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiNlwiPjY8L29wdGlvbj5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiN1wiPjc8L29wdGlvbj5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiOFwiPjg8L29wdGlvbj5cclxuICAgICAgPC9zZWxlY3Q+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxidXR0b24gY2xhc3M9XCJjaGVhdCBidG5cIj5DSEVBVDwvYnV0dG9uPlxyXG4gIDwvZGl2PlxyXG4gIDxkaXYgY2xhc3M9XCJjb3VudGVyc1wiPlxyXG4gICAgPGRpdiBjbGFzcz1cInRpbWVyXCI+PHNwYW4+VGltZXI6IDwvc3Bhbj48c3BhbiBjbGFzcz1cInRpbWVcIj4wOjAwPC9zcGFuPjwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cIm1vdmVzXCI+PHNwYW4+TW92ZXM6IDwvc3Bhbj48c3BhbiBjbGFzcz1cIm1vdmVcIj4wPC9zcGFuPjwvZGl2PlxyXG4gIDwvZGl2PmA7XHJcblxyXG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1lbnUpO1xyXG5cclxuYm9hcmQuaW5pdCgpO1xyXG5cclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy1nYW1lJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgYm9hcmQuaW5pdCgpO1xyXG59KTtcclxuXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zYXZlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXHJcbiAgICAnZ2FtZVNhdmUnLFxyXG4gICAgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICBiZ1Bvc2l0aW9uOiBib2FyZC5iZ1Bvc0FycixcclxuICAgICAgaGlzdG9yeTogYm9hcmQuaGlzdG9yeSxcclxuICAgICAgc2l6ZTogYm9hcmQuc2l6ZSxcclxuICAgICAgYm9hcmRUYWJsZTogYm9hcmQuYXJyLFxyXG4gICAgICB0aW1lOiBib2FyZC50aW1lckMuY3VycmVudFRpbWUsXHJcbiAgICAgIG1vdmVzOiBib2FyZC5tb3Zlc0NvdW50ZXIsXHJcbiAgICAgIHplcm86IFsgYm9hcmQuZW1wdHlYLCBib2FyZC5lbXB0eVkgXSxcclxuICAgICAgaW1nTnVtYjogYm9hcmQuaW1nTnVtYlxyXG4gICAgfSlcclxuICApO1xyXG59KTtcclxuXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2FkJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBiZ1Bvc2l0aW9uLCBoaXN0b3J5LCBzaXplLCBib2FyZFRhYmxlLCB0aW1lLCBtb3ZlcywgemVybywgaW1nTnVtYiB9ID0gSlNPTi5wYXJzZShcclxuICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYW1lU2F2ZScpXHJcbiAgKTtcclxuICBib2FyZC5iZ1Bvc0FyciA9IGJnUG9zaXRpb247XHJcbiAgYm9hcmQuaGlzdG9yeSA9IGhpc3Rvcnk7XHJcbiAgYm9hcmQuc2l6ZSA9IHNpemU7XHJcbiAgYm9hcmQudGltZXJDLmN1cnJlbnRUaW1lID0gdGltZTtcclxuICBib2FyZC5tb3Zlc0NvdW50ZXIgPSBtb3ZlcztcclxuICBib2FyZC5hcnIgPSBib2FyZFRhYmxlO1xyXG4gIFsgYm9hcmQuZW1wdHlYLCBib2FyZC5lbXB0eVkgXSA9IHplcm87XHJcbiAgYm9hcmQuaW1nTnVtYiA9IGltZ051bWI7XHJcbiAgYm9hcmQubG9hZCgpO1xyXG4gIGJvYXJkLnRpbWVyQy5sb2FkKCk7XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkU2l6ZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcclxuICBib2FyZC5pbml0KCk7XHJcbiAgYm9hcmQudGltZXJDLmluaXQoKTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hlYXQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBib2FyZC50aW1lckMudGltZXJQYXVzZSgpO1xyXG4gIGJvYXJkLmJhY2soKTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc291bmQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICBib2FyZC50b2dnbGVTb3VuZCgpO1xyXG4gIGlmIChib2FyZC5zb3VuZE9uKSB7XHJcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2J0bi1vbicpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi1vbicpO1xyXG4gIH1cclxufSk7XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2NvcmUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICBib2FyZC5nZXRTY29yZUxpc3QoKTtcclxuICBpZiAoYm9hcmQuc2NvcmVMaXN0KSB7XHJcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2J0bi1vbicpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi1vbicpO1xyXG4gIH1cclxufSk7XHJcbiIsImltcG9ydCBUaW1lciBmcm9tICcuL1RpbWVyLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJvYXJkIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMudGltZXJDID0gbmV3IFRpbWVyKCk7XHJcbiAgICB0aGlzLmhpc3RvcnkgPSBbXTtcclxuICAgIHRoaXMuc2l6ZSA9IDQ7XHJcbiAgICB0aGlzLmVtcHR5WCA9IDA7XHJcbiAgICB0aGlzLmVtcHR5WSA9IDA7XHJcbiAgICB0aGlzLmFuaW1hdGlvblRpbWUgPSAyMDA7XHJcbiAgICB0aGlzLmJvYXJkV2lkdGggPSA0MC44O1xyXG4gICAgdGhpcy5tYXJnaW5TaXplID0gMC4xO1xyXG4gICAgdGhpcy5zb3VuZE9uID0gdHJ1ZTtcclxuICAgIHRoaXMud2luU291bmQgPSBuZXcgQXVkaW8oJy4uL2Fzc2V0cy93aW4ubXAzJyk7XHJcbiAgICB0aGlzLnNsaWRlU291bmQgPSBuZXcgQXVkaW8oJy4uL2Fzc2V0cy9zbGlkZS5tcDMnKTtcclxuICAgIHRoaXMuc2xpZGVTb3VuZC52b2x1bWUgPSAwLjI7XHJcbiAgICB0aGlzLnJlbW92ZUJvYXJkID0gKCkgPT4ge1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYm9hcmQnKS5mb3JFYWNoKChlbGVtKSA9PiB7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbGVtKTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5maW5kRWxlbSA9IChlbGVtKSA9PiB7XHJcbiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy5hcnIubGVuZ3RoOyB4ICs9IDEpIHtcclxuICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuYXJyLmxlbmd0aDsgeSArPSAxKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5hcnJbeF1beV0gPT09IHBhcnNlSW50KGVsZW0uaW5uZXJIVE1MLCAxMCkpIHJldHVybiBbIHgsIHkgXTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGVsZW0pO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZHJhZ0Ryb3AgPSAoZSkgPT4ge1xyXG4gICAgICBjb25zdCB6ZXJvID0gZS50YXJnZXQ7XHJcbiAgICAgIGNvbnN0IG1vdmVhYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhpZGUnKTtcclxuICAgICAgY29uc3QgWyB4LCB5IF0gPSB0aGlzLmZpbmRFbGVtKG1vdmVhYmxlKTtcclxuICAgICAgaWYgKHRoaXMuaXNOZWFyWmVybyh4LCB5KSkge1xyXG4gICAgICAgIFsgdGhpcy5hcnJbeF1beV0sIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV0gXSA9IFtcclxuICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV0sXHJcbiAgICAgICAgICB0aGlzLmFyclt4XVt5XVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgWyB0aGlzLmVtcHR5WCwgdGhpcy5lbXB0eVkgXSA9IFsgeCwgeSBdO1xyXG4gICAgICAgIFsgemVyby5zdHlsZS5vcmRlciwgbW92ZWFibGUuc3R5bGUub3JkZXIgXSA9IFsgbW92ZWFibGUuc3R5bGUub3JkZXIsIHplcm8uc3R5bGUub3JkZXIgXTtcclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmFycik7XHJcbiAgICAgIH1cclxuICAgICAgemVyby5jbGFzc0xpc3QucmVtb3ZlKCdob3ZlcmVkJyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMuYXJyKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICByYW5kb21JbWdOdW1iZXIobWF4LCBtaW4pIHtcclxuICAgIHRoaXMuaW1nTnVtYiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluKTtcclxuICB9XHJcblxyXG4gIGJhY2soKSB7XHJcbiAgICB0aGlzLmhpc3RvcnkucG9wKCk7XHJcbiAgICB0aGlzLmJhY2tUaW1lcigpO1xyXG4gIH1cclxuXHJcbiAgaXNOZWFyWmVybyh4LCB5KSB7XHJcbiAgICByZXR1cm4gISEoXHJcbiAgICAgIChNYXRoLmFicyh0aGlzLmVtcHR5WCAtIHgpIDw9IDEgJiYgdGhpcy5lbXB0eVkgLSB5ID09PSAwKSB8fFxyXG4gICAgICAoTWF0aC5hYnModGhpcy5lbXB0eVkgLSB5KSA8PSAxICYmIHRoaXMuZW1wdHlYIC0geCA9PT0gMClcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBiYWNrVGltZXIoKSB7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgaWYgKHRoaXMuaGlzdG9yeS5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBbIHgsIHkgXSA9IHRoaXMuaGlzdG9yeS5wb3AoKTtcclxuICAgICAgICB0aGlzLmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjY2VsbC0ke3RoaXMuYXJyW3hdW3ldfWApO1xyXG5cclxuICAgICAgICB0aGlzLm1vdmVBbmltYXRpb24oWyB4LCB5IF0pO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIGNvbnN0IHRlbXAgPSB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldO1xyXG4gICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXSA9IHRoaXMuYXJyW3hdW3ldO1xyXG4gICAgICAgICAgdGhpcy5hcnJbeF1beV0gPSB0ZW1wO1xyXG4gICAgICAgICAgdGhpcy5lbXB0eVggPSB4O1xyXG4gICAgICAgICAgdGhpcy5lbXB0eVkgPSB5O1xyXG4gICAgICAgICAgdGhpcy5yZW1vdmVCb2FyZCgpO1xyXG4gICAgICAgICAgdGhpcy5yZW5kZXJCb2FyZCgpO1xyXG4gICAgICAgICAgdGhpcy5wbGF5U2xpZGVTb3VuZCgpO1xyXG4gICAgICAgICAgdGhpcy5iYWNrVGltZXIoKTtcclxuICAgICAgICB9LCB0aGlzLmFuaW1hdGlvblRpbWUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuY2hlY2tXaW4odHJ1ZSk7XHJcbiAgICAgIH1cclxuICAgIH0sIHRoaXMuYW5pbWF0aW9uVGltZSk7XHJcbiAgfVxyXG5cclxuICBtb3ZlKGRpcmVjdGlvbikge1xyXG4gICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcclxuICAgICAgY2FzZSAndXAnOlxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHRoaXMuZW1wdHlYICE9PSAwICYmXHJcbiAgICAgICAgICAodGhpcy5oaXN0b3J5Lmxlbmd0aCA8PSAxIHx8IHRoaXMuZW1wdHlYIC0gMSAhPT0gdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeS5sZW5ndGggLSAyXVswXSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV0gPSB0aGlzLmFyclt0aGlzLmVtcHR5WCAtIDFdW3RoaXMuZW1wdHlZXTtcclxuICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYIC0gMV1bdGhpcy5lbXB0eVldID0gMDtcclxuICAgICAgICAgIHRoaXMuZW1wdHlYIC09IDE7XHJcbiAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChbIHRoaXMuZW1wdHlYLCB0aGlzLmVtcHR5WSBdKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5jb3VudGVyIC09IDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnZG93bic6XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgdGhpcy5lbXB0eVggIT09IHRoaXMuc2l6ZSAtIDEgJiZcclxuICAgICAgICAgICh0aGlzLmhpc3RvcnkubGVuZ3RoIDw9IDEgfHwgdGhpcy5lbXB0eVggKyAxICE9PSB0aGlzLmhpc3RvcnlbdGhpcy5oaXN0b3J5Lmxlbmd0aCAtIDJdWzBdKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXSA9IHRoaXMuYXJyW3RoaXMuZW1wdHlYICsgMV1bdGhpcy5lbXB0eVldO1xyXG4gICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVggKyAxXVt0aGlzLmVtcHR5WV0gPSAwO1xyXG4gICAgICAgICAgdGhpcy5lbXB0eVggKz0gMTtcclxuICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKFsgdGhpcy5lbXB0eVgsIHRoaXMuZW1wdHlZIF0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmNvdW50ZXIgLT0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0aGlzLmVtcHR5WSAhPT0gdGhpcy5zaXplIC0gMSAmJlxyXG4gICAgICAgICAgKHRoaXMuaGlzdG9yeS5sZW5ndGggPD0gMSB8fCB0aGlzLmVtcHR5WSArIDEgIT09IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnkubGVuZ3RoIC0gMl1bMV0pXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldID0gdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZICsgMV07XHJcbiAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVkgKyAxXSA9IDA7XHJcbiAgICAgICAgICB0aGlzLmVtcHR5WSArPSAxO1xyXG4gICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2goWyB0aGlzLmVtcHR5WCwgdGhpcy5lbXB0eVkgXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuY291bnRlciAtPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgdGhpcy5lbXB0eVkgIT09IDAgJiZcclxuICAgICAgICAgICh0aGlzLmhpc3RvcnkubGVuZ3RoIDw9IDEgfHwgdGhpcy5lbXB0eVkgLSAxICE9PSB0aGlzLmhpc3RvcnlbdGhpcy5oaXN0b3J5Lmxlbmd0aCAtIDJdWzFdKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXSA9IHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WSAtIDFdO1xyXG4gICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZIC0gMV0gPSAwO1xyXG4gICAgICAgICAgdGhpcy5lbXB0eVkgLT0gMTtcclxuICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKFsgdGhpcy5lbXB0eVgsIHRoaXMuZW1wdHlZIF0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmNvdW50ZXIgLT0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCc+OignKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNyZWF0ZUJvYXJkKCkge1xyXG4gICAgY29uc3QgYXJyID0gW107XHJcblxyXG4gICAgdGhpcy5iZ1Bvc0FyciA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNpemU7IGkgKz0gMSkge1xyXG4gICAgICBhcnJbaV0gPSBbXTtcclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnNpemU7IGogKz0gMSkge1xyXG4gICAgICAgIGlmIChpICsgaiAhPT0gKHRoaXMuc2l6ZSAtIDEpICogMikge1xyXG4gICAgICAgICAgYXJyW2ldW2pdID0gaSAqIHRoaXMuc2l6ZSArIGogKyAxO1xyXG4gICAgICAgICAgdGhpcy5iZ1Bvc0Fyci5wdXNoKFxyXG4gICAgICAgICAgICBgJHtNYXRoLnJvdW5kKDEwMCAvICh0aGlzLnNpemUgLSAxKSAqIGopfSUgJHtNYXRoLnJvdW5kKDEwMCAvICh0aGlzLnNpemUgLSAxKSAqIGkpfSVgXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBhcnJbaV1bal0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFycjtcclxuICB9XHJcblxyXG4gIHNodWZmbGUoKSB7XHJcbiAgICB0aGlzLmhpc3RvcnkucHVzaChbIHRoaXMuZW1wdHlYLCB0aGlzLmVtcHR5WSBdKTtcclxuICAgIGZvciAodGhpcy5jb3VudGVyID0gMDsgdGhpcy5jb3VudGVyIDwgdGhpcy5zaXplICoqIDM7IHRoaXMuY291bnRlciArPSAxKSB7XHJcbiAgICAgIHN3aXRjaCAoTWF0aC5mbG9vcig0ICogTWF0aC5yYW5kb20oKSkpIHtcclxuICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAvLyAgTU9WRSBVUFxyXG5cclxuICAgICAgICAgIHRoaXMubW92ZSgndXAnKTtcclxuXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAvLyAgTU9WRSBSSUdIVFxyXG4gICAgICAgICAgdGhpcy5tb3ZlKCdyaWdodCcpO1xyXG5cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgIC8vICBNT1ZFIERPV05cclxuICAgICAgICAgIHRoaXMubW92ZSgnZG93bicpO1xyXG5cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgIC8vICBNT1ZFIExFRlRcclxuICAgICAgICAgIHRoaXMubW92ZSgnbGVmdCcpO1xyXG5cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJz46KCcpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXJCb2FyZCgpIHtcclxuICAgIGxldCBib2FyZCA9IGA8ZGl2IGNsYXNzPVwic2NvcmUtbGlzdFwiPnRlc3Q8L2Rpdj5gO1xyXG4gICAgY29uc3QgYm9hcmRXaWR0aCA9IGAke3RoaXMuYm9hcmRXaWR0aH1yZW1gO1xyXG4gICAgbGV0IGNlbGxOdW1iZXI7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDAsIG9yZGVyID0gMTsgaSA8IHRoaXMuc2l6ZTsgaSArPSAxKSB7XHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5zaXplOyBqICs9IDEpIHtcclxuICAgICAgICBjZWxsTnVtYmVyID0gdGhpcy5hcnJbaV1bal07XHJcblxyXG4gICAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IGNlbGxOdW1iZXIgPyAnY2VsbCcgOiAnY2VsbCBlbXB0eSc7XHJcblxyXG4gICAgICAgIGNvbnN0IGRyYWdnYWJsZSA9ICEhY2VsbE51bWJlcjtcclxuXHJcbiAgICAgICAgY29uc3QgcHJldmVudERlZiA9ICFjZWxsTnVtYmVyID8gXCJvbmRyYWdvdmVyID0gJ2V2ZW50LnByZXZlbnREZWZhdWx0KCknXCIgOiAnJztcclxuICAgICAgICBjb25zdCBiR3BvcyA9IHRoaXMuYmdQb3NBcnJbY2VsbE51bWJlciAtIDFdO1xyXG4gICAgICAgIGNvbnN0IGJnRm9yQ2VsbCA9IGNlbGxOdW1iZXJcclxuICAgICAgICAgID8gYGJhY2tncm91bmQ6IHVybCguLi9hc3NldHMvaW1hZ2VzLyR7dGhpc1xyXG4gICAgICAgICAgICAgIC5pbWdOdW1ifS5qcGcpOyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAke2JHcG9zfTsgYmFja2dyb3VuZC1zaXplOiAke2JvYXJkV2lkdGh9O2BcclxuICAgICAgICAgIDogJyc7XHJcbiAgICAgICAgb3JkZXIgKz0gMTtcclxuXHJcbiAgICAgICAgYm9hcmQgKz0gYDxkaXYgXHJcbiAgICAgICAgJHtwcmV2ZW50RGVmfVxyXG4gICAgICAgICAgc3R5bGU9J3dpZHRoOiR7dGhpcy5jZWxsU2l6ZX1yZW07XHJcbiAgICAgICAgICBoZWlnaHQ6JHt0aGlzLmNlbGxTaXplfXJlbTtcclxuICAgICAgICAgIG9yZGVyOiR7b3JkZXJ9O1xyXG4gICAgICAgICAgJHtiZ0ZvckNlbGx9J1xyXG4gICAgICAgICAgaWQ9J2NlbGwtJHtjZWxsTnVtYmVyfSdcclxuICAgICAgICAgIGNsYXNzPScke2NsYXNzTmFtZX0nXHJcbiAgICAgICAgICBkcmFnZ2FibGU9XCIke2RyYWdnYWJsZX1cIj4ke2NlbGxOdW1iZXJ9PC9kaXY+YDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYm9hcmQnKTtcclxuICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSBib2FyZFdpZHRoO1xyXG4gICAgZWxlbWVudC5pbm5lckhUTUwgPSBib2FyZDtcclxuXHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgZHJhdygpIHtcclxuICAgIGNvbnN0IHJlbVBlclRpY2sgPSB0aGlzLmNlbGxTaXplIC8gdGhpcy5hbmltYXRpb25UaW1lICogdGhpcy50aW1lUGFzc2VkO1xyXG4gICAgc3dpdGNoICh0aGlzLmRpcmVjdGlvbikge1xyXG4gICAgICBjYXNlICd1cCc6XHJcbiAgICAgICAgdGhpcy5lLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoIDAsICR7LXJlbVBlclRpY2t9cmVtKWA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2Rvd24nOlxyXG4gICAgICAgIHRoaXMuZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCAwLCAke3JlbVBlclRpY2t9cmVtKWA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgIHRoaXMuZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCAkey1yZW1QZXJUaWNrfXJlbSwgMClgO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgICAgdGhpcy5lLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoICR7cmVtUGVyVGlja31yZW0sIDApYDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJz46KCcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbW92ZUFuaW1hdGlvbihbIHgsIHkgXSkge1xyXG4gICAgaWYgKHRoaXMuZW1wdHlYIDwgeCkge1xyXG4gICAgICB0aGlzLmRpcmVjdGlvbiA9ICd1cCc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZW1wdHlYID4geCkge1xyXG4gICAgICB0aGlzLmRpcmVjdGlvbiA9ICdkb3duJztcclxuICAgIH0gZWxzZSBpZiAodGhpcy5lbXB0eVkgPCB5KSB7XHJcbiAgICAgIHRoaXMuZGlyZWN0aW9uID0gJ2xlZnQnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmVtcHR5WSA+IHkpIHtcclxuICAgICAgdGhpcy5kaXJlY3Rpb24gPSAncmlnaHQnO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaW5BbmltYXRpb24gPSB0cnVlO1xyXG4gICAgdGhpcy5zdGFydCA9IERhdGUubm93KCk7XHJcblxyXG4gICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgdGhpcy50aW1lUGFzc2VkID0gRGF0ZS5ub3coKSAtIHRoaXMuc3RhcnQ7XHJcblxyXG4gICAgICBpZiAodGhpcy50aW1lUGFzc2VkID49IHRoaXMuYW5pbWF0aW9uVGltZSkge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XHJcbiAgICAgICAgdGhpcy5pbkFuaW1hdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICB9LCAyMCk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVTb3VuZCgpIHtcclxuICAgIHRoaXMuc291bmRPbiA9ICF0aGlzLnNvdW5kT247XHJcbiAgfVxyXG5cclxuICBzd2FwKG51bWJlcikge1xyXG4gICAgaWYgKHRoaXMuaW5BbmltYXRpb24pIHJldHVybjtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYXJyLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5hcnJbaV0ubGVuZ3RoOyBqICs9IDEpIHtcclxuICAgICAgICBpZiAodGhpcy5hcnJbaV1bal0gPT09IG51bWJlcikge1xyXG4gICAgICAgICAgaWYgKHRoaXMuaXNOZWFyWmVybyhpLCBqKSkge1xyXG4gICAgICAgICAgICAvLyBNb3ZlIGNvdW50ZXJcclxuICAgICAgICAgICAgdGhpcy5tb3Zlc0NvdW50ZXIgKz0gMTtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vdmUnKS5pbm5lckhUTUwgPSB0aGlzLm1vdmVzQ291bnRlcjtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHplcm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjY2VsbC0ke3RoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV19YCk7XHJcbiAgICAgICAgICAgIHRoaXMuZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNjZWxsLSR7dGhpcy5hcnJbaV1bal19YCk7XHJcblxyXG4gICAgICAgICAgICAvLyAgZmluZCB3aGVyZSBhcmUgd2UgbW92aW5nXHJcbiAgICAgICAgICAgIHRoaXMubW92ZUFuaW1hdGlvbihbIGksIGogXSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBsYXlTbGlkZVNvdW5kKCk7XHJcblxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gemVyby5zdHlsZS5vcmRlcjtcclxuICAgICAgICAgICAgICB6ZXJvLnN0eWxlLm9yZGVyID0gdGhpcy5lLnN0eWxlLm9yZGVyO1xyXG4gICAgICAgICAgICAgIHRoaXMuZS5zdHlsZS5vcmRlciA9IHRlbXA7XHJcblxyXG4gICAgICAgICAgICAgIHRoaXMuZS5zdHlsZS50cmFuc2Zvcm0gPSAnJztcclxuXHJcbiAgICAgICAgICAgICAgaWYgKHRoaXMuZW1wdHlYID09PSB0aGlzLmVtcHR5WSAmJiB0aGlzLmVtcHR5WSA9PT0gdGhpcy5zaXplIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tXaW4oKSkge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnRpbWVyQy50aW1lclBhdXNlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCB0aGlzLmFuaW1hdGlvblRpbWUpO1xyXG4gICAgICAgICAgICBbIHRoaXMuYXJyW2ldW2pdLCB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldIF0gPSBbXHJcbiAgICAgICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXSxcclxuICAgICAgICAgICAgICB0aGlzLmFycltpXVtqXVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICB0aGlzLmVtcHR5WCA9IGk7XHJcbiAgICAgICAgICAgIHRoaXMuZW1wdHlZID0gajtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKFsgdGhpcy5lbXB0eVgsIHRoaXMuZW1wdHlZIF0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRTY29yZSgpIHtcclxuICAgIGxldCBzY29yZUxpc3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzY29yZS1saXN0JykpIHx8IFtdO1xyXG4gICAgc2NvcmVMaXN0LnB1c2goeyBtb3ZlczogdGhpcy5tb3Zlc0NvdW50ZXIsIHNpemU6IHRoaXMuc2l6ZSwgdGltZTogdGhpcy50aW1lckMudGltZXIgfSk7XHJcbiAgICBpZiAoc2NvcmVMaXN0Lmxlbmd0aCA+IDEwKSB7XHJcbiAgICAgIHNjb3JlTGlzdC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGEubW92ZXMgLSBiLm1vdmVzO1xyXG4gICAgICB9KTtcclxuICAgICAgc2NvcmVMaXN0ID0gc2NvcmVMaXN0LnNsaWNlKDAsIDEwKTtcclxuICAgIH1cclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzY29yZS1saXN0JywgSlNPTi5zdHJpbmdpZnkoc2NvcmVMaXN0KSk7XHJcbiAgfVxyXG5cclxuICBnZXRTY29yZUxpc3QoKSB7XHJcbiAgICB0aGlzLnNjb3JlTGlzdCA9ICF0aGlzLnNjb3JlTGlzdDtcclxuXHJcbiAgICBjb25zdCBzY29yZUVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2NvcmUtbGlzdCcpO1xyXG4gICAgY29uc3Qgc2NvcmVMaXN0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2NvcmUtbGlzdCcpKSB8fCBbXTtcclxuICAgIGxldCBsaXN0ID0gJyc7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IHNjb3JlTGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGkgLT0gMSkge1xyXG4gICAgICBsaXN0ICs9IGA8bGk+U2l6ZTogJHtzY29yZUxpc3RbaV0uc2l6ZX0sJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7TW92ZXM6ICR7c2NvcmVMaXN0W2ldXHJcbiAgICAgICAgLm1vdmVzfSwmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDtUaW1lOiAke3Njb3JlTGlzdFtpXS50aW1lfTwvbGk+YDtcclxuICAgIH1cclxuICAgIHNjb3JlRWxlbS5pbm5lckhUTUwgPSBgPGgyPkJlc3QgU2NvcmVzPC9oMj5cclxuICAgICAgPG9sIGNsYXNzPVwic2NvcmVcIj4ke2xpc3R9PC9vbD5gO1xyXG4gICAgaWYgKHRoaXMuc2NvcmVMaXN0KSB7XHJcbiAgICAgIHNjb3JlRWxlbS5jbGFzc0xpc3QuYWRkKCdzY29yZS1saXN0LW9uJyk7XHJcbiAgICAgIHRoaXMudGltZXJDLnRpbWVyUGF1c2UoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNjb3JlRWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdzY29yZS1saXN0LW9uJyk7XHJcbiAgICAgIHRoaXMudGltZXJDLmNhbGNDdXJyZW50VGltZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2hlY2tXaW4oY2hlYXQpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zaXplOyBpICs9IDEpIHtcclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnNpemU7IGogKz0gMSkge1xyXG4gICAgICAgIGlmIChpICsgaiAhPT0gKHRoaXMuc2l6ZSAtIDEpICogMikge1xyXG4gICAgICAgICAgaWYgKHRoaXMud2luW2ldW2pdICE9PSB0aGlzLmFycltpXVtqXSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5wbGF5V2luU291bmQoKTtcclxuICAgIHRoaXMuc2V0V2luTWVzc2FnZShjaGVhdCk7XHJcbiAgICB0aGlzLnNldFNjb3JlKCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHNldFdpbk1lc3NhZ2UoY2hlYXQpIHtcclxuICAgIHRoaXMud2luQm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYm9hcmQnKTtcclxuICAgIHRoaXMud2luQm9hcmQuY2xhc3NMaXN0LmFkZCgnd2luJyk7XHJcblxyXG4gICAgdGhpcy53aW5Cb2FyZC5pbm5lckhUTUwgKz0gYDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoLi4vYXNzZXRzL2ltYWdlcy8ke3RoaXNcclxuICAgICAgLmltZ051bWJ9LmpwZyk7XCIgY2xhc3M9J3dpbi10ZXh0Jz4ke2NoZWF0XHJcbiAgICAgID8gJ9Cn0JjQotCV0KAhJ1xyXG4gICAgICA6IGDQo9GA0LAhINCS0Ysg0YDQtdGI0LjQu9C4INCz0L7Qu9C+0LLQvtC70L7QvNC60YMg0LfQsCAke2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aW1lJylcclxuICAgICAgICAgIC5pbm5lckhUTUx9INC4ICR7ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vdmUnKS5pbm5lckhUTUx9INGF0L7QtNC+0LI8L2Rpdj5gfTwvZGl2PmA7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy53aW5Cb2FyZC5xdWVyeVNlbGVjdG9yKCcud2luLXRleHQnKS5zdHlsZS5vcGFjaXR5ID0gMTtcclxuICAgIH0sIDUwKTtcclxuICB9XHJcblxyXG4gIHBsYXlXaW5Tb3VuZCgpIHtcclxuICAgIGlmICghdGhpcy5zb3VuZE9uKSByZXR1cm47XHJcbiAgICB0aGlzLndpblNvdW5kLmN1cnJlbnRUaW1lID0gMDtcclxuICAgIHRoaXMud2luU291bmQucGxheSgpO1xyXG4gIH1cclxuXHJcbiAgcGxheVNsaWRlU291bmQoKSB7XHJcbiAgICBpZiAoIXRoaXMuc291bmRPbikgcmV0dXJuO1xyXG4gICAgdGhpcy5zbGlkZVNvdW5kLmN1cnJlbnRUaW1lID0gMDtcclxuICAgIHRoaXMuc2xpZGVTb3VuZC5wbGF5KCk7XHJcbiAgfVxyXG5cclxuICBkcmFnU3RhcnQoKSB7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XHJcbiAgICB9LCAwKTtcclxuICB9XHJcblxyXG4gIGRyYWdFbmQoKSB7XHJcbiAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcclxuICB9XHJcblxyXG4gIGRyYWdFbnRlcigpIHtcclxuICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnaG92ZXJlZCcpO1xyXG4gIH1cclxuXHJcbiAgZHJhZ0xlYXZlKCkge1xyXG4gICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdob3ZlcmVkJyk7XHJcbiAgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5zY29yZUxpc3QgPSBmYWxzZTtcclxuICAgIHRoaXMucmFuZG9tSW1nTnVtYmVyKDE1MCwgMSk7XHJcbiAgICB0aGlzLmhpc3RvcnkgPSBbXTtcclxuICAgIHRoaXMubW92ZXNDb3VudGVyID0gMDtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb3ZlJykuaW5uZXJIVE1MID0gdGhpcy5tb3Zlc0NvdW50ZXI7XHJcbiAgICB0aGlzLnNpemUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRTaXplJykudmFsdWU7XHJcblxyXG4gICAgdGhpcy5jZWxsU2l6ZSA9IHBhcnNlRmxvYXQodGhpcy5ib2FyZFdpZHRoIC8gdGhpcy5zaXplIC0gMiAqIHRoaXMubWFyZ2luU2l6ZSkudG9GaXhlZCgzKTtcclxuXHJcbiAgICB0aGlzLnJlbW92ZUJvYXJkKCk7XHJcblxyXG4gICAgdGhpcy5lbXB0eVggPSB0aGlzLnNpemUgLSAxO1xyXG4gICAgdGhpcy5lbXB0eVkgPSB0aGlzLnNpemUgLSAxO1xyXG5cclxuICAgIHRoaXMuYXJyID0gdGhpcy5jcmVhdGVCb2FyZCgpO1xyXG4gICAgdGhpcy53aW4gPSB0aGlzLmNyZWF0ZUJvYXJkKCk7XHJcblxyXG4gICAgdGhpcy5zaHVmZmxlKCk7XHJcblxyXG4gICAgdGhpcy5yZW5kZXJCb2FyZCgpO1xyXG4gICAgdGhpcy50aW1lckMuaW5pdCgpO1xyXG5cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJykuZm9yRWFjaCgoY2VsbCkgPT4ge1xyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZWxlbSA9IGV2dC50YXJnZXQ7XHJcbiAgICAgICAgdGhpcy5zd2FwKHBhcnNlSW50KGVsZW0uaW5uZXJIVE1MLCAxMCkpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgdGhpcy5kcmFnU3RhcnQpO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoaXMuZHJhZ092ZXIpO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgdGhpcy5kcmFnRHJvcCk7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCB0aGlzLmRyYWdFbmQpO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCB0aGlzLmRyYWdFbnRlcik7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIHRoaXMuZHJhZ0xlYXZlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgbG9hZCgpIHtcclxuICAgIHRoaXMuY2VsbFNpemUgPSBwYXJzZUZsb2F0KHRoaXMuYm9hcmRXaWR0aCAvIHRoaXMuc2l6ZSAtIDIgKiB0aGlzLm1hcmdpblNpemUpLnRvRml4ZWQoMyk7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW92ZScpLmlubmVySFRNTCA9IHRoaXMubW92ZXNDb3VudGVyO1xyXG4gICAgdGhpcy5yZW1vdmVCb2FyZCgpO1xyXG4gICAgdGhpcy5yZW5kZXJCb2FyZCgpO1xyXG4gICAgdGhpcy53aW4gPSB0aGlzLmNyZWF0ZUJvYXJkKCk7XHJcbiAgICB0aGlzLnRpbWVyQy5pbml0KCk7XHJcblxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKS5mb3JFYWNoKChjZWxsKSA9PiB7XHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIChldnQpID0+IHtcclxuICAgICAgICBjb25zdCBlbGVtID0gZXZ0LnRhcmdldDtcclxuICAgICAgICB0aGlzLnN3YXAocGFyc2VJbnQoZWxlbS5pbm5lckhUTUwsIDEwKSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCB0aGlzLmRyYWdTdGFydCk7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgdGhpcy5kcmFnT3Zlcik7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCB0aGlzLmRyYWdEcm9wKTtcclxuXHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIHRoaXMuZHJhZ0VuZCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==