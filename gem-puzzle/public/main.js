(()=>{"use strict";class t{constructor(){this.currentTime=0}calcCurrentTime(){this.time=setInterval((()=>{this.currentTime+=1,this.secToMinAndSec()}),1e3)}secToMinAndSec(){this.minutes=Math.floor(this.currentTime/60),this.sec=(this.currentTime%60).toFixed(0),this.timer=`${this.minutes}:${this.sec<10?"0":""}${this.sec}`,this.renderTimer()}timerStop(){clearInterval(this.time),this.timer="0:00",this.renderTimer()}timerPause(){clearInterval(this.time)}renderTimer(){document.querySelector(".time").innerHTML=this.timer}init(){this.timerStop(),this.currentTime=null,this.calcCurrentTime()}load(){this.timerStop(),this.secToMinAndSec(),this.renderTimer(),this.calcCurrentTime()}}const e=new class{constructor(){this.timerC=new t,this.history=[],this.size=4,this.emptyX=0,this.emptyY=0,this.animationTime=200,this.boardWidth=40.8,this.marginSize=.1,this.soundOn=!0,this.winSound=new Audio("../assets/win.mp3"),this.slideSound=new Audio("../assets/slide.mp3"),this.slideSound.volume=.2,this.dragNDropSound=new Audio("../assets/whoosh-grainy_gkoaqyn_.mp3"),this.dragNDropSound.volume=.3,this.removeBoard=()=>{document.querySelectorAll(".board").forEach((t=>{document.body.removeChild(t)}))},this.findElem=t=>{for(let e=0;e<this.arr.length;e+=1)for(let s=0;s<this.arr.length;s+=1)if(this.arr[e][s]===parseInt(t.innerHTML,10))return[e,s];throw new Error(t)},this.dragDrop=t=>{const e=t.target,s=document.querySelector(".hide"),[i,r]=this.findElem(s);this.isNearZero(i,r)&&([this.arr[i][r],this.arr[this.emptyX][this.emptyY]]=[this.arr[this.emptyX][this.emptyY],this.arr[i][r]],[this.emptyX,this.emptyY]=[i,r],[e.style.order,s.style.order]=[s.style.order,e.style.order],this.checkForIdling(),this.history.push([this.emptyX,this.emptyY]),this.playDragSound(),this.addMove()),e.classList.remove("hovered")}}randomImgNumber(t,e){this.imgNumb=Math.floor(Math.random()*(t-e)+e)}back(){this.history.pop(),this.backTimer()}isNearZero(t,e){return!!(Math.abs(this.emptyX-t)<=1&&this.emptyY-e==0||Math.abs(this.emptyY-e)<=1&&this.emptyX-t==0)}checkForIdling(){const[t,e]=this.history[this.history.length-2];this.emptyX===t&&this.emptyY===e&&this.history.splice(-2,2)}backTimer(){setTimeout((()=>{if(this.history.length){const[t,e]=this.history.pop();this.e=document.querySelector("#cell-"+this.arr[t][e]),this.moveAnimation([t,e]),setTimeout((()=>{const s=this.arr[this.emptyX][this.emptyY];this.arr[this.emptyX][this.emptyY]=this.arr[t][e],this.arr[t][e]=s,this.emptyX=t,this.emptyY=e,this.removeBoard(),this.renderBoard(),this.playSlideSound(),this.backTimer()}),this.animationTime)}else this.checkWin(!0)}),this.animationTime)}move(t){switch(t){case"up":0!==this.emptyX&&(this.history.length<=1||this.emptyX-1!==this.history[this.history.length-2][0])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX-1][this.emptyY],this.arr[this.emptyX-1][this.emptyY]=0,this.emptyX-=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;case"down":this.emptyX!==this.size-1&&(this.history.length<=1||this.emptyX+1!==this.history[this.history.length-2][0])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX+1][this.emptyY],this.arr[this.emptyX+1][this.emptyY]=0,this.emptyX+=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;case"right":this.emptyY!==this.size-1&&(this.history.length<=1||this.emptyY+1!==this.history[this.history.length-2][1])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX][this.emptyY+1],this.arr[this.emptyX][this.emptyY+1]=0,this.emptyY+=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;case"left":0!==this.emptyY&&(this.history.length<=1||this.emptyY-1!==this.history[this.history.length-2][1])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX][this.emptyY-1],this.arr[this.emptyX][this.emptyY-1]=0,this.emptyY-=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;default:throw new Error(">:(")}}createBoard(){const t=[];this.bgPosArr=[];for(let e=0;e<this.size;e+=1){t[e]=[];for(let s=0;s<this.size;s+=1)e+s!==2*(this.size-1)?(t[e][s]=e*this.size+s+1,this.bgPosArr.push(`${Math.round(100/(this.size-1)*s)}% ${Math.round(100/(this.size-1)*e)}%`)):t[e][s]=0}return t}shuffle(){for(this.history.push([this.emptyX,this.emptyY]),this.counter=0;this.counter<this.size**3;this.counter+=1)switch(Math.floor(4*Math.random())){case 0:this.move("up");break;case 1:this.move("right");break;case 2:this.move("down");break;case 3:this.move("left");break;default:throw new Error(">:(")}}renderBoard(){let t='<div class="score-list">test</div>';const e=this.boardWidth+"rem";let s;for(let i=0,r=1;i<this.size;i+=1)for(let h=0;h<this.size;h+=1){s=this.arr[i][h];const n=s?"cell":"cell empty",o=!!s,a=s?"":"ondragover = 'event.preventDefault()'",d=this.bgPosArr[s-1],m=s?`background: url(../assets/images/${this.imgNumb}.jpg); background-position: ${d}; background-size: ${e};`:"";r+=1,t+=`<div \n        ${a}\n          style='width:${this.cellSize}rem;\n          height:${this.cellSize}rem;\n          order:${r};\n          ${m}'\n          id='cell-${s}'\n          class='${n}'\n          draggable="${o}">${s}</div>`}const i=document.createElement("div");i.classList.add("board"),i.style.width=e,i.innerHTML=t,document.body.appendChild(i)}addMove(){this.movesCounter+=1,document.querySelector(".move").innerHTML=this.movesCounter}draw(){const t=this.cellSize/this.animationTime*this.timePassed;switch(this.direction){case"up":this.e.style.transform=`translate( 0, ${-t}rem)`;break;case"down":this.e.style.transform=`translate( 0, ${t}rem)`;break;case"left":this.e.style.transform=`translate( ${-t}rem, 0)`;break;case"right":this.e.style.transform=`translate( ${t}rem, 0)`;break;default:throw new Error(">:(")}}moveAnimation([t,e]){this.emptyX<t?this.direction="up":this.emptyX>t?this.direction="down":this.emptyY<e?this.direction="left":this.emptyY>e&&(this.direction="right"),this.inAnimation=!0,this.start=Date.now(),this.timer=setInterval((()=>{if(this.timePassed=Date.now()-this.start,this.timePassed>=this.animationTime)return clearInterval(this.timer),void(this.inAnimation=!1);this.draw()}),20)}toggleSound(){this.soundOn=!this.soundOn}swap(t){if(!this.inAnimation)for(let e=0;e<this.arr.length;e+=1)for(let s=0;s<this.arr[e].length;s+=1)if(this.arr[e][s]===t&&this.isNearZero(e,s)){this.addMove();const t=document.querySelector("#cell-"+this.arr[this.emptyX][this.emptyY]);return this.e=document.querySelector("#cell-"+this.arr[e][s]),this.moveAnimation([e,s]),this.playSlideSound(),setTimeout((()=>{const e=t.style.order;t.style.order=this.e.style.order,this.e.style.order=e,this.e.style.transform="",this.emptyX===this.emptyY&&this.emptyY===this.size-1&&this.checkWin()&&this.timerC.timerPause()}),this.animationTime),[this.arr[e][s],this.arr[this.emptyX][this.emptyY]]=[this.arr[this.emptyX][this.emptyY],this.arr[e][s]],this.emptyX=e,this.emptyY=s,this.checkForIdling(),void this.history.push([this.emptyX,this.emptyY])}}setScore(){let t=JSON.parse(localStorage.getItem("score-list"))||[];t.push({moves:this.movesCounter,size:this.size,time:this.timerC.timer}),t.length>10&&(t.sort(((t,e)=>t.moves-e.moves)),t=t.slice(0,10)),localStorage.setItem("score-list",JSON.stringify(t))}getScoreList(){this.scoreList=!this.scoreList;const t=document.querySelector(".score-list"),e=JSON.parse(localStorage.getItem("score-list"))||[];let s="";for(let t=e.length-1;t>=0;t-=1)s+=`<li>Size: ${e[t].size},&nbsp;&nbsp;&nbsp;&nbsp;Moves: ${e[t].moves},&nbsp;&nbsp;&nbsp;&nbsp;Time: ${e[t].time}</li>`;t.innerHTML=`<h2>Best Scores</h2>\n      <ol class="score">${s}</ol>`,this.scoreList?(t.classList.add("score-list-on"),this.timerC.timerPause()):(t.classList.remove("score-list-on"),this.timerC.calcCurrentTime())}checkWin(t){for(let t=0;t<this.size;t+=1)for(let e=0;e<this.size;e+=1)if(t+e!==2*(this.size-1)&&this.win[t][e]!==this.arr[t][e])return!1;return this.playWinSound(),this.setWinMessage(t),this.setScore(),!0}setWinMessage(t){this.winBoard=document.querySelector(".board"),this.winBoard.classList.add("win"),this.winBoard.innerHTML+=`<div style="background-image: url(../assets/images/${this.imgNumb}.jpg);" class='win-text'>${t?"ЧИТЕР!":`Ура! Вы решили головоломку за ${document.querySelector(".time").innerHTML} и ${document.querySelector(".move").innerHTML} ходов</div>`}</div>`,setTimeout((()=>{this.winBoard.querySelector(".win-text").style.opacity=1}),50)}playWinSound(){this.soundOn&&(this.winSound.currentTime=0,this.winSound.play())}playSlideSound(){this.soundOn&&(this.slideSound.currentTime=0,this.slideSound.play())}playDragSound(){this.soundOn&&(this.dragNDropSound.currentTime=.15,this.dragNDropSound.play())}dragStart(){setTimeout((()=>{this.classList.add("hide")}),0)}dragEnd(){this.classList.remove("hide")}dragEnter(){this.classList.add("hovered")}dragLeave(){this.classList.remove("hovered")}init(){this.scoreList=!1,this.randomImgNumber(150,1),this.history=[],this.movesCounter=0,document.querySelector(".move").innerHTML=this.movesCounter,this.size=document.getElementById("fieldSize").value,this.cellSize=parseFloat(this.boardWidth/this.size-2*this.marginSize).toFixed(3),this.removeBoard(),this.emptyX=this.size-1,this.emptyY=this.size-1,this.arr=this.createBoard(),this.win=this.createBoard(),this.shuffle(),this.renderBoard(),this.timerC.init(),document.querySelectorAll(".cell").forEach((t=>{t.addEventListener("mouseup",(t=>{const e=t.target;this.swap(parseInt(e.innerHTML,10))})),t.addEventListener("dragstart",this.dragStart),t.addEventListener("dragover",this.dragOver),t.addEventListener("drop",this.dragDrop),t.addEventListener("dragend",this.dragEnd),t.addEventListener("dragenter",this.dragEnter),t.addEventListener("dragleave",this.dragLeave)}))}load(){this.cellSize=parseFloat(this.boardWidth/this.size-2*this.marginSize).toFixed(3),document.querySelector(".move").innerHTML=this.movesCounter,this.removeBoard(),this.renderBoard(),this.win=this.createBoard(),this.timerC.init(),document.querySelectorAll(".cell").forEach((t=>{t.addEventListener("mouseup",(t=>{const e=t.target;this.swap(parseInt(e.innerHTML,10))})),t.addEventListener("dragstart",this.dragStart),t.addEventListener("dragover",this.dragOver),t.addEventListener("drop",this.dragDrop),t.addEventListener("dragend",this.dragEnd),t.addEventListener("dragenter",this.dragEnter),t.addEventListener("dragleave",this.dragLeave)}))}},s=document.createElement("header");s.classList.add("header"),s.innerHTML='<h1 class="heading">gem puzzle</h1>',document.body.appendChild(s);const i=document.createElement("div");i.classList.add("menu"),i.innerHTML=`  \n  <div class="settings">\n    <button class="new-game btn">New</button>\n    <button class="save btn">Save</button>\n    <button class="load btn">Load</button>\n    <button class="score btn">Score</button>\n    <button class="sound btn ${e.soundOn?"btn-on":""}">Sound</button>\n    <div class="size">\n      <select id="fieldSize">\n      <option selected="selected" value="4" disabled>Field size</option>\n        <option value="3">3</option>\n        <option value="4">4</option>\n        <option value="5">5</option>\n        <option value="6">6</option>\n        <option value="7">7</option>\n        <option value="8">8</option>\n      </select>\n    </div>\n    <button class="cheat btn">CHEAT</button>\n  </div>\n  <div class="counters">\n    <div class="timer"><span>Timer: </span><span class="time">0:00</span></div>\n    <div class="moves"><span>Moves: </span><span class="move">0</span></div>\n  </div>`,document.body.appendChild(i),e.init(),document.querySelector(".new-game").addEventListener("click",(()=>{e.init()})),document.querySelector(".save").addEventListener("click",(()=>{localStorage.setItem("gameSave",JSON.stringify({bgPosition:e.bgPosArr,history:e.history,size:e.size,boardTable:e.arr,time:e.timerC.currentTime,moves:e.movesCounter,zero:[e.emptyX,e.emptyY],imgNumb:e.imgNumb}))})),document.querySelector(".load").addEventListener("click",(()=>{const{bgPosition:t,history:s,size:i,boardTable:r,time:h,moves:n,zero:o,imgNumb:a}=JSON.parse(localStorage.getItem("gameSave"));e.bgPosArr=t,e.history=s,e.size=i,e.timerC.currentTime=h,e.movesCounter=n,e.arr=r,[e.emptyX,e.emptyY]=o,e.imgNumb=a,e.load(),e.timerC.load()})),document.getElementById("fieldSize").addEventListener("change",(()=>{e.init(),e.timerC.init()})),document.querySelector(".cheat").addEventListener("click",(()=>{e.timerC.timerPause(),e.back()})),document.querySelector(".sound").addEventListener("click",(t=>{e.toggleSound(),e.soundOn?t.target.classList.add("btn-on"):t.target.classList.remove("btn-on")})),document.querySelector(".score").addEventListener("click",(t=>{e.getScoreList(),e.scoreList?t.target.classList.add("btn-on"):t.target.classList.remove("btn-on")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZW0tcHV6emxlLy4vc3JjL1RpbWVyLmpzIiwid2VicGFjazovL2dlbS1wdXp6bGUvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZ2VtLXB1enpsZS8uL3NyYy9Cb2FyZC5qcyJdLCJuYW1lcyI6WyJUaW1lciIsInRoaXMiLCJjdXJyZW50VGltZSIsInRpbWUiLCJzZXRJbnRlcnZhbCIsInNlY1RvTWluQW5kU2VjIiwibWludXRlcyIsIk1hdGgiLCJmbG9vciIsInNlYyIsInRvRml4ZWQiLCJ0aW1lciIsInJlbmRlclRpbWVyIiwiY2xlYXJJbnRlcnZhbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsInRpbWVyU3RvcCIsImNhbGNDdXJyZW50VGltZSIsImJvYXJkIiwidGltZXJDIiwiaGlzdG9yeSIsInNpemUiLCJlbXB0eVgiLCJlbXB0eVkiLCJhbmltYXRpb25UaW1lIiwiYm9hcmRXaWR0aCIsIm1hcmdpblNpemUiLCJzb3VuZE9uIiwid2luU291bmQiLCJBdWRpbyIsInNsaWRlU291bmQiLCJ2b2x1bWUiLCJkcmFnTkRyb3BTb3VuZCIsInJlbW92ZUJvYXJkIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlbGVtIiwiYm9keSIsInJlbW92ZUNoaWxkIiwiZmluZEVsZW0iLCJ4IiwiYXJyIiwibGVuZ3RoIiwieSIsInBhcnNlSW50IiwiRXJyb3IiLCJkcmFnRHJvcCIsImUiLCJ6ZXJvIiwidGFyZ2V0IiwibW92ZWFibGUiLCJpc05lYXJaZXJvIiwic3R5bGUiLCJvcmRlciIsImNoZWNrRm9ySWRsaW5nIiwicHVzaCIsInBsYXlEcmFnU291bmQiLCJhZGRNb3ZlIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwibWF4IiwibWluIiwiaW1nTnVtYiIsInJhbmRvbSIsInBvcCIsImJhY2tUaW1lciIsImFicyIsImJsWCIsImJsWSIsInNwbGljZSIsInNldFRpbWVvdXQiLCJtb3ZlQW5pbWF0aW9uIiwidGVtcCIsInJlbmRlckJvYXJkIiwicGxheVNsaWRlU291bmQiLCJjaGVja1dpbiIsImRpcmVjdGlvbiIsImNvdW50ZXIiLCJiZ1Bvc0FyciIsImkiLCJqIiwicm91bmQiLCJtb3ZlIiwiY2VsbE51bWJlciIsImNsYXNzTmFtZSIsImRyYWdnYWJsZSIsInByZXZlbnREZWYiLCJiR3BvcyIsImJnRm9yQ2VsbCIsImNlbGxTaXplIiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhZGQiLCJ3aWR0aCIsImFwcGVuZENoaWxkIiwibW92ZXNDb3VudGVyIiwicmVtUGVyVGljayIsInRpbWVQYXNzZWQiLCJ0cmFuc2Zvcm0iLCJpbkFuaW1hdGlvbiIsInN0YXJ0IiwiRGF0ZSIsIm5vdyIsImRyYXciLCJudW1iZXIiLCJ0aW1lclBhdXNlIiwic2NvcmVMaXN0IiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIm1vdmVzIiwic29ydCIsImEiLCJiIiwic2xpY2UiLCJzZXRJdGVtIiwic3RyaW5naWZ5Iiwic2NvcmVFbGVtIiwibGlzdCIsImNoZWF0Iiwid2luIiwicGxheVdpblNvdW5kIiwic2V0V2luTWVzc2FnZSIsInNldFNjb3JlIiwid2luQm9hcmQiLCJvcGFjaXR5IiwicGxheSIsInJhbmRvbUltZ051bWJlciIsImdldEVsZW1lbnRCeUlkIiwidmFsdWUiLCJwYXJzZUZsb2F0IiwiY3JlYXRlQm9hcmQiLCJzaHVmZmxlIiwiaW5pdCIsImNlbGwiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0Iiwic3dhcCIsImRyYWdTdGFydCIsImRyYWdPdmVyIiwiZHJhZ0VuZCIsImRyYWdFbnRlciIsImRyYWdMZWF2ZSIsImhlYWRlciIsIm1lbnUiLCJiZ1Bvc2l0aW9uIiwiYm9hcmRUYWJsZSIsImxvYWQiLCJiYWNrIiwidG9nZ2xlU291bmQiLCJnZXRTY29yZUxpc3QiXSwibWFwcGluZ3MiOiJtQkFBZSxNQUFNQSxFQUNuQixjQUNFQyxLQUFLQyxZQUFjLEVBR3JCLGtCQUNFRCxLQUFLRSxLQUFP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QUFJLFFBQUVjLEdBQVk2QyxLQUFLQyxNQUNqRkMsYUFBYUMsUUFBUSxhQUV2QjVGLEVBQU00RCxTQUFXb0UsRUFDakJoSSxFQUFNRSxRQUFVQSxFQUNoQkYsRUFBTUcsS0FBT0EsRUFDYkgsRUFBTUMsT0FBT2xCLFlBQWNDLEVBQzNCZ0IsRUFBTTZFLGFBQWVnQixFQUNyQjdGLEVBQU11QixJQUFNMEcsR0FDVmpJLEVBQU1JLE9BQVFKLEVBQU1LLFFBQVd5QixFQUNqQzlCLEVBQU00QyxRQUFVQSxFQUNoQjVDLEVBQU1rSSxPQUNObEksRUFBTUMsT0FBT2lJLFVBR2Z2SSxTQUFTb0gsZUFBZSxhQUFhTyxpQkFBaUIsVUFBVSxLQUM5RHRILEVBQU1vSCxPQUNOcEgsRUFBTUMsT0FBT21ILFVBR2Z6SCxTQUFTQyxjQUFjLFVBQVUwSCxpQkFBaUIsU0FBUyxLQUN6RHRILEVBQU1DLE9BQU9zRixhQUNidkYsRUFBTW1JLFVBR1J4SSxTQUFTQyxjQUFjLFVBQVUwSCxpQkFBaUIsU0FBVUMsSUFDMUR2SCxFQUFNb0ksY0FDRnBJLEVBQU1TLFFBQ1I4RyxFQUFJeEYsT0FBT1MsVUFBVWtDLElBQUksVUFFekI2QyxFQUFJeEYsT0FBT1MsVUFBVUMsT0FBTyxhQUloQzlDLFNBQVNDLGNBQWMsVUFBVTBILGlCQUFpQixTQUFVQyxJQUMxRHZILEVBQU1xSSxlQUNGckksRUFBTXdGLFVBQ1IrQixFQUFJeEYsT0FBT1MsVUFBVWtDLElBQUksVUFFekI2QyxFQUFJeEYsT0FBT1MsVUFBVUMsT0FBTyxjIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBUaW1lciB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmN1cnJlbnRUaW1lID0gMDtcclxuICB9XHJcblxyXG4gIGNhbGNDdXJyZW50VGltZSgpIHtcclxuICAgIHRoaXMudGltZSA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgdGhpcy5jdXJyZW50VGltZSArPSAxO1xyXG4gICAgICB0aGlzLnNlY1RvTWluQW5kU2VjKCk7XHJcbiAgICB9LCAxMDAwKTtcclxuICB9XHJcblxyXG4gIHNlY1RvTWluQW5kU2VjKCkge1xyXG4gICAgdGhpcy5taW51dGVzID0gTWF0aC5mbG9vcih0aGlzLmN1cnJlbnRUaW1lIC8gNjApO1xyXG5cclxuICAgIHRoaXMuc2VjID0gKHRoaXMuY3VycmVudFRpbWUgJSA2MCkudG9GaXhlZCgwKTtcclxuICAgIHRoaXMudGltZXIgPSBgJHt0aGlzLm1pbnV0ZXN9OiR7dGhpcy5zZWMgPCAxMCA/ICcwJyA6ICcnfSR7dGhpcy5zZWN9YDtcclxuICAgIHRoaXMucmVuZGVyVGltZXIoKTtcclxuICB9XHJcblxyXG4gIHRpbWVyU3RvcCgpIHtcclxuICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lKTtcclxuICAgIHRoaXMudGltZXIgPSAnMDowMCc7XHJcbiAgICB0aGlzLnJlbmRlclRpbWVyKCk7XHJcbiAgfVxyXG5cclxuICB0aW1lclBhdXNlKCkge1xyXG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWUpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyVGltZXIoKSB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGltZScpLmlubmVySFRNTCA9IHRoaXMudGltZXI7XHJcbiAgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy50aW1lclN0b3AoKTtcclxuICAgIHRoaXMuY3VycmVudFRpbWUgPSBudWxsO1xyXG4gICAgdGhpcy5jYWxjQ3VycmVudFRpbWUoKTtcclxuICB9XHJcblxyXG4gIGxvYWQoKSB7XHJcbiAgICB0aGlzLnRpbWVyU3RvcCgpO1xyXG4gICAgdGhpcy5zZWNUb01pbkFuZFNlYygpO1xyXG4gICAgdGhpcy5yZW5kZXJUaW1lcigpO1xyXG5cclxuICAgIHRoaXMuY2FsY0N1cnJlbnRUaW1lKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBCb2FyZCBmcm9tICcuL0JvYXJkLmpzJztcclxuXHJcbmNvbnN0IGJvYXJkID0gbmV3IEJvYXJkKCk7XHJcblxyXG5jb25zdCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoZWFkZXInKTtcclxuaGVhZGVyLmNsYXNzTGlzdC5hZGQoJ2hlYWRlcicpO1xyXG5oZWFkZXIuaW5uZXJIVE1MID0gJzxoMSBjbGFzcz1cImhlYWRpbmdcIj5nZW0gcHV6emxlPC9oMT4nO1xyXG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGhlYWRlcik7XHJcblxyXG5jb25zdCBtZW51ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbm1lbnUuY2xhc3NMaXN0LmFkZCgnbWVudScpO1xyXG5cclxubWVudS5pbm5lckhUTUwgPSBgICBcclxuICA8ZGl2IGNsYXNzPVwic2V0dGluZ3NcIj5cclxuICAgIDxidXR0b24gY2xhc3M9XCJuZXctZ2FtZSBidG5cIj5OZXc8L2J1dHRvbj5cclxuICAgIDxidXR0b24gY2xhc3M9XCJzYXZlIGJ0blwiPlNhdmU8L2J1dHRvbj5cclxuICAgIDxidXR0b24gY2xhc3M9XCJsb2FkIGJ0blwiPkxvYWQ8L2J1dHRvbj5cclxuICAgIDxidXR0b24gY2xhc3M9XCJzY29yZSBidG5cIj5TY29yZTwvYnV0dG9uPlxyXG4gICAgPGJ1dHRvbiBjbGFzcz1cInNvdW5kIGJ0biAke2JvYXJkLnNvdW5kT24gPyAnYnRuLW9uJyA6ICcnfVwiPlNvdW5kPC9idXR0b24+XHJcbiAgICA8ZGl2IGNsYXNzPVwic2l6ZVwiPlxyXG4gICAgICA8c2VsZWN0IGlkPVwiZmllbGRTaXplXCI+XHJcbiAgICAgIDxvcHRpb24gc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiIHZhbHVlPVwiNFwiIGRpc2FibGVkPkZpZWxkIHNpemU8L29wdGlvbj5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiM1wiPjM8L29wdGlvbj5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiNFwiPjQ8L29wdGlvbj5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiNVwiPjU8L29wdGlvbj5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiNlwiPjY8L29wdGlvbj5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiN1wiPjc8L29wdGlvbj5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiOFwiPjg8L29wdGlvbj5cclxuICAgICAgPC9zZWxlY3Q+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxidXR0b24gY2xhc3M9XCJjaGVhdCBidG5cIj5DSEVBVDwvYnV0dG9uPlxyXG4gIDwvZGl2PlxyXG4gIDxkaXYgY2xhc3M9XCJjb3VudGVyc1wiPlxyXG4gICAgPGRpdiBjbGFzcz1cInRpbWVyXCI+PHNwYW4+VGltZXI6IDwvc3Bhbj48c3BhbiBjbGFzcz1cInRpbWVcIj4wOjAwPC9zcGFuPjwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cIm1vdmVzXCI+PHNwYW4+TW92ZXM6IDwvc3Bhbj48c3BhbiBjbGFzcz1cIm1vdmVcIj4wPC9zcGFuPjwvZGl2PlxyXG4gIDwvZGl2PmA7XHJcblxyXG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1lbnUpO1xyXG5cclxuYm9hcmQuaW5pdCgpO1xyXG5cclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy1nYW1lJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgYm9hcmQuaW5pdCgpO1xyXG59KTtcclxuXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zYXZlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXHJcbiAgICAnZ2FtZVNhdmUnLFxyXG4gICAgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICBiZ1Bvc2l0aW9uOiBib2FyZC5iZ1Bvc0FycixcclxuICAgICAgaGlzdG9yeTogYm9hcmQuaGlzdG9yeSxcclxuICAgICAgc2l6ZTogYm9hcmQuc2l6ZSxcclxuICAgICAgYm9hcmRUYWJsZTogYm9hcmQuYXJyLFxyXG4gICAgICB0aW1lOiBib2FyZC50aW1lckMuY3VycmVudFRpbWUsXHJcbiAgICAgIG1vdmVzOiBib2FyZC5tb3Zlc0NvdW50ZXIsXHJcbiAgICAgIHplcm86IFsgYm9hcmQuZW1wdHlYLCBib2FyZC5lbXB0eVkgXSxcclxuICAgICAgaW1nTnVtYjogYm9hcmQuaW1nTnVtYlxyXG4gICAgfSlcclxuICApO1xyXG59KTtcclxuXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2FkJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBiZ1Bvc2l0aW9uLCBoaXN0b3J5LCBzaXplLCBib2FyZFRhYmxlLCB0aW1lLCBtb3ZlcywgemVybywgaW1nTnVtYiB9ID0gSlNPTi5wYXJzZShcclxuICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYW1lU2F2ZScpXHJcbiAgKTtcclxuICBib2FyZC5iZ1Bvc0FyciA9IGJnUG9zaXRpb247XHJcbiAgYm9hcmQuaGlzdG9yeSA9IGhpc3Rvcnk7XHJcbiAgYm9hcmQuc2l6ZSA9IHNpemU7XHJcbiAgYm9hcmQudGltZXJDLmN1cnJlbnRUaW1lID0gdGltZTtcclxuICBib2FyZC5tb3Zlc0NvdW50ZXIgPSBtb3ZlcztcclxuICBib2FyZC5hcnIgPSBib2FyZFRhYmxlO1xyXG4gIFsgYm9hcmQuZW1wdHlYLCBib2FyZC5lbXB0eVkgXSA9IHplcm87XHJcbiAgYm9hcmQuaW1nTnVtYiA9IGltZ051bWI7XHJcbiAgYm9hcmQubG9hZCgpO1xyXG4gIGJvYXJkLnRpbWVyQy5sb2FkKCk7XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkU2l6ZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcclxuICBib2FyZC5pbml0KCk7XHJcbiAgYm9hcmQudGltZXJDLmluaXQoKTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hlYXQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBib2FyZC50aW1lckMudGltZXJQYXVzZSgpO1xyXG4gIGJvYXJkLmJhY2soKTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc291bmQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICBib2FyZC50b2dnbGVTb3VuZCgpO1xyXG4gIGlmIChib2FyZC5zb3VuZE9uKSB7XHJcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2J0bi1vbicpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi1vbicpO1xyXG4gIH1cclxufSk7XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2NvcmUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICBib2FyZC5nZXRTY29yZUxpc3QoKTtcclxuICBpZiAoYm9hcmQuc2NvcmVMaXN0KSB7XHJcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2J0bi1vbicpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi1vbicpO1xyXG4gIH1cclxufSk7XHJcbiIsImltcG9ydCBUaW1lciBmcm9tICcuL1RpbWVyLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJvYXJkIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMudGltZXJDID0gbmV3IFRpbWVyKCk7XHJcbiAgICB0aGlzLmhpc3RvcnkgPSBbXTtcclxuICAgIHRoaXMuc2l6ZSA9IDQ7XHJcbiAgICB0aGlzLmVtcHR5WCA9IDA7XHJcbiAgICB0aGlzLmVtcHR5WSA9IDA7XHJcbiAgICB0aGlzLmFuaW1hdGlvblRpbWUgPSAyMDA7XHJcbiAgICB0aGlzLmJvYXJkV2lkdGggPSA0MC44O1xyXG4gICAgdGhpcy5tYXJnaW5TaXplID0gMC4xO1xyXG4gICAgdGhpcy5zb3VuZE9uID0gdHJ1ZTtcclxuICAgIHRoaXMud2luU291bmQgPSBuZXcgQXVkaW8oJy4uL2Fzc2V0cy93aW4ubXAzJyk7XHJcbiAgICB0aGlzLnNsaWRlU291bmQgPSBuZXcgQXVkaW8oJy4uL2Fzc2V0cy9zbGlkZS5tcDMnKTtcclxuICAgIHRoaXMuc2xpZGVTb3VuZC52b2x1bWUgPSAwLjI7XHJcbiAgICB0aGlzLmRyYWdORHJvcFNvdW5kID0gbmV3IEF1ZGlvKCcuLi9hc3NldHMvd2hvb3NoLWdyYWlueV9na29hcXluXy5tcDMnKTtcclxuICAgIHRoaXMuZHJhZ05Ecm9wU291bmQudm9sdW1lID0gMC4zO1xyXG4gICAgdGhpcy5yZW1vdmVCb2FyZCA9ICgpID0+IHtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJvYXJkJykuZm9yRWFjaCgoZWxlbSkgPT4ge1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWxlbSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZmluZEVsZW0gPSAoZWxlbSkgPT4ge1xyXG4gICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMuYXJyLmxlbmd0aDsgeCArPSAxKSB7XHJcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLmFyci5sZW5ndGg7IHkgKz0gMSkge1xyXG4gICAgICAgICAgaWYgKHRoaXMuYXJyW3hdW3ldID09PSBwYXJzZUludChlbGVtLmlubmVySFRNTCwgMTApKSByZXR1cm4gWyB4LCB5IF07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihlbGVtKTtcclxuICAgIH07XHJcbiAgICB0aGlzLmRyYWdEcm9wID0gKGUpID0+IHtcclxuICAgICAgY29uc3QgemVybyA9IGUudGFyZ2V0O1xyXG4gICAgICBjb25zdCBtb3ZlYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oaWRlJyk7XHJcbiAgICAgIGNvbnN0IFsgeCwgeSBdID0gdGhpcy5maW5kRWxlbShtb3ZlYWJsZSk7XHJcbiAgICAgIGlmICh0aGlzLmlzTmVhclplcm8oeCwgeSkpIHtcclxuICAgICAgICBbIHRoaXMuYXJyW3hdW3ldLCB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldIF0gPSBbXHJcbiAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldLFxyXG4gICAgICAgICAgdGhpcy5hcnJbeF1beV1cclxuICAgICAgICBdO1xyXG4gICAgICAgIFsgdGhpcy5lbXB0eVgsIHRoaXMuZW1wdHlZIF0gPSBbIHgsIHkgXTtcclxuICAgICAgICBbIHplcm8uc3R5bGUub3JkZXIsIG1vdmVhYmxlLnN0eWxlLm9yZGVyIF0gPSBbIG1vdmVhYmxlLnN0eWxlLm9yZGVyLCB6ZXJvLnN0eWxlLm9yZGVyIF07XHJcbiAgICAgICAgdGhpcy5jaGVja0ZvcklkbGluZygpO1xyXG4gICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKFsgdGhpcy5lbXB0eVgsIHRoaXMuZW1wdHlZIF0pO1xyXG4gICAgICAgIHRoaXMucGxheURyYWdTb3VuZCgpO1xyXG4gICAgICAgIHRoaXMuYWRkTW92ZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIHplcm8uY2xhc3NMaXN0LnJlbW92ZSgnaG92ZXJlZCcpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHJhbmRvbUltZ051bWJlcihtYXgsIG1pbikge1xyXG4gICAgdGhpcy5pbWdOdW1iID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW4pO1xyXG4gIH1cclxuXHJcbiAgYmFjaygpIHtcclxuICAgIHRoaXMuaGlzdG9yeS5wb3AoKTtcclxuICAgIHRoaXMuYmFja1RpbWVyKCk7XHJcbiAgfVxyXG5cclxuICBpc05lYXJaZXJvKHgsIHkpIHtcclxuICAgIHJldHVybiAhIShcclxuICAgICAgKE1hdGguYWJzKHRoaXMuZW1wdHlYIC0geCkgPD0gMSAmJiB0aGlzLmVtcHR5WSAtIHkgPT09IDApIHx8XHJcbiAgICAgIChNYXRoLmFicyh0aGlzLmVtcHR5WSAtIHkpIDw9IDEgJiYgdGhpcy5lbXB0eVggLSB4ID09PSAwKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGNoZWNrRm9ySWRsaW5nKCkge1xyXG4gICAgY29uc3QgWyBibFgsIGJsWSBdID0gdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeS5sZW5ndGggLSAyXTtcclxuICAgIGlmICh0aGlzLmVtcHR5WCA9PT0gYmxYICYmIHRoaXMuZW1wdHlZID09PSBibFkpIHRoaXMuaGlzdG9yeS5zcGxpY2UoLTIsIDIpO1xyXG4gIH1cclxuXHJcbiAgYmFja1RpbWVyKCkge1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmhpc3RvcnkubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3QgWyB4LCB5IF0gPSB0aGlzLmhpc3RvcnkucG9wKCk7XHJcbiAgICAgICAgdGhpcy5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2NlbGwtJHt0aGlzLmFyclt4XVt5XX1gKTtcclxuXHJcbiAgICAgICAgdGhpcy5tb3ZlQW5pbWF0aW9uKFsgeCwgeSBdKTtcclxuXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB0ZW1wID0gdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXTtcclxuICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV0gPSB0aGlzLmFyclt4XVt5XTtcclxuICAgICAgICAgIHRoaXMuYXJyW3hdW3ldID0gdGVtcDtcclxuICAgICAgICAgIHRoaXMuZW1wdHlYID0geDtcclxuICAgICAgICAgIHRoaXMuZW1wdHlZID0geTtcclxuICAgICAgICAgIHRoaXMucmVtb3ZlQm9hcmQoKTtcclxuICAgICAgICAgIHRoaXMucmVuZGVyQm9hcmQoKTtcclxuICAgICAgICAgIHRoaXMucGxheVNsaWRlU291bmQoKTtcclxuICAgICAgICAgIHRoaXMuYmFja1RpbWVyKCk7XHJcbiAgICAgICAgfSwgdGhpcy5hbmltYXRpb25UaW1lKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmNoZWNrV2luKHRydWUpO1xyXG4gICAgICB9XHJcbiAgICB9LCB0aGlzLmFuaW1hdGlvblRpbWUpO1xyXG4gIH1cclxuXHJcbiAgbW92ZShkaXJlY3Rpb24pIHtcclxuICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XHJcbiAgICAgIGNhc2UgJ3VwJzpcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0aGlzLmVtcHR5WCAhPT0gMCAmJlxyXG4gICAgICAgICAgKHRoaXMuaGlzdG9yeS5sZW5ndGggPD0gMSB8fCB0aGlzLmVtcHR5WCAtIDEgIT09IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnkubGVuZ3RoIC0gMl1bMF0pXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldID0gdGhpcy5hcnJbdGhpcy5lbXB0eVggLSAxXVt0aGlzLmVtcHR5WV07XHJcbiAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WCAtIDFdW3RoaXMuZW1wdHlZXSA9IDA7XHJcbiAgICAgICAgICB0aGlzLmVtcHR5WCAtPSAxO1xyXG4gICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2goWyB0aGlzLmVtcHR5WCwgdGhpcy5lbXB0eVkgXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuY291bnRlciAtPSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2Rvd24nOlxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHRoaXMuZW1wdHlYICE9PSB0aGlzLnNpemUgLSAxICYmXHJcbiAgICAgICAgICAodGhpcy5oaXN0b3J5Lmxlbmd0aCA8PSAxIHx8IHRoaXMuZW1wdHlYICsgMSAhPT0gdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeS5sZW5ndGggLSAyXVswXSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV0gPSB0aGlzLmFyclt0aGlzLmVtcHR5WCArIDFdW3RoaXMuZW1wdHlZXTtcclxuICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYICsgMV1bdGhpcy5lbXB0eVldID0gMDtcclxuICAgICAgICAgIHRoaXMuZW1wdHlYICs9IDE7XHJcbiAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChbIHRoaXMuZW1wdHlYLCB0aGlzLmVtcHR5WSBdKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5jb3VudGVyIC09IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgdGhpcy5lbXB0eVkgIT09IHRoaXMuc2l6ZSAtIDEgJiZcclxuICAgICAgICAgICh0aGlzLmhpc3RvcnkubGVuZ3RoIDw9IDEgfHwgdGhpcy5lbXB0eVkgKyAxICE9PSB0aGlzLmhpc3RvcnlbdGhpcy5oaXN0b3J5Lmxlbmd0aCAtIDJdWzFdKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXSA9IHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WSArIDFdO1xyXG4gICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZICsgMV0gPSAwO1xyXG4gICAgICAgICAgdGhpcy5lbXB0eVkgKz0gMTtcclxuICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKFsgdGhpcy5lbXB0eVgsIHRoaXMuZW1wdHlZIF0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmNvdW50ZXIgLT0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHRoaXMuZW1wdHlZICE9PSAwICYmXHJcbiAgICAgICAgICAodGhpcy5oaXN0b3J5Lmxlbmd0aCA8PSAxIHx8IHRoaXMuZW1wdHlZIC0gMSAhPT0gdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeS5sZW5ndGggLSAyXVsxXSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV0gPSB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVkgLSAxXTtcclxuICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WSAtIDFdID0gMDtcclxuICAgICAgICAgIHRoaXMuZW1wdHlZIC09IDE7XHJcbiAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChbIHRoaXMuZW1wdHlYLCB0aGlzLmVtcHR5WSBdKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5jb3VudGVyIC09IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignPjooJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjcmVhdGVCb2FyZCgpIHtcclxuICAgIGNvbnN0IGFyciA9IFtdO1xyXG5cclxuICAgIHRoaXMuYmdQb3NBcnIgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zaXplOyBpICs9IDEpIHtcclxuICAgICAgYXJyW2ldID0gW107XHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5zaXplOyBqICs9IDEpIHtcclxuICAgICAgICBpZiAoaSArIGogIT09ICh0aGlzLnNpemUgLSAxKSAqIDIpIHtcclxuICAgICAgICAgIGFycltpXVtqXSA9IGkgKiB0aGlzLnNpemUgKyBqICsgMTtcclxuICAgICAgICAgIHRoaXMuYmdQb3NBcnIucHVzaChcclxuICAgICAgICAgICAgYCR7TWF0aC5yb3VuZCgxMDAgLyAodGhpcy5zaXplIC0gMSkgKiBqKX0lICR7TWF0aC5yb3VuZCgxMDAgLyAodGhpcy5zaXplIC0gMSkgKiBpKX0lYFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYXJyW2ldW2pdID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcnI7XHJcbiAgfVxyXG5cclxuICBzaHVmZmxlKCkge1xyXG4gICAgdGhpcy5oaXN0b3J5LnB1c2goWyB0aGlzLmVtcHR5WCwgdGhpcy5lbXB0eVkgXSk7XHJcbiAgICBmb3IgKHRoaXMuY291bnRlciA9IDA7IHRoaXMuY291bnRlciA8IHRoaXMuc2l6ZSAqKiAzOyB0aGlzLmNvdW50ZXIgKz0gMSkge1xyXG4gICAgICBzd2l0Y2ggKE1hdGguZmxvb3IoNCAqIE1hdGgucmFuZG9tKCkpKSB7XHJcbiAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgLy8gIE1PVkUgVVBcclxuXHJcbiAgICAgICAgICB0aGlzLm1vdmUoJ3VwJyk7XHJcblxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgLy8gIE1PVkUgUklHSFRcclxuICAgICAgICAgIHRoaXMubW92ZSgncmlnaHQnKTtcclxuXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAvLyAgTU9WRSBET1dOXHJcbiAgICAgICAgICB0aGlzLm1vdmUoJ2Rvd24nKTtcclxuXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAvLyAgTU9WRSBMRUZUXHJcbiAgICAgICAgICB0aGlzLm1vdmUoJ2xlZnQnKTtcclxuXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCc+OignKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyQm9hcmQoKSB7XHJcbiAgICBsZXQgYm9hcmQgPSBgPGRpdiBjbGFzcz1cInNjb3JlLWxpc3RcIj50ZXN0PC9kaXY+YDtcclxuICAgIGNvbnN0IGJvYXJkV2lkdGggPSBgJHt0aGlzLmJvYXJkV2lkdGh9cmVtYDtcclxuICAgIGxldCBjZWxsTnVtYmVyO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwLCBvcmRlciA9IDE7IGkgPCB0aGlzLnNpemU7IGkgKz0gMSkge1xyXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuc2l6ZTsgaiArPSAxKSB7XHJcbiAgICAgICAgY2VsbE51bWJlciA9IHRoaXMuYXJyW2ldW2pdO1xyXG5cclxuICAgICAgICBjb25zdCBjbGFzc05hbWUgPSBjZWxsTnVtYmVyID8gJ2NlbGwnIDogJ2NlbGwgZW1wdHknO1xyXG5cclxuICAgICAgICBjb25zdCBkcmFnZ2FibGUgPSAhIWNlbGxOdW1iZXI7XHJcblxyXG4gICAgICAgIGNvbnN0IHByZXZlbnREZWYgPSAhY2VsbE51bWJlciA/IFwib25kcmFnb3ZlciA9ICdldmVudC5wcmV2ZW50RGVmYXVsdCgpJ1wiIDogJyc7XHJcbiAgICAgICAgY29uc3QgYkdwb3MgPSB0aGlzLmJnUG9zQXJyW2NlbGxOdW1iZXIgLSAxXTtcclxuICAgICAgICBjb25zdCBiZ0ZvckNlbGwgPSBjZWxsTnVtYmVyXHJcbiAgICAgICAgICA/IGBiYWNrZ3JvdW5kOiB1cmwoLi4vYXNzZXRzL2ltYWdlcy8ke3RoaXNcclxuICAgICAgICAgICAgICAuaW1nTnVtYn0uanBnKTsgYmFja2dyb3VuZC1wb3NpdGlvbjogJHtiR3Bvc307IGJhY2tncm91bmQtc2l6ZTogJHtib2FyZFdpZHRofTtgXHJcbiAgICAgICAgICA6ICcnO1xyXG4gICAgICAgIG9yZGVyICs9IDE7XHJcblxyXG4gICAgICAgIGJvYXJkICs9IGA8ZGl2IFxyXG4gICAgICAgICR7cHJldmVudERlZn1cclxuICAgICAgICAgIHN0eWxlPSd3aWR0aDoke3RoaXMuY2VsbFNpemV9cmVtO1xyXG4gICAgICAgICAgaGVpZ2h0OiR7dGhpcy5jZWxsU2l6ZX1yZW07XHJcbiAgICAgICAgICBvcmRlcjoke29yZGVyfTtcclxuICAgICAgICAgICR7YmdGb3JDZWxsfSdcclxuICAgICAgICAgIGlkPSdjZWxsLSR7Y2VsbE51bWJlcn0nXHJcbiAgICAgICAgICBjbGFzcz0nJHtjbGFzc05hbWV9J1xyXG4gICAgICAgICAgZHJhZ2dhYmxlPVwiJHtkcmFnZ2FibGV9XCI+JHtjZWxsTnVtYmVyfTwvZGl2PmA7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2JvYXJkJyk7XHJcbiAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gYm9hcmRXaWR0aDtcclxuICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gYm9hcmQ7XHJcblxyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICB9XHJcblxyXG4gIGFkZE1vdmUoKSB7XHJcbiAgICB0aGlzLm1vdmVzQ291bnRlciArPSAxO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vdmUnKS5pbm5lckhUTUwgPSB0aGlzLm1vdmVzQ291bnRlcjtcclxuICB9XHJcblxyXG4gIGRyYXcoKSB7XHJcbiAgICBjb25zdCByZW1QZXJUaWNrID0gdGhpcy5jZWxsU2l6ZSAvIHRoaXMuYW5pbWF0aW9uVGltZSAqIHRoaXMudGltZVBhc3NlZDtcclxuICAgIHN3aXRjaCAodGhpcy5kaXJlY3Rpb24pIHtcclxuICAgICAgY2FzZSAndXAnOlxyXG4gICAgICAgIHRoaXMuZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCAwLCAkey1yZW1QZXJUaWNrfXJlbSlgO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdkb3duJzpcclxuICAgICAgICB0aGlzLmUuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSggMCwgJHtyZW1QZXJUaWNrfXJlbSlgO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdsZWZ0JzpcclxuICAgICAgICB0aGlzLmUuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSggJHstcmVtUGVyVGlja31yZW0sIDApYDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgIHRoaXMuZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCAke3JlbVBlclRpY2t9cmVtLCAwKWA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCc+OignKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG1vdmVBbmltYXRpb24oWyB4LCB5IF0pIHtcclxuICAgIGlmICh0aGlzLmVtcHR5WCA8IHgpIHtcclxuICAgICAgdGhpcy5kaXJlY3Rpb24gPSAndXAnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmVtcHR5WCA+IHgpIHtcclxuICAgICAgdGhpcy5kaXJlY3Rpb24gPSAnZG93bic7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZW1wdHlZIDwgeSkge1xyXG4gICAgICB0aGlzLmRpcmVjdGlvbiA9ICdsZWZ0JztcclxuICAgIH0gZWxzZSBpZiAodGhpcy5lbXB0eVkgPiB5KSB7XHJcbiAgICAgIHRoaXMuZGlyZWN0aW9uID0gJ3JpZ2h0JztcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmluQW5pbWF0aW9uID0gdHJ1ZTtcclxuICAgIHRoaXMuc3RhcnQgPSBEYXRlLm5vdygpO1xyXG5cclxuICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIHRoaXMudGltZVBhc3NlZCA9IERhdGUubm93KCkgLSB0aGlzLnN0YXJ0O1xyXG5cclxuICAgICAgaWYgKHRoaXMudGltZVBhc3NlZCA+PSB0aGlzLmFuaW1hdGlvblRpbWUpIHtcclxuICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpO1xyXG4gICAgICAgIHRoaXMuaW5BbmltYXRpb24gPSBmYWxzZTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgfSwgMjApO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlU291bmQoKSB7XHJcbiAgICB0aGlzLnNvdW5kT24gPSAhdGhpcy5zb3VuZE9uO1xyXG4gIH1cclxuXHJcbiAgc3dhcChudW1iZXIpIHtcclxuICAgIGlmICh0aGlzLmluQW5pbWF0aW9uKSByZXR1cm47XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFyci5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuYXJyW2ldLmxlbmd0aDsgaiArPSAxKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXJyW2ldW2pdID09PSBudW1iZXIpIHtcclxuICAgICAgICAgIGlmICh0aGlzLmlzTmVhclplcm8oaSwgaikpIHtcclxuICAgICAgICAgICAgLy8gTW92ZSBjb3VudGVyXHJcbiAgICAgICAgICAgIHRoaXMuYWRkTW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgemVybyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNjZWxsLSR7dGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXX1gKTtcclxuICAgICAgICAgICAgdGhpcy5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2NlbGwtJHt0aGlzLmFycltpXVtqXX1gKTtcclxuXHJcbiAgICAgICAgICAgIC8vICBmaW5kIHdoZXJlIGFyZSB3ZSBtb3ZpbmdcclxuICAgICAgICAgICAgdGhpcy5tb3ZlQW5pbWF0aW9uKFsgaSwgaiBdKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucGxheVNsaWRlU291bmQoKTtcclxuXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSB6ZXJvLnN0eWxlLm9yZGVyO1xyXG4gICAgICAgICAgICAgIHplcm8uc3R5bGUub3JkZXIgPSB0aGlzLmUuc3R5bGUub3JkZXI7XHJcbiAgICAgICAgICAgICAgdGhpcy5lLnN0eWxlLm9yZGVyID0gdGVtcDtcclxuXHJcbiAgICAgICAgICAgICAgdGhpcy5lLnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xyXG5cclxuICAgICAgICAgICAgICBpZiAodGhpcy5lbXB0eVggPT09IHRoaXMuZW1wdHlZICYmIHRoaXMuZW1wdHlZID09PSB0aGlzLnNpemUgLSAxKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja1dpbigpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudGltZXJDLnRpbWVyUGF1c2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIHRoaXMuYW5pbWF0aW9uVGltZSk7XHJcbiAgICAgICAgICAgIFsgdGhpcy5hcnJbaV1bal0sIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV0gXSA9IFtcclxuICAgICAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldLFxyXG4gICAgICAgICAgICAgIHRoaXMuYXJyW2ldW2pdXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIHRoaXMuZW1wdHlYID0gaTtcclxuICAgICAgICAgICAgdGhpcy5lbXB0eVkgPSBqO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGVja0ZvcklkbGluZygpO1xyXG4gICAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChbIHRoaXMuZW1wdHlYLCB0aGlzLmVtcHR5WSBdKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0U2NvcmUoKSB7XHJcbiAgICBsZXQgc2NvcmVMaXN0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2NvcmUtbGlzdCcpKSB8fCBbXTtcclxuICAgIHNjb3JlTGlzdC5wdXNoKHsgbW92ZXM6IHRoaXMubW92ZXNDb3VudGVyLCBzaXplOiB0aGlzLnNpemUsIHRpbWU6IHRoaXMudGltZXJDLnRpbWVyIH0pO1xyXG4gICAgaWYgKHNjb3JlTGlzdC5sZW5ndGggPiAxMCkge1xyXG4gICAgICBzY29yZUxpc3Quc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgIHJldHVybiBhLm1vdmVzIC0gYi5tb3ZlcztcclxuICAgICAgfSk7XHJcbiAgICAgIHNjb3JlTGlzdCA9IHNjb3JlTGlzdC5zbGljZSgwLCAxMCk7XHJcbiAgICB9XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2NvcmUtbGlzdCcsIEpTT04uc3RyaW5naWZ5KHNjb3JlTGlzdCkpO1xyXG4gIH1cclxuXHJcbiAgZ2V0U2NvcmVMaXN0KCkge1xyXG4gICAgdGhpcy5zY29yZUxpc3QgPSAhdGhpcy5zY29yZUxpc3Q7XHJcblxyXG4gICAgY29uc3Qgc2NvcmVFbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNjb3JlLWxpc3QnKTtcclxuICAgIGNvbnN0IHNjb3JlTGlzdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Njb3JlLWxpc3QnKSkgfHwgW107XHJcbiAgICBsZXQgbGlzdCA9ICcnO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSBzY29yZUxpc3QubGVuZ3RoIC0gMTsgaSA+PSAwOyBpIC09IDEpIHtcclxuICAgICAgbGlzdCArPSBgPGxpPlNpemU6ICR7c2NvcmVMaXN0W2ldLnNpemV9LCZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwO01vdmVzOiAke3Njb3JlTGlzdFtpXVxyXG4gICAgICAgIC5tb3Zlc30sJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7VGltZTogJHtzY29yZUxpc3RbaV0udGltZX08L2xpPmA7XHJcbiAgICB9XHJcbiAgICBzY29yZUVsZW0uaW5uZXJIVE1MID0gYDxoMj5CZXN0IFNjb3JlczwvaDI+XHJcbiAgICAgIDxvbCBjbGFzcz1cInNjb3JlXCI+JHtsaXN0fTwvb2w+YDtcclxuICAgIGlmICh0aGlzLnNjb3JlTGlzdCkge1xyXG4gICAgICBzY29yZUVsZW0uY2xhc3NMaXN0LmFkZCgnc2NvcmUtbGlzdC1vbicpO1xyXG4gICAgICB0aGlzLnRpbWVyQy50aW1lclBhdXNlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzY29yZUVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnc2NvcmUtbGlzdC1vbicpO1xyXG4gICAgICB0aGlzLnRpbWVyQy5jYWxjQ3VycmVudFRpbWUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNoZWNrV2luKGNoZWF0KSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2l6ZTsgaSArPSAxKSB7XHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5zaXplOyBqICs9IDEpIHtcclxuICAgICAgICBpZiAoaSArIGogIT09ICh0aGlzLnNpemUgLSAxKSAqIDIpIHtcclxuICAgICAgICAgIGlmICh0aGlzLndpbltpXVtqXSAhPT0gdGhpcy5hcnJbaV1bal0pIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMucGxheVdpblNvdW5kKCk7XHJcbiAgICB0aGlzLnNldFdpbk1lc3NhZ2UoY2hlYXQpO1xyXG4gICAgdGhpcy5zZXRTY29yZSgpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICBzZXRXaW5NZXNzYWdlKGNoZWF0KSB7XHJcbiAgICB0aGlzLndpbkJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJvYXJkJyk7XHJcbiAgICB0aGlzLndpbkJvYXJkLmNsYXNzTGlzdC5hZGQoJ3dpbicpO1xyXG5cclxuICAgIHRoaXMud2luQm9hcmQuaW5uZXJIVE1MICs9IGA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKC4uL2Fzc2V0cy9pbWFnZXMvJHt0aGlzXHJcbiAgICAgIC5pbWdOdW1ifS5qcGcpO1wiIGNsYXNzPSd3aW4tdGV4dCc+JHtjaGVhdFxyXG4gICAgICA/ICfQp9CY0KLQldCgISdcclxuICAgICAgOiBg0KPRgNCwISDQktGLINGA0LXRiNC40LvQuCDQs9C+0LvQvtCy0L7Qu9C+0LzQutGDINC30LAgJHtkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGltZScpXHJcbiAgICAgICAgICAuaW5uZXJIVE1MfSDQuCAke2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb3ZlJykuaW5uZXJIVE1MfSDRhdC+0LTQvtCyPC9kaXY+YH08L2Rpdj5gO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMud2luQm9hcmQucXVlcnlTZWxlY3RvcignLndpbi10ZXh0Jykuc3R5bGUub3BhY2l0eSA9IDE7XHJcbiAgICB9LCA1MCk7XHJcbiAgfVxyXG5cclxuICBwbGF5V2luU291bmQoKSB7XHJcbiAgICBpZiAoIXRoaXMuc291bmRPbikgcmV0dXJuO1xyXG4gICAgdGhpcy53aW5Tb3VuZC5jdXJyZW50VGltZSA9IDA7XHJcbiAgICB0aGlzLndpblNvdW5kLnBsYXkoKTtcclxuICB9XHJcblxyXG4gIHBsYXlTbGlkZVNvdW5kKCkge1xyXG4gICAgaWYgKCF0aGlzLnNvdW5kT24pIHJldHVybjtcclxuICAgIHRoaXMuc2xpZGVTb3VuZC5jdXJyZW50VGltZSA9IDA7XHJcbiAgICB0aGlzLnNsaWRlU291bmQucGxheSgpO1xyXG4gIH1cclxuXHJcbiAgcGxheURyYWdTb3VuZCgpIHtcclxuICAgIGlmICghdGhpcy5zb3VuZE9uKSByZXR1cm47XHJcbiAgICB0aGlzLmRyYWdORHJvcFNvdW5kLmN1cnJlbnRUaW1lID0gMC4xNTtcclxuICAgIHRoaXMuZHJhZ05Ecm9wU291bmQucGxheSgpO1xyXG4gIH1cclxuXHJcbiAgZHJhZ1N0YXJ0KCkge1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG5cclxuICBkcmFnRW5kKCkge1xyXG4gICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XHJcbiAgfVxyXG5cclxuICBkcmFnRW50ZXIoKSB7XHJcbiAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2hvdmVyZWQnKTtcclxuICB9XHJcblxyXG4gIGRyYWdMZWF2ZSgpIHtcclxuICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnaG92ZXJlZCcpO1xyXG4gIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMuc2NvcmVMaXN0ID0gZmFsc2U7XHJcbiAgICB0aGlzLnJhbmRvbUltZ051bWJlcigxNTAsIDEpO1xyXG4gICAgdGhpcy5oaXN0b3J5ID0gW107XHJcbiAgICB0aGlzLm1vdmVzQ291bnRlciA9IDA7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW92ZScpLmlubmVySFRNTCA9IHRoaXMubW92ZXNDb3VudGVyO1xyXG4gICAgdGhpcy5zaXplID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkU2l6ZScpLnZhbHVlO1xyXG5cclxuICAgIHRoaXMuY2VsbFNpemUgPSBwYXJzZUZsb2F0KHRoaXMuYm9hcmRXaWR0aCAvIHRoaXMuc2l6ZSAtIDIgKiB0aGlzLm1hcmdpblNpemUpLnRvRml4ZWQoMyk7XHJcblxyXG4gICAgdGhpcy5yZW1vdmVCb2FyZCgpO1xyXG5cclxuICAgIHRoaXMuZW1wdHlYID0gdGhpcy5zaXplIC0gMTtcclxuICAgIHRoaXMuZW1wdHlZID0gdGhpcy5zaXplIC0gMTtcclxuXHJcbiAgICB0aGlzLmFyciA9IHRoaXMuY3JlYXRlQm9hcmQoKTtcclxuICAgIHRoaXMud2luID0gdGhpcy5jcmVhdGVCb2FyZCgpO1xyXG5cclxuICAgIHRoaXMuc2h1ZmZsZSgpO1xyXG5cclxuICAgIHRoaXMucmVuZGVyQm9hcmQoKTtcclxuICAgIHRoaXMudGltZXJDLmluaXQoKTtcclxuXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpLmZvckVhY2goKGNlbGwpID0+IHtcclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKGV2dCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGVsZW0gPSBldnQudGFyZ2V0O1xyXG4gICAgICAgIHRoaXMuc3dhcChwYXJzZUludChlbGVtLmlubmVySFRNTCwgMTApKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIHRoaXMuZHJhZ1N0YXJ0KTtcclxuXHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCB0aGlzLmRyYWdPdmVyKTtcclxuXHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIHRoaXMuZHJhZ0Ryb3ApO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgdGhpcy5kcmFnRW5kKTtcclxuXHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgdGhpcy5kcmFnRW50ZXIpO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCB0aGlzLmRyYWdMZWF2ZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGxvYWQoKSB7XHJcbiAgICB0aGlzLmNlbGxTaXplID0gcGFyc2VGbG9hdCh0aGlzLmJvYXJkV2lkdGggLyB0aGlzLnNpemUgLSAyICogdGhpcy5tYXJnaW5TaXplKS50b0ZpeGVkKDMpO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vdmUnKS5pbm5lckhUTUwgPSB0aGlzLm1vdmVzQ291bnRlcjtcclxuICAgIHRoaXMucmVtb3ZlQm9hcmQoKTtcclxuICAgIHRoaXMucmVuZGVyQm9hcmQoKTtcclxuICAgIHRoaXMud2luID0gdGhpcy5jcmVhdGVCb2FyZCgpO1xyXG4gICAgdGhpcy50aW1lckMuaW5pdCgpO1xyXG5cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJykuZm9yRWFjaCgoY2VsbCkgPT4ge1xyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZWxlbSA9IGV2dC50YXJnZXQ7XHJcbiAgICAgICAgdGhpcy5zd2FwKHBhcnNlSW50KGVsZW0uaW5uZXJIVE1MLCAxMCkpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgdGhpcy5kcmFnU3RhcnQpO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoaXMuZHJhZ092ZXIpO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgdGhpcy5kcmFnRHJvcCk7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCB0aGlzLmRyYWdFbmQpO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCB0aGlzLmRyYWdFbnRlcik7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIHRoaXMuZHJhZ0xlYXZlKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9