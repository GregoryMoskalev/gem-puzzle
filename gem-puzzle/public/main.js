(()=>{"use strict";class t{constructor(){this.currentTime=0}calcCurrentTime(){this.time=setInterval((()=>{this.currentTime+=1,this.secToMinAndSec()}),1e3)}secToMinAndSec(){this.minutes=Math.floor(this.currentTime/60),this.sec=(this.currentTime%60).toFixed(0),this.timer=`${this.minutes}:${this.sec<10?"0":""}${this.sec}`,this.renderTimer()}timerStop(){clearInterval(this.time),this.timer="0:00",this.renderTimer()}timerPause(){clearInterval(this.time)}renderTimer(){document.querySelector(".time").innerHTML=this.timer}init(){this.timerStop(),this.currentTime=null,this.calcCurrentTime()}load(){this.timerStop(),this.secToMinAndSec(),this.renderTimer(),this.calcCurrentTime()}}const e=new class{constructor(){this.timerC=new t,this.history=[],this.size=4,this.emptyX=0,this.emptyY=0,this.animationTime=200,this.boardWidth=40.8,this.marginSize=.1,this.soundOn=!0,this.winSound=new Audio("../assets/win.mp3"),this.slideSound=new Audio("../assets/slide.mp3"),this.slideSound.volume=.2,this.removeBoard=()=>{document.querySelectorAll(".board").forEach((t=>{document.body.removeChild(t)}))},this.findElem=t=>{for(let e=0;e<this.arr.length;e+=1)for(let i=0;i<this.arr.length;i+=1)if(this.arr[e][i]===parseInt(t.innerHTML,10))return[e,i];throw new Error(t)},this.dragDrop=t=>{const e=t.target,i=document.querySelector(".hide"),[s,r]=this.findElem(i);this.isNearZero(s,r)&&([this.arr[s][r],this.arr[this.emptyX][this.emptyY]]=[this.arr[this.emptyX][this.emptyY],this.arr[s][r]],[this.emptyX,this.emptyY]=[s,r],[e.style.order,i.style.order]=[i.style.order,e.style.order],this.checkForIdling(),this.history.push([this.emptyX,this.emptyY])),e.classList.remove("hovered")}}randomImgNumber(t,e){this.imgNumb=Math.floor(Math.random()*(t-e)+e)}back(){this.history.pop(),this.backTimer()}isNearZero(t,e){return!!(Math.abs(this.emptyX-t)<=1&&this.emptyY-e==0||Math.abs(this.emptyY-e)<=1&&this.emptyX-t==0)}checkForIdling(){const[t,e]=this.history[this.history.length-2];this.emptyX===t&&this.emptyY===e&&this.history.splice(-2,2)}backTimer(){setTimeout((()=>{if(this.history.length){const[t,e]=this.history.pop();this.e=document.querySelector("#cell-"+this.arr[t][e]),this.moveAnimation([t,e]),setTimeout((()=>{const i=this.arr[this.emptyX][this.emptyY];this.arr[this.emptyX][this.emptyY]=this.arr[t][e],this.arr[t][e]=i,this.emptyX=t,this.emptyY=e,this.removeBoard(),this.renderBoard(),this.playSlideSound(),this.backTimer()}),this.animationTime)}else this.checkWin(!0)}),this.animationTime)}move(t){switch(t){case"up":0!==this.emptyX&&(this.history.length<=1||this.emptyX-1!==this.history[this.history.length-2][0])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX-1][this.emptyY],this.arr[this.emptyX-1][this.emptyY]=0,this.emptyX-=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;case"down":this.emptyX!==this.size-1&&(this.history.length<=1||this.emptyX+1!==this.history[this.history.length-2][0])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX+1][this.emptyY],this.arr[this.emptyX+1][this.emptyY]=0,this.emptyX+=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;case"right":this.emptyY!==this.size-1&&(this.history.length<=1||this.emptyY+1!==this.history[this.history.length-2][1])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX][this.emptyY+1],this.arr[this.emptyX][this.emptyY+1]=0,this.emptyY+=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;case"left":0!==this.emptyY&&(this.history.length<=1||this.emptyY-1!==this.history[this.history.length-2][1])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX][this.emptyY-1],this.arr[this.emptyX][this.emptyY-1]=0,this.emptyY-=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;default:throw new Error(">:(")}}createBoard(){const t=[];this.bgPosArr=[];for(let e=0;e<this.size;e+=1){t[e]=[];for(let i=0;i<this.size;i+=1)e+i!==2*(this.size-1)?(t[e][i]=e*this.size+i+1,this.bgPosArr.push(`${Math.round(100/(this.size-1)*i)}% ${Math.round(100/(this.size-1)*e)}%`)):t[e][i]=0}return t}shuffle(){for(this.history.push([this.emptyX,this.emptyY]),this.counter=0;this.counter<this.size**3;this.counter+=1)switch(Math.floor(4*Math.random())){case 0:this.move("up");break;case 1:this.move("right");break;case 2:this.move("down");break;case 3:this.move("left");break;default:throw new Error(">:(")}}renderBoard(){let t='<div class="score-list">test</div>';const e=this.boardWidth+"rem";let i;for(let s=0,r=1;s<this.size;s+=1)for(let h=0;h<this.size;h+=1){i=this.arr[s][h];const n=i?"cell":"cell empty",o=!!i,a=i?"":"ondragover = 'event.preventDefault()'",m=this.bgPosArr[i-1],d=i?`background: url(../assets/images/${this.imgNumb}.jpg); background-position: ${m}; background-size: ${e};`:"";r+=1,t+=`<div \n        ${a}\n          style='width:${this.cellSize}rem;\n          height:${this.cellSize}rem;\n          order:${r};\n          ${d}'\n          id='cell-${i}'\n          class='${n}'\n          draggable="${o}">${i}</div>`}const s=document.createElement("div");s.classList.add("board"),s.style.width=e,s.innerHTML=t,document.body.appendChild(s)}draw(){const t=this.cellSize/this.animationTime*this.timePassed;switch(this.direction){case"up":this.e.style.transform=`translate( 0, ${-t}rem)`;break;case"down":this.e.style.transform=`translate( 0, ${t}rem)`;break;case"left":this.e.style.transform=`translate( ${-t}rem, 0)`;break;case"right":this.e.style.transform=`translate( ${t}rem, 0)`;break;default:throw new Error(">:(")}}moveAnimation([t,e]){this.emptyX<t?this.direction="up":this.emptyX>t?this.direction="down":this.emptyY<e?this.direction="left":this.emptyY>e&&(this.direction="right"),this.inAnimation=!0,this.start=Date.now(),this.timer=setInterval((()=>{if(this.timePassed=Date.now()-this.start,this.timePassed>=this.animationTime)return clearInterval(this.timer),void(this.inAnimation=!1);this.draw()}),20)}toggleSound(){this.soundOn=!this.soundOn}swap(t){if(!this.inAnimation)for(let e=0;e<this.arr.length;e+=1)for(let i=0;i<this.arr[e].length;i+=1)if(this.arr[e][i]===t&&this.isNearZero(e,i)){this.movesCounter+=1,document.querySelector(".move").innerHTML=this.movesCounter;const t=document.querySelector("#cell-"+this.arr[this.emptyX][this.emptyY]);return this.e=document.querySelector("#cell-"+this.arr[e][i]),this.moveAnimation([e,i]),this.playSlideSound(),setTimeout((()=>{const e=t.style.order;t.style.order=this.e.style.order,this.e.style.order=e,this.e.style.transform="",this.emptyX===this.emptyY&&this.emptyY===this.size-1&&this.checkWin()&&this.timerC.timerPause()}),this.animationTime),[this.arr[e][i],this.arr[this.emptyX][this.emptyY]]=[this.arr[this.emptyX][this.emptyY],this.arr[e][i]],this.emptyX=e,this.emptyY=i,this.checkForIdling(),void this.history.push([this.emptyX,this.emptyY])}}setScore(){let t=JSON.parse(localStorage.getItem("score-list"))||[];t.push({moves:this.movesCounter,size:this.size,time:this.timerC.timer}),t.length>10&&(t.sort(((t,e)=>t.moves-e.moves)),t=t.slice(0,10)),localStorage.setItem("score-list",JSON.stringify(t))}getScoreList(){this.scoreList=!this.scoreList;const t=document.querySelector(".score-list"),e=JSON.parse(localStorage.getItem("score-list"))||[];let i="";for(let t=e.length-1;t>=0;t-=1)i+=`<li>Size: ${e[t].size},&nbsp;&nbsp;&nbsp;&nbsp;Moves: ${e[t].moves},&nbsp;&nbsp;&nbsp;&nbsp;Time: ${e[t].time}</li>`;t.innerHTML=`<h2>Best Scores</h2>\n      <ol class="score">${i}</ol>`,this.scoreList?(t.classList.add("score-list-on"),this.timerC.timerPause()):(t.classList.remove("score-list-on"),this.timerC.calcCurrentTime())}checkWin(t){for(let t=0;t<this.size;t+=1)for(let e=0;e<this.size;e+=1)if(t+e!==2*(this.size-1)&&this.win[t][e]!==this.arr[t][e])return!1;return this.playWinSound(),this.setWinMessage(t),this.setScore(),!0}setWinMessage(t){this.winBoard=document.querySelector(".board"),this.winBoard.classList.add("win"),this.winBoard.innerHTML+=`<div style="background-image: url(../assets/images/${this.imgNumb}.jpg);" class='win-text'>${t?"ЧИТЕР!":`Ура! Вы решили головоломку за ${document.querySelector(".time").innerHTML} и ${document.querySelector(".move").innerHTML} ходов</div>`}</div>`,setTimeout((()=>{this.winBoard.querySelector(".win-text").style.opacity=1}),50)}playWinSound(){this.soundOn&&(this.winSound.currentTime=0,this.winSound.play())}playSlideSound(){this.soundOn&&(this.slideSound.currentTime=0,this.slideSound.play())}dragStart(){setTimeout((()=>{this.classList.add("hide")}),0)}dragEnd(){this.classList.remove("hide")}dragEnter(){this.classList.add("hovered")}dragLeave(){this.classList.remove("hovered")}init(){this.scoreList=!1,this.randomImgNumber(150,1),this.history=[],this.movesCounter=0,document.querySelector(".move").innerHTML=this.movesCounter,this.size=document.getElementById("fieldSize").value,this.cellSize=parseFloat(this.boardWidth/this.size-2*this.marginSize).toFixed(3),this.removeBoard(),this.emptyX=this.size-1,this.emptyY=this.size-1,this.arr=this.createBoard(),this.win=this.createBoard(),this.shuffle(),this.renderBoard(),this.timerC.init(),document.querySelectorAll(".cell").forEach((t=>{t.addEventListener("mouseup",(t=>{const e=t.target;this.swap(parseInt(e.innerHTML,10))})),t.addEventListener("dragstart",this.dragStart),t.addEventListener("dragover",this.dragOver),t.addEventListener("drop",this.dragDrop),t.addEventListener("dragend",this.dragEnd),t.addEventListener("dragenter",this.dragEnter),t.addEventListener("dragleave",this.dragLeave)}))}load(){this.cellSize=parseFloat(this.boardWidth/this.size-2*this.marginSize).toFixed(3),document.querySelector(".move").innerHTML=this.movesCounter,this.removeBoard(),this.renderBoard(),this.win=this.createBoard(),this.timerC.init(),document.querySelectorAll(".cell").forEach((t=>{t.addEventListener("mouseup",(t=>{const e=t.target;this.swap(parseInt(e.innerHTML,10))})),t.addEventListener("dragstart",this.dragStart),t.addEventListener("dragover",this.dragOver),t.addEventListener("drop",this.dragDrop),t.addEventListener("dragend",this.dragEnd),t.addEventListener("dragenter",this.dragEnter),t.addEventListener("dragleave",this.dragLeave)}))}},i=document.createElement("header");i.classList.add("header"),i.innerHTML='<h1 class="heading">gem puzzle</h1>',document.body.appendChild(i);const s=document.createElement("div");s.classList.add("menu"),s.innerHTML=`  \n  <div class="settings">\n    <button class="new-game btn">New</button>\n    <button class="save btn">Save</button>\n    <button class="load btn">Load</button>\n    <button class="score btn">Score</button>\n    <button class="sound btn ${e.soundOn?"btn-on":""}">Sound</button>\n    <div class="size">\n      <select id="fieldSize">\n      <option selected="selected" value="4" disabled>Field size</option>\n        <option value="3">3</option>\n        <option value="4">4</option>\n        <option value="5">5</option>\n        <option value="6">6</option>\n        <option value="7">7</option>\n        <option value="8">8</option>\n      </select>\n    </div>\n    <button class="cheat btn">CHEAT</button>\n  </div>\n  <div class="counters">\n    <div class="timer"><span>Timer: </span><span class="time">0:00</span></div>\n    <div class="moves"><span>Moves: </span><span class="move">0</span></div>\n  </div>`,document.body.appendChild(s),e.init(),document.querySelector(".new-game").addEventListener("click",(()=>{e.init()})),document.querySelector(".save").addEventListener("click",(()=>{localStorage.setItem("gameSave",JSON.stringify({bgPosition:e.bgPosArr,history:e.history,size:e.size,boardTable:e.arr,time:e.timerC.currentTime,moves:e.movesCounter,zero:[e.emptyX,e.emptyY],imgNumb:e.imgNumb}))})),document.querySelector(".load").addEventListener("click",(()=>{const{bgPosition:t,history:i,size:s,boardTable:r,time:h,moves:n,zero:o,imgNumb:a}=JSON.parse(localStorage.getItem("gameSave"));e.bgPosArr=t,e.history=i,e.size=s,e.timerC.currentTime=h,e.movesCounter=n,e.arr=r,[e.emptyX,e.emptyY]=o,e.imgNumb=a,e.load(),e.timerC.load()})),document.getElementById("fieldSize").addEventListener("change",(()=>{e.init(),e.timerC.init()})),document.querySelector(".cheat").addEventListener("click",(()=>{e.timerC.timerPause(),e.back()})),document.querySelector(".sound").addEventListener("click",(t=>{e.toggleSound(),e.soundOn?t.target.classList.add("btn-on"):t.target.classList.remove("btn-on")})),document.querySelector(".score").addEventListener("click",(t=>{e.getScoreList(),e.scoreList?t.target.classList.add("btn-on"):t.target.classList.remove("btn-on")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZW0tcHV6emxlLy4vc3JjL1RpbWVyLmpzIiwid2VicGFjazovL2dlbS1wdXp6bGUvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZ2VtLXB1enpsZS8uL3NyYy9Cb2FyZC5qcyJdLCJuYW1lcyI6WyJUaW1lciIsInRoaXMiLCJjdXJyZW50VGltZSIsInRpbWUiLCJzZXRJbnRlcnZhbCIsInNlY1RvTWluQW5kU2VjIiwibWludXRlcyIsIk1hdGgiLCJmbG9vciIsInNlYyIsInRvRml4ZWQiLCJ0aW1lciIsInJlbmRlclRpbWVyIiwiY2xlYXJJbnRlcnZhbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsInRpbWVyU3RvcCIsImNhbGNDdXJyZW50VGltZSIsImJvYXJkIiwidGltZXJDIiwiaGlzdG9yeSIsInNpemUiLCJlbXB0eVgiLCJlbXB0eVkiLCJhbmltYXRpb25UaW1lIiwiYm9hcmRXaWR0aCIsIm1hcmdpblNpemUiLCJzb3VuZE9uIiwid2luU291bmQiLCJBdWRpbyIsInNsaWRlU291bmQiLCJ2b2x1bWUiLCJyZW1vdmVCb2FyZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWxlbSIsImJvZHkiLCJyZW1vdmVDaGlsZCIsImZpbmRFbGVtIiwieCIsImFyciIsImxlbmd0aCIsInkiLCJwYXJzZUludCIsIkVycm9yIiwiZHJhZ0Ryb3AiLCJlIiwiemVybyIsInRhcmdldCIsIm1vdmVhYmxlIiwiaXNOZWFyWmVybyIsInN0eWxlIiwib3JkZXIiLCJjaGVja0ZvcklkbGluZyIsInB1c2giLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJtYXgiLCJtaW4iLCJpbWdOdW1iIiwicmFuZG9tIiwicG9wIiwiYmFja1RpbWVyIiwiYWJzIiwiYmxYIiwiYmxZIiwic3BsaWNlIiwic2V0VGltZW91dCIsIm1vdmVBbmltYXRpb24iLCJ0ZW1wIiwicmVuZGVyQm9hcmQiLCJwbGF5U2xpZGVTb3VuZCIsImNoZWNrV2luIiwiZGlyZWN0aW9uIiwiY291bnRlciIsImJnUG9zQXJyIiwiaSIsImoiLCJyb3VuZCIsIm1vdmUiLCJjZWxsTnVtYmVyIiwiY2xhc3NOYW1lIiwiZHJhZ2dhYmxlIiwicHJldmVudERlZiIsImJHcG9zIiwiYmdGb3JDZWxsIiwiY2VsbFNpemUiLCJlbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImFkZCIsIndpZHRoIiwiYXBwZW5kQ2hpbGQiLCJyZW1QZXJUaWNrIiwidGltZVBhc3NlZCIsInRyYW5zZm9ybSIsImluQW5pbWF0aW9uIiwic3RhcnQiLCJEYXRlIiwibm93IiwiZHJhdyIsIm51bWJlciIsIm1vdmVzQ291bnRlciIsInRpbWVyUGF1c2UiLCJzY29yZUxpc3QiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwibW92ZXMiLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJzY29yZUVsZW0iLCJsaXN0IiwiY2hlYXQiLCJ3aW4iLCJwbGF5V2luU291bmQiLCJzZXRXaW5NZXNzYWdlIiwic2V0U2NvcmUiLCJ3aW5Cb2FyZCIsIm9wYWNpdHkiLCJwbGF5IiwicmFuZG9tSW1nTnVtYmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJ2YWx1ZSIsInBhcnNlRmxvYXQiLCJjcmVhdGVCb2FyZCIsInNodWZmbGUiLCJpbml0IiwiY2VsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJzd2FwIiwiZHJhZ1N0YXJ0IiwiZHJhZ092ZXIiLCJkcmFnRW5kIiwiZHJhZ0VudGVyIiwiZHJhZ0xlYXZlIiwiaGVhZGVyIiwibWVudSIsImJnUG9zaXRpb24iLCJib2FyZFRhYmxlIiwibG9hZCIsImJhY2siLCJ0b2dnbGVTb3VuZCIsImdldFNjb3JlTGlzdCJdLCJtYXBwaW5ncyI6Im1CQUFlLE1BQU1BLEVBQ25CLGNBQ0VDLEtBQUtDLFlBQWMsRUFHckIsa0JBQ0VELEtBQUtFLEtBQU9DLGFBQVksS0FDdEJILEtBQUtDLGFBQWUsRUFDcEJELEtBQUtJLG1CQUNK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UUFBVUEsRUFDaEJ6QyxFQUFNK0gsT0FDTi9ILEVBQU1DLE9BQU84SCxVQUdmcEksU0FBU2lILGVBQWUsYUFBYU8saUJBQWlCLFVBQVUsS0FDOURuSCxFQUFNaUgsT0FDTmpILEVBQU1DLE9BQU9nSCxVQUdmdEgsU0FBU0MsY0FBYyxVQUFVdUgsaUJBQWlCLFNBQVMsS0FDekRuSCxFQUFNQyxPQUFPbUYsYUFDYnBGLEVBQU1nSSxVQUdSckksU0FBU0MsY0FBYyxVQUFVdUgsaUJBQWlCLFNBQVVDLElBQzFEcEgsRUFBTWlJLGNBQ0ZqSSxFQUFNUyxRQUNSMkcsRUFBSXRGLE9BQU9PLFVBQVVrQyxJQUFJLFVBRXpCNkMsRUFBSXRGLE9BQU9PLFVBQVVDLE9BQU8sYUFJaEMzQyxTQUFTQyxjQUFjLFVBQVV1SCxpQkFBaUIsU0FBVUMsSUFDMURwSCxFQUFNa0ksZUFDRmxJLEVBQU1xRixVQUNSK0IsRUFBSXRGLE9BQU9PLFVBQVVrQyxJQUFJLFVBRXpCNkMsRUFBSXRGLE9BQU9PLFVBQVVDLE9BQU8sYyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGltZXIge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5jdXJyZW50VGltZSA9IDA7XHJcbiAgfVxyXG5cclxuICBjYWxjQ3VycmVudFRpbWUoKSB7XHJcbiAgICB0aGlzLnRpbWUgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuY3VycmVudFRpbWUgKz0gMTtcclxuICAgICAgdGhpcy5zZWNUb01pbkFuZFNlYygpO1xyXG4gICAgfSwgMTAwMCk7XHJcbiAgfVxyXG5cclxuICBzZWNUb01pbkFuZFNlYygpIHtcclxuICAgIHRoaXMubWludXRlcyA9IE1hdGguZmxvb3IodGhpcy5jdXJyZW50VGltZSAvIDYwKTtcclxuXHJcbiAgICB0aGlzLnNlYyA9ICh0aGlzLmN1cnJlbnRUaW1lICUgNjApLnRvRml4ZWQoMCk7XHJcbiAgICB0aGlzLnRpbWVyID0gYCR7dGhpcy5taW51dGVzfToke3RoaXMuc2VjIDwgMTAgPyAnMCcgOiAnJ30ke3RoaXMuc2VjfWA7XHJcbiAgICB0aGlzLnJlbmRlclRpbWVyKCk7XHJcbiAgfVxyXG5cclxuICB0aW1lclN0b3AoKSB7XHJcbiAgICBjbGVhckludGVydmFsKHRoaXMudGltZSk7XHJcbiAgICB0aGlzLnRpbWVyID0gJzA6MDAnO1xyXG4gICAgdGhpcy5yZW5kZXJUaW1lcigpO1xyXG4gIH1cclxuXHJcbiAgdGltZXJQYXVzZSgpIHtcclxuICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lKTtcclxuICB9XHJcblxyXG4gIHJlbmRlclRpbWVyKCkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRpbWUnKS5pbm5lckhUTUwgPSB0aGlzLnRpbWVyO1xyXG4gIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMudGltZXJTdG9wKCk7XHJcbiAgICB0aGlzLmN1cnJlbnRUaW1lID0gbnVsbDtcclxuICAgIHRoaXMuY2FsY0N1cnJlbnRUaW1lKCk7XHJcbiAgfVxyXG5cclxuICBsb2FkKCkge1xyXG4gICAgdGhpcy50aW1lclN0b3AoKTtcclxuICAgIHRoaXMuc2VjVG9NaW5BbmRTZWMoKTtcclxuICAgIHRoaXMucmVuZGVyVGltZXIoKTtcclxuXHJcbiAgICB0aGlzLmNhbGNDdXJyZW50VGltZSgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgQm9hcmQgZnJvbSAnLi9Cb2FyZC5qcyc7XHJcblxyXG5jb25zdCBib2FyZCA9IG5ldyBCb2FyZCgpO1xyXG5cclxuY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaGVhZGVyJyk7XHJcbmhlYWRlci5jbGFzc0xpc3QuYWRkKCdoZWFkZXInKTtcclxuaGVhZGVyLmlubmVySFRNTCA9ICc8aDEgY2xhc3M9XCJoZWFkaW5nXCI+Z2VtIHB1enpsZTwvaDE+JztcclxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChoZWFkZXIpO1xyXG5cclxuY29uc3QgbWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5tZW51LmNsYXNzTGlzdC5hZGQoJ21lbnUnKTtcclxuXHJcbm1lbnUuaW5uZXJIVE1MID0gYCAgXHJcbiAgPGRpdiBjbGFzcz1cInNldHRpbmdzXCI+XHJcbiAgICA8YnV0dG9uIGNsYXNzPVwibmV3LWdhbWUgYnRuXCI+TmV3PC9idXR0b24+XHJcbiAgICA8YnV0dG9uIGNsYXNzPVwic2F2ZSBidG5cIj5TYXZlPC9idXR0b24+XHJcbiAgICA8YnV0dG9uIGNsYXNzPVwibG9hZCBidG5cIj5Mb2FkPC9idXR0b24+XHJcbiAgICA8YnV0dG9uIGNsYXNzPVwic2NvcmUgYnRuXCI+U2NvcmU8L2J1dHRvbj5cclxuICAgIDxidXR0b24gY2xhc3M9XCJzb3VuZCBidG4gJHtib2FyZC5zb3VuZE9uID8gJ2J0bi1vbicgOiAnJ31cIj5Tb3VuZDwvYnV0dG9uPlxyXG4gICAgPGRpdiBjbGFzcz1cInNpemVcIj5cclxuICAgICAgPHNlbGVjdCBpZD1cImZpZWxkU2l6ZVwiPlxyXG4gICAgICA8b3B0aW9uIHNlbGVjdGVkPVwic2VsZWN0ZWRcIiB2YWx1ZT1cIjRcIiBkaXNhYmxlZD5GaWVsZCBzaXplPC9vcHRpb24+XHJcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjNcIj4zPC9vcHRpb24+XHJcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjRcIj40PC9vcHRpb24+XHJcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjVcIj41PC9vcHRpb24+XHJcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjZcIj42PC9vcHRpb24+XHJcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjdcIj43PC9vcHRpb24+XHJcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjhcIj44PC9vcHRpb24+XHJcbiAgICAgIDwvc2VsZWN0PlxyXG4gICAgPC9kaXY+XHJcbiAgICA8YnV0dG9uIGNsYXNzPVwiY2hlYXQgYnRuXCI+Q0hFQVQ8L2J1dHRvbj5cclxuICA8L2Rpdj5cclxuICA8ZGl2IGNsYXNzPVwiY291bnRlcnNcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJ0aW1lclwiPjxzcGFuPlRpbWVyOiA8L3NwYW4+PHNwYW4gY2xhc3M9XCJ0aW1lXCI+MDowMDwvc3Bhbj48L2Rpdj5cclxuICAgIDxkaXYgY2xhc3M9XCJtb3Zlc1wiPjxzcGFuPk1vdmVzOiA8L3NwYW4+PHNwYW4gY2xhc3M9XCJtb3ZlXCI+MDwvc3Bhbj48L2Rpdj5cclxuICA8L2Rpdj5gO1xyXG5cclxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtZW51KTtcclxuXHJcbmJvYXJkLmluaXQoKTtcclxuXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXctZ2FtZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGJvYXJkLmluaXQoKTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2F2ZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxyXG4gICAgJ2dhbWVTYXZlJyxcclxuICAgIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgYmdQb3NpdGlvbjogYm9hcmQuYmdQb3NBcnIsXHJcbiAgICAgIGhpc3Rvcnk6IGJvYXJkLmhpc3RvcnksXHJcbiAgICAgIHNpemU6IGJvYXJkLnNpemUsXHJcbiAgICAgIGJvYXJkVGFibGU6IGJvYXJkLmFycixcclxuICAgICAgdGltZTogYm9hcmQudGltZXJDLmN1cnJlbnRUaW1lLFxyXG4gICAgICBtb3ZlczogYm9hcmQubW92ZXNDb3VudGVyLFxyXG4gICAgICB6ZXJvOiBbIGJvYXJkLmVtcHR5WCwgYm9hcmQuZW1wdHlZIF0sXHJcbiAgICAgIGltZ051bWI6IGJvYXJkLmltZ051bWJcclxuICAgIH0pXHJcbiAgKTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9hZCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGNvbnN0IHsgYmdQb3NpdGlvbiwgaGlzdG9yeSwgc2l6ZSwgYm9hcmRUYWJsZSwgdGltZSwgbW92ZXMsIHplcm8sIGltZ051bWIgfSA9IEpTT04ucGFyc2UoXHJcbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2FtZVNhdmUnKVxyXG4gICk7XHJcbiAgYm9hcmQuYmdQb3NBcnIgPSBiZ1Bvc2l0aW9uO1xyXG4gIGJvYXJkLmhpc3RvcnkgPSBoaXN0b3J5O1xyXG4gIGJvYXJkLnNpemUgPSBzaXplO1xyXG4gIGJvYXJkLnRpbWVyQy5jdXJyZW50VGltZSA9IHRpbWU7XHJcbiAgYm9hcmQubW92ZXNDb3VudGVyID0gbW92ZXM7XHJcbiAgYm9hcmQuYXJyID0gYm9hcmRUYWJsZTtcclxuICBbIGJvYXJkLmVtcHR5WCwgYm9hcmQuZW1wdHlZIF0gPSB6ZXJvO1xyXG4gIGJvYXJkLmltZ051bWIgPSBpbWdOdW1iO1xyXG4gIGJvYXJkLmxvYWQoKTtcclxuICBib2FyZC50aW1lckMubG9hZCgpO1xyXG59KTtcclxuXHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZFNpemUnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgYm9hcmQuaW5pdCgpO1xyXG4gIGJvYXJkLnRpbWVyQy5pbml0KCk7XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoZWF0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgYm9hcmQudGltZXJDLnRpbWVyUGF1c2UoKTtcclxuICBib2FyZC5iYWNrKCk7XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNvdW5kJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgYm9hcmQudG9nZ2xlU291bmQoKTtcclxuICBpZiAoYm9hcmQuc291bmRPbikge1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdidG4tb24nKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdidG4tb24nKTtcclxuICB9XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNjb3JlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgYm9hcmQuZ2V0U2NvcmVMaXN0KCk7XHJcbiAgaWYgKGJvYXJkLnNjb3JlTGlzdCkge1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdidG4tb24nKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdidG4tb24nKTtcclxuICB9XHJcbn0pO1xyXG4iLCJpbXBvcnQgVGltZXIgZnJvbSAnLi9UaW1lci5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCb2FyZCB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLnRpbWVyQyA9IG5ldyBUaW1lcigpO1xyXG4gICAgdGhpcy5oaXN0b3J5ID0gW107XHJcbiAgICB0aGlzLnNpemUgPSA0O1xyXG4gICAgdGhpcy5lbXB0eVggPSAwO1xyXG4gICAgdGhpcy5lbXB0eVkgPSAwO1xyXG4gICAgdGhpcy5hbmltYXRpb25UaW1lID0gMjAwO1xyXG4gICAgdGhpcy5ib2FyZFdpZHRoID0gNDAuODtcclxuICAgIHRoaXMubWFyZ2luU2l6ZSA9IDAuMTtcclxuICAgIHRoaXMuc291bmRPbiA9IHRydWU7XHJcbiAgICB0aGlzLndpblNvdW5kID0gbmV3IEF1ZGlvKCcuLi9hc3NldHMvd2luLm1wMycpO1xyXG4gICAgdGhpcy5zbGlkZVNvdW5kID0gbmV3IEF1ZGlvKCcuLi9hc3NldHMvc2xpZGUubXAzJyk7XHJcbiAgICB0aGlzLnNsaWRlU291bmQudm9sdW1lID0gMC4yO1xyXG4gICAgdGhpcy5yZW1vdmVCb2FyZCA9ICgpID0+IHtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJvYXJkJykuZm9yRWFjaCgoZWxlbSkgPT4ge1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWxlbSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZmluZEVsZW0gPSAoZWxlbSkgPT4ge1xyXG4gICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMuYXJyLmxlbmd0aDsgeCArPSAxKSB7XHJcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLmFyci5sZW5ndGg7IHkgKz0gMSkge1xyXG4gICAgICAgICAgaWYgKHRoaXMuYXJyW3hdW3ldID09PSBwYXJzZUludChlbGVtLmlubmVySFRNTCwgMTApKSByZXR1cm4gWyB4LCB5IF07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihlbGVtKTtcclxuICAgIH07XHJcbiAgICB0aGlzLmRyYWdEcm9wID0gKGUpID0+IHtcclxuICAgICAgY29uc3QgemVybyA9IGUudGFyZ2V0O1xyXG4gICAgICBjb25zdCBtb3ZlYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oaWRlJyk7XHJcbiAgICAgIGNvbnN0IFsgeCwgeSBdID0gdGhpcy5maW5kRWxlbShtb3ZlYWJsZSk7XHJcbiAgICAgIGlmICh0aGlzLmlzTmVhclplcm8oeCwgeSkpIHtcclxuICAgICAgICBbIHRoaXMuYXJyW3hdW3ldLCB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldIF0gPSBbXHJcbiAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldLFxyXG4gICAgICAgICAgdGhpcy5hcnJbeF1beV1cclxuICAgICAgICBdO1xyXG4gICAgICAgIFsgdGhpcy5lbXB0eVgsIHRoaXMuZW1wdHlZIF0gPSBbIHgsIHkgXTtcclxuICAgICAgICBbIHplcm8uc3R5bGUub3JkZXIsIG1vdmVhYmxlLnN0eWxlLm9yZGVyIF0gPSBbIG1vdmVhYmxlLnN0eWxlLm9yZGVyLCB6ZXJvLnN0eWxlLm9yZGVyIF07XHJcbiAgICAgICAgdGhpcy5jaGVja0ZvcklkbGluZygpO1xyXG4gICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKFsgdGhpcy5lbXB0eVgsIHRoaXMuZW1wdHlZIF0pO1xyXG4gICAgICB9XHJcbiAgICAgIHplcm8uY2xhc3NMaXN0LnJlbW92ZSgnaG92ZXJlZCcpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHJhbmRvbUltZ051bWJlcihtYXgsIG1pbikge1xyXG4gICAgdGhpcy5pbWdOdW1iID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW4pO1xyXG4gIH1cclxuXHJcbiAgYmFjaygpIHtcclxuICAgIHRoaXMuaGlzdG9yeS5wb3AoKTtcclxuICAgIHRoaXMuYmFja1RpbWVyKCk7XHJcbiAgfVxyXG5cclxuICBpc05lYXJaZXJvKHgsIHkpIHtcclxuICAgIHJldHVybiAhIShcclxuICAgICAgKE1hdGguYWJzKHRoaXMuZW1wdHlYIC0geCkgPD0gMSAmJiB0aGlzLmVtcHR5WSAtIHkgPT09IDApIHx8XHJcbiAgICAgIChNYXRoLmFicyh0aGlzLmVtcHR5WSAtIHkpIDw9IDEgJiYgdGhpcy5lbXB0eVggLSB4ID09PSAwKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGNoZWNrRm9ySWRsaW5nKCkge1xyXG4gICAgY29uc3QgWyBibFgsIGJsWSBdID0gdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeS5sZW5ndGggLSAyXTtcclxuICAgIGlmICh0aGlzLmVtcHR5WCA9PT0gYmxYICYmIHRoaXMuZW1wdHlZID09PSBibFkpIHRoaXMuaGlzdG9yeS5zcGxpY2UoLTIsIDIpO1xyXG4gIH1cclxuXHJcbiAgYmFja1RpbWVyKCkge1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmhpc3RvcnkubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3QgWyB4LCB5IF0gPSB0aGlzLmhpc3RvcnkucG9wKCk7XHJcbiAgICAgICAgdGhpcy5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2NlbGwtJHt0aGlzLmFyclt4XVt5XX1gKTtcclxuXHJcbiAgICAgICAgdGhpcy5tb3ZlQW5pbWF0aW9uKFsgeCwgeSBdKTtcclxuXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB0ZW1wID0gdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXTtcclxuICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV0gPSB0aGlzLmFyclt4XVt5XTtcclxuICAgICAgICAgIHRoaXMuYXJyW3hdW3ldID0gdGVtcDtcclxuICAgICAgICAgIHRoaXMuZW1wdHlYID0geDtcclxuICAgICAgICAgIHRoaXMuZW1wdHlZID0geTtcclxuICAgICAgICAgIHRoaXMucmVtb3ZlQm9hcmQoKTtcclxuICAgICAgICAgIHRoaXMucmVuZGVyQm9hcmQoKTtcclxuICAgICAgICAgIHRoaXMucGxheVNsaWRlU291bmQoKTtcclxuICAgICAgICAgIHRoaXMuYmFja1RpbWVyKCk7XHJcbiAgICAgICAgfSwgdGhpcy5hbmltYXRpb25UaW1lKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmNoZWNrV2luKHRydWUpO1xyXG4gICAgICB9XHJcbiAgICB9LCB0aGlzLmFuaW1hdGlvblRpbWUpO1xyXG4gIH1cclxuXHJcbiAgbW92ZShkaXJlY3Rpb24pIHtcclxuICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XHJcbiAgICAgIGNhc2UgJ3VwJzpcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0aGlzLmVtcHR5WCAhPT0gMCAmJlxyXG4gICAgICAgICAgKHRoaXMuaGlzdG9yeS5sZW5ndGggPD0gMSB8fCB0aGlzLmVtcHR5WCAtIDEgIT09IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnkubGVuZ3RoIC0gMl1bMF0pXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldID0gdGhpcy5hcnJbdGhpcy5lbXB0eVggLSAxXVt0aGlzLmVtcHR5WV07XHJcbiAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WCAtIDFdW3RoaXMuZW1wdHlZXSA9IDA7XHJcbiAgICAgICAgICB0aGlzLmVtcHR5WCAtPSAxO1xyXG4gICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2goWyB0aGlzLmVtcHR5WCwgdGhpcy5lbXB0eVkgXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuY291bnRlciAtPSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2Rvd24nOlxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHRoaXMuZW1wdHlYICE9PSB0aGlzLnNpemUgLSAxICYmXHJcbiAgICAgICAgICAodGhpcy5oaXN0b3J5Lmxlbmd0aCA8PSAxIHx8IHRoaXMuZW1wdHlYICsgMSAhPT0gdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeS5sZW5ndGggLSAyXVswXSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV0gPSB0aGlzLmFyclt0aGlzLmVtcHR5WCArIDFdW3RoaXMuZW1wdHlZXTtcclxuICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYICsgMV1bdGhpcy5lbXB0eVldID0gMDtcclxuICAgICAgICAgIHRoaXMuZW1wdHlYICs9IDE7XHJcbiAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChbIHRoaXMuZW1wdHlYLCB0aGlzLmVtcHR5WSBdKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5jb3VudGVyIC09IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgdGhpcy5lbXB0eVkgIT09IHRoaXMuc2l6ZSAtIDEgJiZcclxuICAgICAgICAgICh0aGlzLmhpc3RvcnkubGVuZ3RoIDw9IDEgfHwgdGhpcy5lbXB0eVkgKyAxICE9PSB0aGlzLmhpc3RvcnlbdGhpcy5oaXN0b3J5Lmxlbmd0aCAtIDJdWzFdKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXSA9IHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WSArIDFdO1xyXG4gICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZICsgMV0gPSAwO1xyXG4gICAgICAgICAgdGhpcy5lbXB0eVkgKz0gMTtcclxuICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKFsgdGhpcy5lbXB0eVgsIHRoaXMuZW1wdHlZIF0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmNvdW50ZXIgLT0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHRoaXMuZW1wdHlZICE9PSAwICYmXHJcbiAgICAgICAgICAodGhpcy5oaXN0b3J5Lmxlbmd0aCA8PSAxIHx8IHRoaXMuZW1wdHlZIC0gMSAhPT0gdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeS5sZW5ndGggLSAyXVsxXSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV0gPSB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVkgLSAxXTtcclxuICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WSAtIDFdID0gMDtcclxuICAgICAgICAgIHRoaXMuZW1wdHlZIC09IDE7XHJcbiAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChbIHRoaXMuZW1wdHlYLCB0aGlzLmVtcHR5WSBdKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5jb3VudGVyIC09IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignPjooJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjcmVhdGVCb2FyZCgpIHtcclxuICAgIGNvbnN0IGFyciA9IFtdO1xyXG5cclxuICAgIHRoaXMuYmdQb3NBcnIgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zaXplOyBpICs9IDEpIHtcclxuICAgICAgYXJyW2ldID0gW107XHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5zaXplOyBqICs9IDEpIHtcclxuICAgICAgICBpZiAoaSArIGogIT09ICh0aGlzLnNpemUgLSAxKSAqIDIpIHtcclxuICAgICAgICAgIGFycltpXVtqXSA9IGkgKiB0aGlzLnNpemUgKyBqICsgMTtcclxuICAgICAgICAgIHRoaXMuYmdQb3NBcnIucHVzaChcclxuICAgICAgICAgICAgYCR7TWF0aC5yb3VuZCgxMDAgLyAodGhpcy5zaXplIC0gMSkgKiBqKX0lICR7TWF0aC5yb3VuZCgxMDAgLyAodGhpcy5zaXplIC0gMSkgKiBpKX0lYFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYXJyW2ldW2pdID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcnI7XHJcbiAgfVxyXG5cclxuICBzaHVmZmxlKCkge1xyXG4gICAgdGhpcy5oaXN0b3J5LnB1c2goWyB0aGlzLmVtcHR5WCwgdGhpcy5lbXB0eVkgXSk7XHJcbiAgICBmb3IgKHRoaXMuY291bnRlciA9IDA7IHRoaXMuY291bnRlciA8IHRoaXMuc2l6ZSAqKiAzOyB0aGlzLmNvdW50ZXIgKz0gMSkge1xyXG4gICAgICBzd2l0Y2ggKE1hdGguZmxvb3IoNCAqIE1hdGgucmFuZG9tKCkpKSB7XHJcbiAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgLy8gIE1PVkUgVVBcclxuXHJcbiAgICAgICAgICB0aGlzLm1vdmUoJ3VwJyk7XHJcblxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgLy8gIE1PVkUgUklHSFRcclxuICAgICAgICAgIHRoaXMubW92ZSgncmlnaHQnKTtcclxuXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAvLyAgTU9WRSBET1dOXHJcbiAgICAgICAgICB0aGlzLm1vdmUoJ2Rvd24nKTtcclxuXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAvLyAgTU9WRSBMRUZUXHJcbiAgICAgICAgICB0aGlzLm1vdmUoJ2xlZnQnKTtcclxuXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCc+OignKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyQm9hcmQoKSB7XHJcbiAgICBsZXQgYm9hcmQgPSBgPGRpdiBjbGFzcz1cInNjb3JlLWxpc3RcIj50ZXN0PC9kaXY+YDtcclxuICAgIGNvbnN0IGJvYXJkV2lkdGggPSBgJHt0aGlzLmJvYXJkV2lkdGh9cmVtYDtcclxuICAgIGxldCBjZWxsTnVtYmVyO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwLCBvcmRlciA9IDE7IGkgPCB0aGlzLnNpemU7IGkgKz0gMSkge1xyXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuc2l6ZTsgaiArPSAxKSB7XHJcbiAgICAgICAgY2VsbE51bWJlciA9IHRoaXMuYXJyW2ldW2pdO1xyXG5cclxuICAgICAgICBjb25zdCBjbGFzc05hbWUgPSBjZWxsTnVtYmVyID8gJ2NlbGwnIDogJ2NlbGwgZW1wdHknO1xyXG5cclxuICAgICAgICBjb25zdCBkcmFnZ2FibGUgPSAhIWNlbGxOdW1iZXI7XHJcblxyXG4gICAgICAgIGNvbnN0IHByZXZlbnREZWYgPSAhY2VsbE51bWJlciA/IFwib25kcmFnb3ZlciA9ICdldmVudC5wcmV2ZW50RGVmYXVsdCgpJ1wiIDogJyc7XHJcbiAgICAgICAgY29uc3QgYkdwb3MgPSB0aGlzLmJnUG9zQXJyW2NlbGxOdW1iZXIgLSAxXTtcclxuICAgICAgICBjb25zdCBiZ0ZvckNlbGwgPSBjZWxsTnVtYmVyXHJcbiAgICAgICAgICA/IGBiYWNrZ3JvdW5kOiB1cmwoLi4vYXNzZXRzL2ltYWdlcy8ke3RoaXNcclxuICAgICAgICAgICAgICAuaW1nTnVtYn0uanBnKTsgYmFja2dyb3VuZC1wb3NpdGlvbjogJHtiR3Bvc307IGJhY2tncm91bmQtc2l6ZTogJHtib2FyZFdpZHRofTtgXHJcbiAgICAgICAgICA6ICcnO1xyXG4gICAgICAgIG9yZGVyICs9IDE7XHJcblxyXG4gICAgICAgIGJvYXJkICs9IGA8ZGl2IFxyXG4gICAgICAgICR7cHJldmVudERlZn1cclxuICAgICAgICAgIHN0eWxlPSd3aWR0aDoke3RoaXMuY2VsbFNpemV9cmVtO1xyXG4gICAgICAgICAgaGVpZ2h0OiR7dGhpcy5jZWxsU2l6ZX1yZW07XHJcbiAgICAgICAgICBvcmRlcjoke29yZGVyfTtcclxuICAgICAgICAgICR7YmdGb3JDZWxsfSdcclxuICAgICAgICAgIGlkPSdjZWxsLSR7Y2VsbE51bWJlcn0nXHJcbiAgICAgICAgICBjbGFzcz0nJHtjbGFzc05hbWV9J1xyXG4gICAgICAgICAgZHJhZ2dhYmxlPVwiJHtkcmFnZ2FibGV9XCI+JHtjZWxsTnVtYmVyfTwvZGl2PmA7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2JvYXJkJyk7XHJcbiAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gYm9hcmRXaWR0aDtcclxuICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gYm9hcmQ7XHJcblxyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICB9XHJcblxyXG4gIGRyYXcoKSB7XHJcbiAgICBjb25zdCByZW1QZXJUaWNrID0gdGhpcy5jZWxsU2l6ZSAvIHRoaXMuYW5pbWF0aW9uVGltZSAqIHRoaXMudGltZVBhc3NlZDtcclxuICAgIHN3aXRjaCAodGhpcy5kaXJlY3Rpb24pIHtcclxuICAgICAgY2FzZSAndXAnOlxyXG4gICAgICAgIHRoaXMuZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCAwLCAkey1yZW1QZXJUaWNrfXJlbSlgO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdkb3duJzpcclxuICAgICAgICB0aGlzLmUuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSggMCwgJHtyZW1QZXJUaWNrfXJlbSlgO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdsZWZ0JzpcclxuICAgICAgICB0aGlzLmUuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSggJHstcmVtUGVyVGlja31yZW0sIDApYDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgIHRoaXMuZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCAke3JlbVBlclRpY2t9cmVtLCAwKWA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCc+OignKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG1vdmVBbmltYXRpb24oWyB4LCB5IF0pIHtcclxuICAgIGlmICh0aGlzLmVtcHR5WCA8IHgpIHtcclxuICAgICAgdGhpcy5kaXJlY3Rpb24gPSAndXAnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmVtcHR5WCA+IHgpIHtcclxuICAgICAgdGhpcy5kaXJlY3Rpb24gPSAnZG93bic7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZW1wdHlZIDwgeSkge1xyXG4gICAgICB0aGlzLmRpcmVjdGlvbiA9ICdsZWZ0JztcclxuICAgIH0gZWxzZSBpZiAodGhpcy5lbXB0eVkgPiB5KSB7XHJcbiAgICAgIHRoaXMuZGlyZWN0aW9uID0gJ3JpZ2h0JztcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmluQW5pbWF0aW9uID0gdHJ1ZTtcclxuICAgIHRoaXMuc3RhcnQgPSBEYXRlLm5vdygpO1xyXG5cclxuICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIHRoaXMudGltZVBhc3NlZCA9IERhdGUubm93KCkgLSB0aGlzLnN0YXJ0O1xyXG5cclxuICAgICAgaWYgKHRoaXMudGltZVBhc3NlZCA+PSB0aGlzLmFuaW1hdGlvblRpbWUpIHtcclxuICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpO1xyXG4gICAgICAgIHRoaXMuaW5BbmltYXRpb24gPSBmYWxzZTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgfSwgMjApO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlU291bmQoKSB7XHJcbiAgICB0aGlzLnNvdW5kT24gPSAhdGhpcy5zb3VuZE9uO1xyXG4gIH1cclxuXHJcbiAgc3dhcChudW1iZXIpIHtcclxuICAgIGlmICh0aGlzLmluQW5pbWF0aW9uKSByZXR1cm47XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFyci5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuYXJyW2ldLmxlbmd0aDsgaiArPSAxKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXJyW2ldW2pdID09PSBudW1iZXIpIHtcclxuICAgICAgICAgIGlmICh0aGlzLmlzTmVhclplcm8oaSwgaikpIHtcclxuICAgICAgICAgICAgLy8gTW92ZSBjb3VudGVyXHJcbiAgICAgICAgICAgIHRoaXMubW92ZXNDb3VudGVyICs9IDE7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb3ZlJykuaW5uZXJIVE1MID0gdGhpcy5tb3Zlc0NvdW50ZXI7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB6ZXJvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2NlbGwtJHt0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldfWApO1xyXG4gICAgICAgICAgICB0aGlzLmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjY2VsbC0ke3RoaXMuYXJyW2ldW2pdfWApO1xyXG5cclxuICAgICAgICAgICAgLy8gIGZpbmQgd2hlcmUgYXJlIHdlIG1vdmluZ1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVBbmltYXRpb24oWyBpLCBqIF0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wbGF5U2xpZGVTb3VuZCgpO1xyXG5cclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHplcm8uc3R5bGUub3JkZXI7XHJcbiAgICAgICAgICAgICAgemVyby5zdHlsZS5vcmRlciA9IHRoaXMuZS5zdHlsZS5vcmRlcjtcclxuICAgICAgICAgICAgICB0aGlzLmUuc3R5bGUub3JkZXIgPSB0ZW1wO1xyXG5cclxuICAgICAgICAgICAgICB0aGlzLmUuc3R5bGUudHJhbnNmb3JtID0gJyc7XHJcblxyXG4gICAgICAgICAgICAgIGlmICh0aGlzLmVtcHR5WCA9PT0gdGhpcy5lbXB0eVkgJiYgdGhpcy5lbXB0eVkgPT09IHRoaXMuc2l6ZSAtIDEpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrV2luKCkpIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy50aW1lckMudGltZXJQYXVzZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgdGhpcy5hbmltYXRpb25UaW1lKTtcclxuICAgICAgICAgICAgWyB0aGlzLmFycltpXVtqXSwgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXSBdID0gW1xyXG4gICAgICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV0sXHJcbiAgICAgICAgICAgICAgdGhpcy5hcnJbaV1bal1cclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgdGhpcy5lbXB0eVggPSBpO1xyXG4gICAgICAgICAgICB0aGlzLmVtcHR5WSA9IGo7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNoZWNrRm9ySWRsaW5nKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKFsgdGhpcy5lbXB0eVgsIHRoaXMuZW1wdHlZIF0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRTY29yZSgpIHtcclxuICAgIGxldCBzY29yZUxpc3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzY29yZS1saXN0JykpIHx8IFtdO1xyXG4gICAgc2NvcmVMaXN0LnB1c2goeyBtb3ZlczogdGhpcy5tb3Zlc0NvdW50ZXIsIHNpemU6IHRoaXMuc2l6ZSwgdGltZTogdGhpcy50aW1lckMudGltZXIgfSk7XHJcbiAgICBpZiAoc2NvcmVMaXN0Lmxlbmd0aCA+IDEwKSB7XHJcbiAgICAgIHNjb3JlTGlzdC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGEubW92ZXMgLSBiLm1vdmVzO1xyXG4gICAgICB9KTtcclxuICAgICAgc2NvcmVMaXN0ID0gc2NvcmVMaXN0LnNsaWNlKDAsIDEwKTtcclxuICAgIH1cclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzY29yZS1saXN0JywgSlNPTi5zdHJpbmdpZnkoc2NvcmVMaXN0KSk7XHJcbiAgfVxyXG5cclxuICBnZXRTY29yZUxpc3QoKSB7XHJcbiAgICB0aGlzLnNjb3JlTGlzdCA9ICF0aGlzLnNjb3JlTGlzdDtcclxuXHJcbiAgICBjb25zdCBzY29yZUVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2NvcmUtbGlzdCcpO1xyXG4gICAgY29uc3Qgc2NvcmVMaXN0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2NvcmUtbGlzdCcpKSB8fCBbXTtcclxuICAgIGxldCBsaXN0ID0gJyc7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IHNjb3JlTGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGkgLT0gMSkge1xyXG4gICAgICBsaXN0ICs9IGA8bGk+U2l6ZTogJHtzY29yZUxpc3RbaV0uc2l6ZX0sJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7TW92ZXM6ICR7c2NvcmVMaXN0W2ldXHJcbiAgICAgICAgLm1vdmVzfSwmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDtUaW1lOiAke3Njb3JlTGlzdFtpXS50aW1lfTwvbGk+YDtcclxuICAgIH1cclxuICAgIHNjb3JlRWxlbS5pbm5lckhUTUwgPSBgPGgyPkJlc3QgU2NvcmVzPC9oMj5cclxuICAgICAgPG9sIGNsYXNzPVwic2NvcmVcIj4ke2xpc3R9PC9vbD5gO1xyXG4gICAgaWYgKHRoaXMuc2NvcmVMaXN0KSB7XHJcbiAgICAgIHNjb3JlRWxlbS5jbGFzc0xpc3QuYWRkKCdzY29yZS1saXN0LW9uJyk7XHJcbiAgICAgIHRoaXMudGltZXJDLnRpbWVyUGF1c2UoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNjb3JlRWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdzY29yZS1saXN0LW9uJyk7XHJcbiAgICAgIHRoaXMudGltZXJDLmNhbGNDdXJyZW50VGltZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2hlY2tXaW4oY2hlYXQpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zaXplOyBpICs9IDEpIHtcclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnNpemU7IGogKz0gMSkge1xyXG4gICAgICAgIGlmIChpICsgaiAhPT0gKHRoaXMuc2l6ZSAtIDEpICogMikge1xyXG4gICAgICAgICAgaWYgKHRoaXMud2luW2ldW2pdICE9PSB0aGlzLmFycltpXVtqXSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5wbGF5V2luU291bmQoKTtcclxuICAgIHRoaXMuc2V0V2luTWVzc2FnZShjaGVhdCk7XHJcbiAgICB0aGlzLnNldFNjb3JlKCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHNldFdpbk1lc3NhZ2UoY2hlYXQpIHtcclxuICAgIHRoaXMud2luQm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYm9hcmQnKTtcclxuICAgIHRoaXMud2luQm9hcmQuY2xhc3NMaXN0LmFkZCgnd2luJyk7XHJcblxyXG4gICAgdGhpcy53aW5Cb2FyZC5pbm5lckhUTUwgKz0gYDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoLi4vYXNzZXRzL2ltYWdlcy8ke3RoaXNcclxuICAgICAgLmltZ051bWJ9LmpwZyk7XCIgY2xhc3M9J3dpbi10ZXh0Jz4ke2NoZWF0XHJcbiAgICAgID8gJ9Cn0JjQotCV0KAhJ1xyXG4gICAgICA6IGDQo9GA0LAhINCS0Ysg0YDQtdGI0LjQu9C4INCz0L7Qu9C+0LLQvtC70L7QvNC60YMg0LfQsCAke2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aW1lJylcclxuICAgICAgICAgIC5pbm5lckhUTUx9INC4ICR7ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vdmUnKS5pbm5lckhUTUx9INGF0L7QtNC+0LI8L2Rpdj5gfTwvZGl2PmA7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy53aW5Cb2FyZC5xdWVyeVNlbGVjdG9yKCcud2luLXRleHQnKS5zdHlsZS5vcGFjaXR5ID0gMTtcclxuICAgIH0sIDUwKTtcclxuICB9XHJcblxyXG4gIHBsYXlXaW5Tb3VuZCgpIHtcclxuICAgIGlmICghdGhpcy5zb3VuZE9uKSByZXR1cm47XHJcbiAgICB0aGlzLndpblNvdW5kLmN1cnJlbnRUaW1lID0gMDtcclxuICAgIHRoaXMud2luU291bmQucGxheSgpO1xyXG4gIH1cclxuXHJcbiAgcGxheVNsaWRlU291bmQoKSB7XHJcbiAgICBpZiAoIXRoaXMuc291bmRPbikgcmV0dXJuO1xyXG4gICAgdGhpcy5zbGlkZVNvdW5kLmN1cnJlbnRUaW1lID0gMDtcclxuICAgIHRoaXMuc2xpZGVTb3VuZC5wbGF5KCk7XHJcbiAgfVxyXG5cclxuICBkcmFnU3RhcnQoKSB7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XHJcbiAgICB9LCAwKTtcclxuICB9XHJcblxyXG4gIGRyYWdFbmQoKSB7XHJcbiAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcclxuICB9XHJcblxyXG4gIGRyYWdFbnRlcigpIHtcclxuICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnaG92ZXJlZCcpO1xyXG4gIH1cclxuXHJcbiAgZHJhZ0xlYXZlKCkge1xyXG4gICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdob3ZlcmVkJyk7XHJcbiAgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5zY29yZUxpc3QgPSBmYWxzZTtcclxuICAgIHRoaXMucmFuZG9tSW1nTnVtYmVyKDE1MCwgMSk7XHJcbiAgICB0aGlzLmhpc3RvcnkgPSBbXTtcclxuICAgIHRoaXMubW92ZXNDb3VudGVyID0gMDtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb3ZlJykuaW5uZXJIVE1MID0gdGhpcy5tb3Zlc0NvdW50ZXI7XHJcbiAgICB0aGlzLnNpemUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRTaXplJykudmFsdWU7XHJcblxyXG4gICAgdGhpcy5jZWxsU2l6ZSA9IHBhcnNlRmxvYXQodGhpcy5ib2FyZFdpZHRoIC8gdGhpcy5zaXplIC0gMiAqIHRoaXMubWFyZ2luU2l6ZSkudG9GaXhlZCgzKTtcclxuXHJcbiAgICB0aGlzLnJlbW92ZUJvYXJkKCk7XHJcblxyXG4gICAgdGhpcy5lbXB0eVggPSB0aGlzLnNpemUgLSAxO1xyXG4gICAgdGhpcy5lbXB0eVkgPSB0aGlzLnNpemUgLSAxO1xyXG5cclxuICAgIHRoaXMuYXJyID0gdGhpcy5jcmVhdGVCb2FyZCgpO1xyXG4gICAgdGhpcy53aW4gPSB0aGlzLmNyZWF0ZUJvYXJkKCk7XHJcblxyXG4gICAgdGhpcy5zaHVmZmxlKCk7XHJcblxyXG4gICAgdGhpcy5yZW5kZXJCb2FyZCgpO1xyXG4gICAgdGhpcy50aW1lckMuaW5pdCgpO1xyXG5cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJykuZm9yRWFjaCgoY2VsbCkgPT4ge1xyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZWxlbSA9IGV2dC50YXJnZXQ7XHJcbiAgICAgICAgdGhpcy5zd2FwKHBhcnNlSW50KGVsZW0uaW5uZXJIVE1MLCAxMCkpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgdGhpcy5kcmFnU3RhcnQpO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoaXMuZHJhZ092ZXIpO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgdGhpcy5kcmFnRHJvcCk7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCB0aGlzLmRyYWdFbmQpO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCB0aGlzLmRyYWdFbnRlcik7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIHRoaXMuZHJhZ0xlYXZlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgbG9hZCgpIHtcclxuICAgIHRoaXMuY2VsbFNpemUgPSBwYXJzZUZsb2F0KHRoaXMuYm9hcmRXaWR0aCAvIHRoaXMuc2l6ZSAtIDIgKiB0aGlzLm1hcmdpblNpemUpLnRvRml4ZWQoMyk7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW92ZScpLmlubmVySFRNTCA9IHRoaXMubW92ZXNDb3VudGVyO1xyXG4gICAgdGhpcy5yZW1vdmVCb2FyZCgpO1xyXG4gICAgdGhpcy5yZW5kZXJCb2FyZCgpO1xyXG4gICAgdGhpcy53aW4gPSB0aGlzLmNyZWF0ZUJvYXJkKCk7XHJcbiAgICB0aGlzLnRpbWVyQy5pbml0KCk7XHJcblxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKS5mb3JFYWNoKChjZWxsKSA9PiB7XHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIChldnQpID0+IHtcclxuICAgICAgICBjb25zdCBlbGVtID0gZXZ0LnRhcmdldDtcclxuICAgICAgICB0aGlzLnN3YXAocGFyc2VJbnQoZWxlbS5pbm5lckhUTUwsIDEwKSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCB0aGlzLmRyYWdTdGFydCk7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgdGhpcy5kcmFnT3Zlcik7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCB0aGlzLmRyYWdEcm9wKTtcclxuXHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIHRoaXMuZHJhZ0VuZCk7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbnRlcicsIHRoaXMuZHJhZ0VudGVyKTtcclxuXHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgdGhpcy5kcmFnTGVhdmUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=