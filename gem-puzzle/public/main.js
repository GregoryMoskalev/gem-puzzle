(()=>{"use strict";const t=new class{constructor(){this.history=[],this.size=4,this.emptyX=this.size-1,this.emptyY=this.size-1,this.arr=[]}move(t){switch(t){case"up":this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX-1][this.emptyY],this.arr[this.emptyX-1][this.emptyY]=0,this.emptyX-=1;break;case"down":this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX+1][this.emptyY],this.arr[this.emptyX+1][this.emptyY]=0,this.emptyX+=1;break;case"right":this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX][this.emptyY+1],this.arr[this.emptyX][this.emptyY+1]=0,this.emptyY+=1;break;case"left":this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX][this.emptyY-1],this.arr[this.emptyX][this.emptyY-1]=0,this.emptyY-=1;break;default:throw new Error(">:(")}}shuffle(){this.history.push([this.emptyX,this.emptyY]);for(let t=0;t<80;t+=1)switch(Math.floor(4*Math.random())){case 0:0!==this.emptyX?this.move("up"):this.move("down"),this.history.push([this.emptyX,this.emptyY]);break;case 1:this.emptyY!==this.size-1?this.move("right"):this.move("left"),this.history.push([this.emptyX,this.emptyY]);break;case 2:this.emptyX!==this.size-1?this.move("down"):this.move("up"),this.history.push([this.emptyX,this.emptyY]);break;case 3:0!==this.emptyY?this.move("left"):(this.move("right"),this.history.push([this.emptyX,this.emptyY]));break;default:throw t-=1,new Error(">:(")}return this.arr}renderBoard(){let t,s="";for(let e=0,i=1;e<this.size;e+=1)for(let h=0;h<this.size;h+=1){t=this.arr[e][h];const r=this.arr[e][h]?"cell":"empty";i+=1,s+=`<div style='order:${i};' id='cell-${t}' class='${r}'>${t}</div>`}return s}createBoard(){for(let t=0;t<this.size;t+=1){this.arr[t]=[];for(let s=0;s<this.size;s+=1)t+s!==2*(this.size-1)?this.arr[t][s]=t*this.size+s+1:this.arr[t][s]=0}return this.arr=this.shuffle(),console.table(this.arr),this.renderBoard()}swap(t){for(let s=0;s<this.arr.length;s+=1)for(let e=0;e<this.arr[s].length;e+=1)if(this.arr[s][e]===t&&(Math.abs(this.emptyX-s)<=1&&this.emptyY-e==0||Math.abs(this.emptyY-e)<=1&&this.emptyX-s==0)){const t=document.querySelector("#cell-"+this.arr[this.emptyX][this.emptyY]),i=document.querySelector("#cell-"+this.arr[s][e]),h=t.style.order;return t.style.order=i.style.order,i.style.order=h,[this.arr[s][e],this.arr[this.emptyX][this.emptyY]]=[this.arr[this.emptyX][this.emptyY],this.arr[s][e]],this.emptyX=s,this.emptyY=e,void console.table(this.arr)}}},s=document.createElement("div");s.classList.add("board"),s.innerHTML=t.createBoard(),document.body.appendChild(s),document.querySelectorAll(".cell").forEach((s=>{s.addEventListener("mousedown",(s=>{const e=s.target;t.swap(parseInt(e.innerHTML,10))}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZW0tcHV6emxlLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL2dlbS1wdXp6bGUvLi9zcmMvYm9hcmQuanMiXSwibmFtZXMiOlsiYm9hcmQiLCJ0aGlzIiwiaGlzdG9yeSIsInNpemUiLCJlbXB0eVgiLCJlbXB0eVkiLCJhcnIiLCJkaXJlY3Rpb24iLCJFcnJvciIsInB1c2giLCJpIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibW92ZSIsImNlbGxOdW1iZXIiLCJvcmRlciIsImoiLCJjbGFzc05hbWUiLCJzaHVmZmxlIiwiY29uc29sZSIsInRhYmxlIiwicmVuZGVyQm9hcmQiLCJudW1iZXIiLCJsZW5ndGgiLCJhYnMiLCJ6ZXJvIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZSIsInRlbXAiLCJzdHlsZSIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbm5lckhUTUwiLCJjcmVhdGVCb2FyZCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiY2VsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJlbGVtIiwidGFyZ2V0Iiwic3dhcCIsInBhcnNlSW50Il0sIm1hcHBpbmdzIjoibUJBRUEsTUFBTUEsRUFBUSxJQ0ZDLE1BQ2IsY0FDRUMsS0FBS0MsUUFBVSxHQUNmRCxLQUFLRSxLQUFPLEVBQ1pGLEtBQUtHLE9BQVNILEtBQUtFLEtBQU8sRUFDMUJGLEtBQUtJLE9BQVNKLEtBQUtFLEtBQU8sRUFDMUJGLEtBQUtLLElBQU0sR0FLYixLQUFLQyxHQUNILE9BQVFBLEdBQ04sSUFBSyxLQUNITixLQUFLSyxJQUFJTCxLQUFLRyxRQUFRSCxLQUFLSSxRQUFVSixLQUFLSyxJQUFJTCxLQUFLRyxPQUFTLEdBQUdILEtBQUtJLFFBQ3BFSixLQUFLSyxJQUFJTCxLQUFLRyxPQUFTLEdBQUdILEtBQUtJLFFBQVUsRUFDekNKLEtBQUtHLFFBQVUsRUFDZixNQUNGLElBQUss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IjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCb2FyZCBmcm9tICcuL2JvYXJkLmpzJztcclxuXHJcbmNvbnN0IGJvYXJkID0gbmV3IEJvYXJkKCk7XHJcbmNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdib2FyZCcpO1xyXG5cclxuZWxlbWVudC5pbm5lckhUTUwgPSBib2FyZC5jcmVhdGVCb2FyZCgpO1xyXG5cclxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJykuZm9yRWFjaCgoY2VsbCkgPT4ge1xyXG4gIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xyXG4gICAgY29uc3QgZWxlbSA9IGV2dC50YXJnZXQ7XHJcbiAgICBib2FyZC5zd2FwKHBhcnNlSW50KGVsZW0uaW5uZXJIVE1MLCAxMCkpO1xyXG4gIH0pO1xyXG59KTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQm9hcmQge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5oaXN0b3J5ID0gW107XHJcbiAgICB0aGlzLnNpemUgPSA0O1xyXG4gICAgdGhpcy5lbXB0eVggPSB0aGlzLnNpemUgLSAxO1xyXG4gICAgdGhpcy5lbXB0eVkgPSB0aGlzLnNpemUgLSAxO1xyXG4gICAgdGhpcy5hcnIgPSBbXTtcclxuICB9XHJcblxyXG4gIC8vIGxldCBzaXplID0gNDtcclxuXHJcbiAgbW92ZShkaXJlY3Rpb24pIHtcclxuICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XHJcbiAgICAgIGNhc2UgJ3VwJzpcclxuICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldID0gdGhpcy5hcnJbdGhpcy5lbXB0eVggLSAxXVt0aGlzLmVtcHR5WV07XHJcbiAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVggLSAxXVt0aGlzLmVtcHR5WV0gPSAwO1xyXG4gICAgICAgIHRoaXMuZW1wdHlYIC09IDE7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2Rvd24nOlxyXG4gICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV0gPSB0aGlzLmFyclt0aGlzLmVtcHR5WCArIDFdW3RoaXMuZW1wdHlZXTtcclxuICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WCArIDFdW3RoaXMuZW1wdHlZXSA9IDA7XHJcbiAgICAgICAgdGhpcy5lbXB0eVggKz0gMTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV0gPSB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVkgKyAxXTtcclxuICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVkgKyAxXSA9IDA7XHJcbiAgICAgICAgdGhpcy5lbXB0eVkgKz0gMTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXSA9IHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WSAtIDFdO1xyXG4gICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WSAtIDFdID0gMDtcclxuICAgICAgICB0aGlzLmVtcHR5WSAtPSAxO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignPjooJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzaHVmZmxlKCkge1xyXG4gICAgLy8gdGhpcy5lbXB0eVggPSBzaXplIC0gMTtcclxuICAgIC8vIHRoaXMuZW1wdHlZID0gc2l6ZSAtIDE7XHJcbiAgICB0aGlzLmhpc3RvcnkucHVzaChbIHRoaXMuZW1wdHlYLCB0aGlzLmVtcHR5WSBdKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDgwOyBpICs9IDEpIHtcclxuICAgICAgc3dpdGNoIChNYXRoLmZsb29yKDQgKiBNYXRoLnJhbmRvbSgpKSkge1xyXG4gICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgIGlmICh0aGlzLmVtcHR5WCAhPT0gMCkge1xyXG4gICAgICAgICAgICAvLyAgTU9WRSBVUFxyXG5cclxuICAgICAgICAgICAgdGhpcy5tb3ZlKCd1cCcpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gIE1PVkUgRE9XTlxyXG4gICAgICAgICAgICB0aGlzLm1vdmUoJ2Rvd24nKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKFsgdGhpcy5lbXB0eVgsIHRoaXMuZW1wdHlZIF0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgaWYgKHRoaXMuZW1wdHlZICE9PSB0aGlzLnNpemUgLSAxKSB7XHJcbiAgICAgICAgICAgIC8vICBNT1ZFIFJJR0hUXHJcbiAgICAgICAgICAgIHRoaXMubW92ZSgncmlnaHQnKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vICBNT1ZFIExFRlRcclxuICAgICAgICAgICAgdGhpcy5tb3ZlKCdsZWZ0Jyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChbIHRoaXMuZW1wdHlYLCB0aGlzLmVtcHR5WSBdKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgIGlmICh0aGlzLmVtcHR5WCAhPT0gdGhpcy5zaXplIC0gMSkge1xyXG4gICAgICAgICAgICAvLyAgTU9WRSBET1dOXHJcbiAgICAgICAgICAgIHRoaXMubW92ZSgnZG93bicpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gIE1PVkUgVVBcclxuICAgICAgICAgICAgdGhpcy5tb3ZlKCd1cCcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2goWyB0aGlzLmVtcHR5WCwgdGhpcy5lbXB0eVkgXSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICBpZiAodGhpcy5lbXB0eVkgIT09IDApIHtcclxuICAgICAgICAgICAgLy8gIE1PVkUgTEVGVFxyXG4gICAgICAgICAgICB0aGlzLm1vdmUoJ2xlZnQnKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vICBNT1ZFIFJJR0hUXHJcbiAgICAgICAgICAgIHRoaXMubW92ZSgncmlnaHQnKTtcclxuICAgICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2goWyB0aGlzLmVtcHR5WCwgdGhpcy5lbXB0eVkgXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgaSAtPSAxO1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCc+OignKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLmFycjtcclxuICB9XHJcblxyXG4gIHJlbmRlckJvYXJkKCkge1xyXG4gICAgbGV0IGJvYXJkID0gJyc7XHJcbiAgICBsZXQgY2VsbE51bWJlcjtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMCwgb3JkZXIgPSAxOyBpIDwgdGhpcy5zaXplOyBpICs9IDEpIHtcclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnNpemU7IGogKz0gMSkge1xyXG4gICAgICAgIGNlbGxOdW1iZXIgPSB0aGlzLmFycltpXVtqXTtcclxuICAgICAgICBjb25zdCBjbGFzc05hbWUgPSB0aGlzLmFycltpXVtqXSA/ICdjZWxsJyA6ICdlbXB0eSc7XHJcbiAgICAgICAgb3JkZXIgKz0gMTtcclxuICAgICAgICBib2FyZCArPSBgPGRpdiBzdHlsZT0nb3JkZXI6JHtvcmRlcn07JyBpZD0nY2VsbC0ke2NlbGxOdW1iZXJ9JyBjbGFzcz0nJHtjbGFzc05hbWV9Jz4ke2NlbGxOdW1iZXJ9PC9kaXY+YDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBib2FyZDtcclxuICB9XHJcblxyXG4gIGNyZWF0ZUJvYXJkKCkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNpemU7IGkgKz0gMSkge1xyXG4gICAgICB0aGlzLmFycltpXSA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuc2l6ZTsgaiArPSAxKSB7XHJcbiAgICAgICAgaWYgKGkgKyBqICE9PSAodGhpcy5zaXplIC0gMSkgKiAyKSB7XHJcbiAgICAgICAgICB0aGlzLmFycltpXVtqXSA9IGkgKiB0aGlzLnNpemUgKyBqICsgMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5hcnJbaV1bal0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYXJyID0gdGhpcy5zaHVmZmxlKCk7XHJcbiAgICBjb25zb2xlLnRhYmxlKHRoaXMuYXJyKTtcclxuICAgIHJldHVybiB0aGlzLnJlbmRlckJvYXJkKCk7XHJcbiAgfVxyXG5cclxuICBzd2FwKG51bWJlcikge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFyci5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuYXJyW2ldLmxlbmd0aDsgaiArPSAxKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXJyW2ldW2pdID09PSBudW1iZXIpIHtcclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgKE1hdGguYWJzKHRoaXMuZW1wdHlYIC0gaSkgPD0gMSAmJiB0aGlzLmVtcHR5WSAtIGogPT09IDApIHx8XHJcbiAgICAgICAgICAgIChNYXRoLmFicyh0aGlzLmVtcHR5WSAtIGopIDw9IDEgJiYgdGhpcy5lbXB0eVggLSBpID09PSAwKVxyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHplcm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjY2VsbC0ke3RoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV19YCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjY2VsbC0ke3RoaXMuYXJyW2ldW2pdfWApO1xyXG4gICAgICAgICAgICBjb25zdCB0ZW1wID0gemVyby5zdHlsZS5vcmRlcjtcclxuICAgICAgICAgICAgemVyby5zdHlsZS5vcmRlciA9IGUuc3R5bGUub3JkZXI7XHJcbiAgICAgICAgICAgIGUuc3R5bGUub3JkZXIgPSB0ZW1wO1xyXG5cclxuICAgICAgICAgICAgWyB0aGlzLmFycltpXVtqXSwgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXSBdID0gW1xyXG4gICAgICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV0sXHJcbiAgICAgICAgICAgICAgdGhpcy5hcnJbaV1bal1cclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgdGhpcy5lbXB0eVggPSBpO1xyXG4gICAgICAgICAgICB0aGlzLmVtcHR5WSA9IGo7XHJcbiAgICAgICAgICAgIGNvbnNvbGUudGFibGUodGhpcy5hcnIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=