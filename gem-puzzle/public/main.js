(()=>{"use strict";class t{constructor(){this.currentTime=0}calcCurrentTime(){this.time=setInterval((()=>{this.currentTime+=1,this.secToMinAndSec()}),1e3)}secToMinAndSec(){this.minutes=Math.floor(this.currentTime/60),this.sec=(this.currentTime%60).toFixed(0),this.timer=`${this.minutes}:${this.sec<10?"0":""}${this.sec}`,this.renderTimer()}timerStop(){clearInterval(this.time),this.timer="0:00",this.renderTimer()}timerPause(){clearInterval(this.time)}renderTimer(){document.querySelector(".time").innerHTML=this.timer}init(){this.timerStop(),this.currentTime=null,this.calcCurrentTime()}load(){this.timerStop(),this.secToMinAndSec(),this.renderTimer(),this.calcCurrentTime()}}const e=new class{constructor(){this.timerC=new t,this.history=[],this.size=4,this.emptyX=0,this.emptyY=0,this.animationTime=200,this.boardWidth=40.8,this.marginSize=.1,this.soundOn=!0,this.winSound=new Audio("../assets/win.mp3"),this.slideSound=new Audio("../assets/slide.mp3"),this.slideSound.volume=.2,this.dragNDropSound=new Audio("../assets/whoosh-grainy_gkoaqyn_.mp3"),this.dragNDropSound.volume=.3,this.removeBoard=()=>{document.querySelectorAll(".board").forEach((t=>{document.body.removeChild(t)}))},this.findElem=t=>{for(let e=0;e<this.arr.length;e+=1)for(let s=0;s<this.arr.length;s+=1)if(this.arr[e][s]===parseInt(t.innerHTML,10))return[e,s];throw new Error(t)},this.dragDrop=t=>{const e=t.target,s=document.querySelector(".hide"),[i,r]=this.findElem(s);this.isNearZero(i,r)&&([this.arr[i][r],this.arr[this.emptyX][this.emptyY]]=[this.arr[this.emptyX][this.emptyY],this.arr[i][r]],[this.emptyX,this.emptyY]=[i,r],[e.style.order,s.style.order]=[s.style.order,e.style.order],this.checkForIdling(),this.history.push([this.emptyX,this.emptyY]),this.playDragSound()),e.classList.remove("hovered")}}randomImgNumber(t,e){this.imgNumb=Math.floor(Math.random()*(t-e)+e)}back(){this.history.pop(),this.backTimer()}isNearZero(t,e){return!!(Math.abs(this.emptyX-t)<=1&&this.emptyY-e==0||Math.abs(this.emptyY-e)<=1&&this.emptyX-t==0)}checkForIdling(){const[t,e]=this.history[this.history.length-2];this.emptyX===t&&this.emptyY===e&&this.history.splice(-2,2)}backTimer(){setTimeout((()=>{if(this.history.length){const[t,e]=this.history.pop();this.e=document.querySelector("#cell-"+this.arr[t][e]),this.moveAnimation([t,e]),setTimeout((()=>{const s=this.arr[this.emptyX][this.emptyY];this.arr[this.emptyX][this.emptyY]=this.arr[t][e],this.arr[t][e]=s,this.emptyX=t,this.emptyY=e,this.removeBoard(),this.renderBoard(),this.playSlideSound(),this.backTimer()}),this.animationTime)}else this.checkWin(!0)}),this.animationTime)}move(t){switch(t){case"up":0!==this.emptyX&&(this.history.length<=1||this.emptyX-1!==this.history[this.history.length-2][0])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX-1][this.emptyY],this.arr[this.emptyX-1][this.emptyY]=0,this.emptyX-=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;case"down":this.emptyX!==this.size-1&&(this.history.length<=1||this.emptyX+1!==this.history[this.history.length-2][0])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX+1][this.emptyY],this.arr[this.emptyX+1][this.emptyY]=0,this.emptyX+=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;case"right":this.emptyY!==this.size-1&&(this.history.length<=1||this.emptyY+1!==this.history[this.history.length-2][1])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX][this.emptyY+1],this.arr[this.emptyX][this.emptyY+1]=0,this.emptyY+=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;case"left":0!==this.emptyY&&(this.history.length<=1||this.emptyY-1!==this.history[this.history.length-2][1])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX][this.emptyY-1],this.arr[this.emptyX][this.emptyY-1]=0,this.emptyY-=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;default:throw new Error(">:(")}}createBoard(){const t=[];this.bgPosArr=[];for(let e=0;e<this.size;e+=1){t[e]=[];for(let s=0;s<this.size;s+=1)e+s!==2*(this.size-1)?(t[e][s]=e*this.size+s+1,this.bgPosArr.push(`${Math.round(100/(this.size-1)*s)}% ${Math.round(100/(this.size-1)*e)}%`)):t[e][s]=0}return t}shuffle(){for(this.history.push([this.emptyX,this.emptyY]),this.counter=0;this.counter<this.size**3;this.counter+=1)switch(Math.floor(4*Math.random())){case 0:this.move("up");break;case 1:this.move("right");break;case 2:this.move("down");break;case 3:this.move("left");break;default:throw new Error(">:(")}}renderBoard(){let t='<div class="score-list">test</div>';const e=this.boardWidth+"rem";let s;for(let i=0,r=1;i<this.size;i+=1)for(let n=0;n<this.size;n+=1){s=this.arr[i][n];const h=s?"cell":"cell empty",o=!!s,a=s?"":"ondragover = 'event.preventDefault()'",d=this.bgPosArr[s-1],m=s?`background: url(../assets/images/${this.imgNumb}.jpg); background-position: ${d}; background-size: ${e};`:"";r+=1,t+=`<div \n        ${a}\n          style='width:${this.cellSize}rem;\n          height:${this.cellSize}rem;\n          order:${r};\n          ${m}'\n          id='cell-${s}'\n          class='${h}'\n          draggable="${o}">${s}</div>`}const i=document.createElement("div");i.classList.add("board"),i.style.width=e,i.innerHTML=t,document.body.appendChild(i)}draw(){const t=this.cellSize/this.animationTime*this.timePassed;switch(this.direction){case"up":this.e.style.transform=`translate( 0, ${-t}rem)`;break;case"down":this.e.style.transform=`translate( 0, ${t}rem)`;break;case"left":this.e.style.transform=`translate( ${-t}rem, 0)`;break;case"right":this.e.style.transform=`translate( ${t}rem, 0)`;break;default:throw new Error(">:(")}}moveAnimation([t,e]){this.emptyX<t?this.direction="up":this.emptyX>t?this.direction="down":this.emptyY<e?this.direction="left":this.emptyY>e&&(this.direction="right"),this.inAnimation=!0,this.start=Date.now(),this.timer=setInterval((()=>{if(this.timePassed=Date.now()-this.start,this.timePassed>=this.animationTime)return clearInterval(this.timer),void(this.inAnimation=!1);this.draw()}),20)}toggleSound(){this.soundOn=!this.soundOn}swap(t){if(!this.inAnimation)for(let e=0;e<this.arr.length;e+=1)for(let s=0;s<this.arr[e].length;s+=1)if(this.arr[e][s]===t&&this.isNearZero(e,s)){this.movesCounter+=1,document.querySelector(".move").innerHTML=this.movesCounter;const t=document.querySelector("#cell-"+this.arr[this.emptyX][this.emptyY]);return this.e=document.querySelector("#cell-"+this.arr[e][s]),this.moveAnimation([e,s]),this.playSlideSound(),setTimeout((()=>{const e=t.style.order;t.style.order=this.e.style.order,this.e.style.order=e,this.e.style.transform="",this.emptyX===this.emptyY&&this.emptyY===this.size-1&&this.checkWin()&&this.timerC.timerPause()}),this.animationTime),[this.arr[e][s],this.arr[this.emptyX][this.emptyY]]=[this.arr[this.emptyX][this.emptyY],this.arr[e][s]],this.emptyX=e,this.emptyY=s,this.checkForIdling(),void this.history.push([this.emptyX,this.emptyY])}}setScore(){let t=JSON.parse(localStorage.getItem("score-list"))||[];t.push({moves:this.movesCounter,size:this.size,time:this.timerC.timer}),t.length>10&&(t.sort(((t,e)=>t.moves-e.moves)),t=t.slice(0,10)),localStorage.setItem("score-list",JSON.stringify(t))}getScoreList(){this.scoreList=!this.scoreList;const t=document.querySelector(".score-list"),e=JSON.parse(localStorage.getItem("score-list"))||[];let s="";for(let t=e.length-1;t>=0;t-=1)s+=`<li>Size: ${e[t].size},&nbsp;&nbsp;&nbsp;&nbsp;Moves: ${e[t].moves},&nbsp;&nbsp;&nbsp;&nbsp;Time: ${e[t].time}</li>`;t.innerHTML=`<h2>Best Scores</h2>\n      <ol class="score">${s}</ol>`,this.scoreList?(t.classList.add("score-list-on"),this.timerC.timerPause()):(t.classList.remove("score-list-on"),this.timerC.calcCurrentTime())}checkWin(t){for(let t=0;t<this.size;t+=1)for(let e=0;e<this.size;e+=1)if(t+e!==2*(this.size-1)&&this.win[t][e]!==this.arr[t][e])return!1;return this.playWinSound(),this.setWinMessage(t),this.setScore(),!0}setWinMessage(t){this.winBoard=document.querySelector(".board"),this.winBoard.classList.add("win"),this.winBoard.innerHTML+=`<div style="background-image: url(../assets/images/${this.imgNumb}.jpg);" class='win-text'>${t?"ЧИТЕР!":`Ура! Вы решили головоломку за ${document.querySelector(".time").innerHTML} и ${document.querySelector(".move").innerHTML} ходов</div>`}</div>`,setTimeout((()=>{this.winBoard.querySelector(".win-text").style.opacity=1}),50)}playWinSound(){this.soundOn&&(this.winSound.currentTime=0,this.winSound.play())}playSlideSound(){this.soundOn&&(this.slideSound.currentTime=0,this.slideSound.play())}playDragSound(){this.soundOn&&(this.dragNDropSound.currentTime=.15,this.dragNDropSound.play())}dragStart(){setTimeout((()=>{this.classList.add("hide")}),0)}dragEnd(){this.classList.remove("hide")}dragEnter(){this.classList.add("hovered")}dragLeave(){this.classList.remove("hovered")}init(){this.scoreList=!1,this.randomImgNumber(150,1),this.history=[],this.movesCounter=0,document.querySelector(".move").innerHTML=this.movesCounter,this.size=document.getElementById("fieldSize").value,this.cellSize=parseFloat(this.boardWidth/this.size-2*this.marginSize).toFixed(3),this.removeBoard(),this.emptyX=this.size-1,this.emptyY=this.size-1,this.arr=this.createBoard(),this.win=this.createBoard(),this.shuffle(),this.renderBoard(),this.timerC.init(),document.querySelectorAll(".cell").forEach((t=>{t.addEventListener("mouseup",(t=>{const e=t.target;this.swap(parseInt(e.innerHTML,10))})),t.addEventListener("dragstart",this.dragStart),t.addEventListener("dragover",this.dragOver),t.addEventListener("drop",this.dragDrop),t.addEventListener("dragend",this.dragEnd),t.addEventListener("dragenter",this.dragEnter),t.addEventListener("dragleave",this.dragLeave)}))}load(){this.cellSize=parseFloat(this.boardWidth/this.size-2*this.marginSize).toFixed(3),document.querySelector(".move").innerHTML=this.movesCounter,this.removeBoard(),this.renderBoard(),this.win=this.createBoard(),this.timerC.init(),document.querySelectorAll(".cell").forEach((t=>{t.addEventListener("mouseup",(t=>{const e=t.target;this.swap(parseInt(e.innerHTML,10))})),t.addEventListener("dragstart",this.dragStart),t.addEventListener("dragover",this.dragOver),t.addEventListener("drop",this.dragDrop),t.addEventListener("dragend",this.dragEnd),t.addEventListener("dragenter",this.dragEnter),t.addEventListener("dragleave",this.dragLeave)}))}},s=document.createElement("header");s.classList.add("header"),s.innerHTML='<h1 class="heading">gem puzzle</h1>',document.body.appendChild(s);const i=document.createElement("div");i.classList.add("menu"),i.innerHTML=`  \n  <div class="settings">\n    <button class="new-game btn">New</button>\n    <button class="save btn">Save</button>\n    <button class="load btn">Load</button>\n    <button class="score btn">Score</button>\n    <button class="sound btn ${e.soundOn?"btn-on":""}">Sound</button>\n    <div class="size">\n      <select id="fieldSize">\n      <option selected="selected" value="4" disabled>Field size</option>\n        <option value="3">3</option>\n        <option value="4">4</option>\n        <option value="5">5</option>\n        <option value="6">6</option>\n        <option value="7">7</option>\n        <option value="8">8</option>\n      </select>\n    </div>\n    <button class="cheat btn">CHEAT</button>\n  </div>\n  <div class="counters">\n    <div class="timer"><span>Timer: </span><span class="time">0:00</span></div>\n    <div class="moves"><span>Moves: </span><span class="move">0</span></div>\n  </div>`,document.body.appendChild(i),e.init(),document.querySelector(".new-game").addEventListener("click",(()=>{e.init()})),document.querySelector(".save").addEventListener("click",(()=>{localStorage.setItem("gameSave",JSON.stringify({bgPosition:e.bgPosArr,history:e.history,size:e.size,boardTable:e.arr,time:e.timerC.currentTime,moves:e.movesCounter,zero:[e.emptyX,e.emptyY],imgNumb:e.imgNumb}))})),document.querySelector(".load").addEventListener("click",(()=>{const{bgPosition:t,history:s,size:i,boardTable:r,time:n,moves:h,zero:o,imgNumb:a}=JSON.parse(localStorage.getItem("gameSave"));e.bgPosArr=t,e.history=s,e.size=i,e.timerC.currentTime=n,e.movesCounter=h,e.arr=r,[e.emptyX,e.emptyY]=o,e.imgNumb=a,e.load(),e.timerC.load()})),document.getElementById("fieldSize").addEventListener("change",(()=>{e.init(),e.timerC.init()})),document.querySelector(".cheat").addEventListener("click",(()=>{e.timerC.timerPause(),e.back()})),document.querySelector(".sound").addEventListener("click",(t=>{e.toggleSound(),e.soundOn?t.target.classList.add("btn-on"):t.target.classList.remove("btn-on")})),document.querySelector(".score").addEventListener("click",(t=>{e.getScoreList(),e.scoreList?t.target.classList.add("btn-on"):t.target.classList.remove("btn-on")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZW0tcHV6emxlLy4vc3JjL1RpbWVyLmpzIiwid2VicGFjazovL2dlbS1wdXp6bGUvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZ2VtLXB1enpsZS8uL3NyYy9Cb2FyZC5qcyJdLCJuYW1lcyI6WyJUaW1lciIsInRoaXMiLCJjdXJyZW50VGltZSIsInRpbWUiLCJzZXRJbnRlcnZhbCIsInNlY1RvTWluQW5kU2VjIiwibWludXRlcyIsIk1hdGgiLCJmbG9vciIsInNlYyIsInRvRml4ZWQiLCJ0aW1lciIsInJlbmRlclRpbWVyIiwiY2xlYXJJbnRlcnZhbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsInRpbWVyU3RvcCIsImNhbGNDdXJyZW50VGltZSIsImJvYXJkIiwidGltZXJDIiwiaGlzdG9yeSIsInNpemUiLCJlbXB0eVgiLCJlbXB0eVkiLCJhbmltYXRpb25UaW1lIiwiYm9hcmRXaWR0aCIsIm1hcmdpblNpemUiLCJzb3VuZE9uIiwid2luU291bmQiLCJBdWRpbyIsInNsaWRlU291bmQiLCJ2b2x1bWUiLCJkcmFnTkRyb3BTb3VuZCIsInJlbW92ZUJvYXJkIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlbGVtIiwiYm9keSIsInJlbW92ZUNoaWxkIiwiZmluZEVsZW0iLCJ4IiwiYXJyIiwibGVuZ3RoIiwieSIsInBhcnNlSW50IiwiRXJyb3IiLCJkcmFnRHJvcCIsImUiLCJ6ZXJvIiwidGFyZ2V0IiwibW92ZWFibGUiLCJpc05lYXJaZXJvIiwic3R5bGUiLCJvcmRlciIsImNoZWNrRm9ySWRsaW5nIiwicHVzaCIsInBsYXlEcmFnU291bmQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJtYXgiLCJtaW4iLCJpbWdOdW1iIiwicmFuZG9tIiwicG9wIiwiYmFja1RpbWVyIiwiYWJzIiwiYmxYIiwiYmxZIiwic3BsaWNlIiwic2V0VGltZW91dCIsIm1vdmVBbmltYXRpb24iLCJ0ZW1wIiwicmVuZGVyQm9hcmQiLCJwbGF5U2xpZGVTb3VuZCIsImNoZWNrV2luIiwiZGlyZWN0aW9uIiwiY291bnRlciIsImJnUG9zQXJyIiwiaSIsImoiLCJyb3VuZCIsIm1vdmUiLCJjZWxsTnVtYmVyIiwiY2xhc3NOYW1lIiwiZHJhZ2dhYmxlIiwicHJldmVudERlZiIsImJHcG9zIiwiYmdGb3JDZWxsIiwiY2VsbFNpemUiLCJlbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImFkZCIsIndpZHRoIiwiYXBwZW5kQ2hpbGQiLCJyZW1QZXJUaWNrIiwidGltZVBhc3NlZCIsInRyYW5zZm9ybSIsImluQW5pbWF0aW9uIiwic3RhcnQiLCJEYXRlIiwibm93IiwiZHJhdyIsIm51bWJlciIsIm1vdmVzQ291bnRlciIsInRpbWVyUGF1c2UiLCJzY29yZUxpc3QiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwibW92ZXMiLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJzY29yZUVsZW0iLCJsaXN0IiwiY2hlYXQiLCJ3aW4iLCJwbGF5V2luU291bmQiLCJzZXRXaW5NZXNzYWdlIiwic2V0U2NvcmUiLCJ3aW5Cb2FyZCIsIm9wYWNpdHkiLCJwbGF5IiwicmFuZG9tSW1nTnVtYmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJ2YWx1ZSIsInBhcnNlRmxvYXQiLCJjcmVhdGVCb2FyZCIsInNodWZmbGUiLCJpbml0IiwiY2VsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJzd2FwIiwiZHJhZ1N0YXJ0IiwiZHJhZ092ZXIiLCJkcmFnRW5kIiwiZHJhZ0VudGVyIiwiZHJhZ0xlYXZlIiwiaGVhZGVyIiwibWVudSIsImJnUG9zaXRpb24iLCJib2FyZFRhYmxlIiwibG9hZCIsImJhY2siLCJ0b2dnbGVTb3VuZCIsImdldFNjb3JlTGlzdCJdLCJtYXBwaW5ncyI6Im1CQUFlLE1BQU1BLEVBQ25CLGNBQ0VDLEtBQUtDLFlBQWMsRUFHckIsa0JBQ0VELEtBQUtFLEtBQU9DLGFBQVksS0FD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RXZCM0YsRUFBTTJELFNBQVdvRSxFQUNqQi9ILEVBQU1FLFFBQVVBLEVBQ2hCRixFQUFNRyxLQUFPQSxFQUNiSCxFQUFNQyxPQUFPbEIsWUFBY0MsRUFDM0JnQixFQUFNcUYsYUFBZU8sRUFDckI1RixFQUFNdUIsSUFBTXlHLEdBQ1ZoSSxFQUFNSSxPQUFRSixFQUFNSyxRQUFXeUIsRUFDakM5QixFQUFNMkMsUUFBVUEsRUFDaEIzQyxFQUFNaUksT0FDTmpJLEVBQU1DLE9BQU9nSSxVQUdmdEksU0FBU21ILGVBQWUsYUFBYU8saUJBQWlCLFVBQVUsS0FDOURySCxFQUFNbUgsT0FDTm5ILEVBQU1DLE9BQU9rSCxVQUdmeEgsU0FBU0MsY0FBYyxVQUFVeUgsaUJBQWlCLFNBQVMsS0FDekRySCxFQUFNQyxPQUFPcUYsYUFDYnRGLEVBQU1rSSxVQUdSdkksU0FBU0MsY0FBYyxVQUFVeUgsaUJBQWlCLFNBQVVDLElBQzFEdEgsRUFBTW1JLGNBQ0ZuSSxFQUFNUyxRQUNSNkcsRUFBSXZGLE9BQU9RLFVBQVVrQyxJQUFJLFVBRXpCNkMsRUFBSXZGLE9BQU9RLFVBQVVDLE9BQU8sYUFJaEM3QyxTQUFTQyxjQUFjLFVBQVV5SCxpQkFBaUIsU0FBVUMsSUFDMUR0SCxFQUFNb0ksZUFDRnBJLEVBQU11RixVQUNSK0IsRUFBSXZGLE9BQU9RLFVBQVVrQyxJQUFJLFVBRXpCNkMsRUFBSXZGLE9BQU9RLFVBQVVDLE9BQU8sYyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGltZXIge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5jdXJyZW50VGltZSA9IDA7XHJcbiAgfVxyXG5cclxuICBjYWxjQ3VycmVudFRpbWUoKSB7XHJcbiAgICB0aGlzLnRpbWUgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuY3VycmVudFRpbWUgKz0gMTtcclxuICAgICAgdGhpcy5zZWNUb01pbkFuZFNlYygpO1xyXG4gICAgfSwgMTAwMCk7XHJcbiAgfVxyXG5cclxuICBzZWNUb01pbkFuZFNlYygpIHtcclxuICAgIHRoaXMubWludXRlcyA9IE1hdGguZmxvb3IodGhpcy5jdXJyZW50VGltZSAvIDYwKTtcclxuXHJcbiAgICB0aGlzLnNlYyA9ICh0aGlzLmN1cnJlbnRUaW1lICUgNjApLnRvRml4ZWQoMCk7XHJcbiAgICB0aGlzLnRpbWVyID0gYCR7dGhpcy5taW51dGVzfToke3RoaXMuc2VjIDwgMTAgPyAnMCcgOiAnJ30ke3RoaXMuc2VjfWA7XHJcbiAgICB0aGlzLnJlbmRlclRpbWVyKCk7XHJcbiAgfVxyXG5cclxuICB0aW1lclN0b3AoKSB7XHJcbiAgICBjbGVhckludGVydmFsKHRoaXMudGltZSk7XHJcbiAgICB0aGlzLnRpbWVyID0gJzA6MDAnO1xyXG4gICAgdGhpcy5yZW5kZXJUaW1lcigpO1xyXG4gIH1cclxuXHJcbiAgdGltZXJQYXVzZSgpIHtcclxuICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lKTtcclxuICB9XHJcblxyXG4gIHJlbmRlclRpbWVyKCkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRpbWUnKS5pbm5lckhUTUwgPSB0aGlzLnRpbWVyO1xyXG4gIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMudGltZXJTdG9wKCk7XHJcbiAgICB0aGlzLmN1cnJlbnRUaW1lID0gbnVsbDtcclxuICAgIHRoaXMuY2FsY0N1cnJlbnRUaW1lKCk7XHJcbiAgfVxyXG5cclxuICBsb2FkKCkge1xyXG4gICAgdGhpcy50aW1lclN0b3AoKTtcclxuICAgIHRoaXMuc2VjVG9NaW5BbmRTZWMoKTtcclxuICAgIHRoaXMucmVuZGVyVGltZXIoKTtcclxuXHJcbiAgICB0aGlzLmNhbGNDdXJyZW50VGltZSgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgQm9hcmQgZnJvbSAnLi9Cb2FyZC5qcyc7XHJcblxyXG5jb25zdCBib2FyZCA9IG5ldyBCb2FyZCgpO1xyXG5cclxuY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaGVhZGVyJyk7XHJcbmhlYWRlci5jbGFzc0xpc3QuYWRkKCdoZWFkZXInKTtcclxuaGVhZGVyLmlubmVySFRNTCA9ICc8aDEgY2xhc3M9XCJoZWFkaW5nXCI+Z2VtIHB1enpsZTwvaDE+JztcclxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChoZWFkZXIpO1xyXG5cclxuY29uc3QgbWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5tZW51LmNsYXNzTGlzdC5hZGQoJ21lbnUnKTtcclxuXHJcbm1lbnUuaW5uZXJIVE1MID0gYCAgXHJcbiAgPGRpdiBjbGFzcz1cInNldHRpbmdzXCI+XHJcbiAgICA8YnV0dG9uIGNsYXNzPVwibmV3LWdhbWUgYnRuXCI+TmV3PC9idXR0b24+XHJcbiAgICA8YnV0dG9uIGNsYXNzPVwic2F2ZSBidG5cIj5TYXZlPC9idXR0b24+XHJcbiAgICA8YnV0dG9uIGNsYXNzPVwibG9hZCBidG5cIj5Mb2FkPC9idXR0b24+XHJcbiAgICA8YnV0dG9uIGNsYXNzPVwic2NvcmUgYnRuXCI+U2NvcmU8L2J1dHRvbj5cclxuICAgIDxidXR0b24gY2xhc3M9XCJzb3VuZCBidG4gJHtib2FyZC5zb3VuZE9uID8gJ2J0bi1vbicgOiAnJ31cIj5Tb3VuZDwvYnV0dG9uPlxyXG4gICAgPGRpdiBjbGFzcz1cInNpemVcIj5cclxuICAgICAgPHNlbGVjdCBpZD1cImZpZWxkU2l6ZVwiPlxyXG4gICAgICA8b3B0aW9uIHNlbGVjdGVkPVwic2VsZWN0ZWRcIiB2YWx1ZT1cIjRcIiBkaXNhYmxlZD5GaWVsZCBzaXplPC9vcHRpb24+XHJcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjNcIj4zPC9vcHRpb24+XHJcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjRcIj40PC9vcHRpb24+XHJcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjVcIj41PC9vcHRpb24+XHJcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjZcIj42PC9vcHRpb24+XHJcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjdcIj43PC9vcHRpb24+XHJcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjhcIj44PC9vcHRpb24+XHJcbiAgICAgIDwvc2VsZWN0PlxyXG4gICAgPC9kaXY+XHJcbiAgICA8YnV0dG9uIGNsYXNzPVwiY2hlYXQgYnRuXCI+Q0hFQVQ8L2J1dHRvbj5cclxuICA8L2Rpdj5cclxuICA8ZGl2IGNsYXNzPVwiY291bnRlcnNcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJ0aW1lclwiPjxzcGFuPlRpbWVyOiA8L3NwYW4+PHNwYW4gY2xhc3M9XCJ0aW1lXCI+MDowMDwvc3Bhbj48L2Rpdj5cclxuICAgIDxkaXYgY2xhc3M9XCJtb3Zlc1wiPjxzcGFuPk1vdmVzOiA8L3NwYW4+PHNwYW4gY2xhc3M9XCJtb3ZlXCI+MDwvc3Bhbj48L2Rpdj5cclxuICA8L2Rpdj5gO1xyXG5cclxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtZW51KTtcclxuXHJcbmJvYXJkLmluaXQoKTtcclxuXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXctZ2FtZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGJvYXJkLmluaXQoKTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2F2ZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxyXG4gICAgJ2dhbWVTYXZlJyxcclxuICAgIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgYmdQb3NpdGlvbjogYm9hcmQuYmdQb3NBcnIsXHJcbiAgICAgIGhpc3Rvcnk6IGJvYXJkLmhpc3RvcnksXHJcbiAgICAgIHNpemU6IGJvYXJkLnNpemUsXHJcbiAgICAgIGJvYXJkVGFibGU6IGJvYXJkLmFycixcclxuICAgICAgdGltZTogYm9hcmQudGltZXJDLmN1cnJlbnRUaW1lLFxyXG4gICAgICBtb3ZlczogYm9hcmQubW92ZXNDb3VudGVyLFxyXG4gICAgICB6ZXJvOiBbIGJvYXJkLmVtcHR5WCwgYm9hcmQuZW1wdHlZIF0sXHJcbiAgICAgIGltZ051bWI6IGJvYXJkLmltZ051bWJcclxuICAgIH0pXHJcbiAgKTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9hZCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGNvbnN0IHsgYmdQb3NpdGlvbiwgaGlzdG9yeSwgc2l6ZSwgYm9hcmRUYWJsZSwgdGltZSwgbW92ZXMsIHplcm8sIGltZ051bWIgfSA9IEpTT04ucGFyc2UoXHJcbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2FtZVNhdmUnKVxyXG4gICk7XHJcbiAgYm9hcmQuYmdQb3NBcnIgPSBiZ1Bvc2l0aW9uO1xyXG4gIGJvYXJkLmhpc3RvcnkgPSBoaXN0b3J5O1xyXG4gIGJvYXJkLnNpemUgPSBzaXplO1xyXG4gIGJvYXJkLnRpbWVyQy5jdXJyZW50VGltZSA9IHRpbWU7XHJcbiAgYm9hcmQubW92ZXNDb3VudGVyID0gbW92ZXM7XHJcbiAgYm9hcmQuYXJyID0gYm9hcmRUYWJsZTtcclxuICBbIGJvYXJkLmVtcHR5WCwgYm9hcmQuZW1wdHlZIF0gPSB6ZXJvO1xyXG4gIGJvYXJkLmltZ051bWIgPSBpbWdOdW1iO1xyXG4gIGJvYXJkLmxvYWQoKTtcclxuICBib2FyZC50aW1lckMubG9hZCgpO1xyXG59KTtcclxuXHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZFNpemUnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgYm9hcmQuaW5pdCgpO1xyXG4gIGJvYXJkLnRpbWVyQy5pbml0KCk7XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoZWF0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgYm9hcmQudGltZXJDLnRpbWVyUGF1c2UoKTtcclxuICBib2FyZC5iYWNrKCk7XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNvdW5kJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgYm9hcmQudG9nZ2xlU291bmQoKTtcclxuICBpZiAoYm9hcmQuc291bmRPbikge1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdidG4tb24nKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdidG4tb24nKTtcclxuICB9XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNjb3JlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgYm9hcmQuZ2V0U2NvcmVMaXN0KCk7XHJcbiAgaWYgKGJvYXJkLnNjb3JlTGlzdCkge1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdidG4tb24nKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdidG4tb24nKTtcclxuICB9XHJcbn0pO1xyXG4iLCJpbXBvcnQgVGltZXIgZnJvbSAnLi9UaW1lci5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCb2FyZCB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLnRpbWVyQyA9IG5ldyBUaW1lcigpO1xyXG4gICAgdGhpcy5oaXN0b3J5ID0gW107XHJcbiAgICB0aGlzLnNpemUgPSA0O1xyXG4gICAgdGhpcy5lbXB0eVggPSAwO1xyXG4gICAgdGhpcy5lbXB0eVkgPSAwO1xyXG4gICAgdGhpcy5hbmltYXRpb25UaW1lID0gMjAwO1xyXG4gICAgdGhpcy5ib2FyZFdpZHRoID0gNDAuODtcclxuICAgIHRoaXMubWFyZ2luU2l6ZSA9IDAuMTtcclxuICAgIHRoaXMuc291bmRPbiA9IHRydWU7XHJcbiAgICB0aGlzLndpblNvdW5kID0gbmV3IEF1ZGlvKCcuLi9hc3NldHMvd2luLm1wMycpO1xyXG4gICAgdGhpcy5zbGlkZVNvdW5kID0gbmV3IEF1ZGlvKCcuLi9hc3NldHMvc2xpZGUubXAzJyk7XHJcbiAgICB0aGlzLnNsaWRlU291bmQudm9sdW1lID0gMC4yO1xyXG4gICAgdGhpcy5kcmFnTkRyb3BTb3VuZCA9IG5ldyBBdWRpbygnLi4vYXNzZXRzL3dob29zaC1ncmFpbnlfZ2tvYXF5bl8ubXAzJyk7XHJcbiAgICB0aGlzLmRyYWdORHJvcFNvdW5kLnZvbHVtZSA9IDAuMztcclxuICAgIHRoaXMucmVtb3ZlQm9hcmQgPSAoKSA9PiB7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ib2FyZCcpLmZvckVhY2goKGVsZW0pID0+IHtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsZW0pO1xyXG4gICAgICB9KTtcclxuICAgIH07XHJcbiAgICB0aGlzLmZpbmRFbGVtID0gKGVsZW0pID0+IHtcclxuICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLmFyci5sZW5ndGg7IHggKz0gMSkge1xyXG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgdGhpcy5hcnIubGVuZ3RoOyB5ICs9IDEpIHtcclxuICAgICAgICAgIGlmICh0aGlzLmFyclt4XVt5XSA9PT0gcGFyc2VJbnQoZWxlbS5pbm5lckhUTUwsIDEwKSkgcmV0dXJuIFsgeCwgeSBdO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZWxlbSk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5kcmFnRHJvcCA9IChlKSA9PiB7XHJcbiAgICAgIGNvbnN0IHplcm8gPSBlLnRhcmdldDtcclxuICAgICAgY29uc3QgbW92ZWFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGlkZScpO1xyXG4gICAgICBjb25zdCBbIHgsIHkgXSA9IHRoaXMuZmluZEVsZW0obW92ZWFibGUpO1xyXG4gICAgICBpZiAodGhpcy5pc05lYXJaZXJvKHgsIHkpKSB7XHJcbiAgICAgICAgWyB0aGlzLmFyclt4XVt5XSwgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXSBdID0gW1xyXG4gICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXSxcclxuICAgICAgICAgIHRoaXMuYXJyW3hdW3ldXHJcbiAgICAgICAgXTtcclxuICAgICAgICBbIHRoaXMuZW1wdHlYLCB0aGlzLmVtcHR5WSBdID0gWyB4LCB5IF07XHJcbiAgICAgICAgWyB6ZXJvLnN0eWxlLm9yZGVyLCBtb3ZlYWJsZS5zdHlsZS5vcmRlciBdID0gWyBtb3ZlYWJsZS5zdHlsZS5vcmRlciwgemVyby5zdHlsZS5vcmRlciBdO1xyXG4gICAgICAgIHRoaXMuY2hlY2tGb3JJZGxpbmcoKTtcclxuICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChbIHRoaXMuZW1wdHlYLCB0aGlzLmVtcHR5WSBdKTtcclxuICAgICAgICB0aGlzLnBsYXlEcmFnU291bmQoKTtcclxuICAgICAgfVxyXG4gICAgICB6ZXJvLmNsYXNzTGlzdC5yZW1vdmUoJ2hvdmVyZWQnKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICByYW5kb21JbWdOdW1iZXIobWF4LCBtaW4pIHtcclxuICAgIHRoaXMuaW1nTnVtYiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluKTtcclxuICB9XHJcblxyXG4gIGJhY2soKSB7XHJcbiAgICB0aGlzLmhpc3RvcnkucG9wKCk7XHJcbiAgICB0aGlzLmJhY2tUaW1lcigpO1xyXG4gIH1cclxuXHJcbiAgaXNOZWFyWmVybyh4LCB5KSB7XHJcbiAgICByZXR1cm4gISEoXHJcbiAgICAgIChNYXRoLmFicyh0aGlzLmVtcHR5WCAtIHgpIDw9IDEgJiYgdGhpcy5lbXB0eVkgLSB5ID09PSAwKSB8fFxyXG4gICAgICAoTWF0aC5hYnModGhpcy5lbXB0eVkgLSB5KSA8PSAxICYmIHRoaXMuZW1wdHlYIC0geCA9PT0gMClcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBjaGVja0ZvcklkbGluZygpIHtcclxuICAgIGNvbnN0IFsgYmxYLCBibFkgXSA9IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnkubGVuZ3RoIC0gMl07XHJcbiAgICBpZiAodGhpcy5lbXB0eVggPT09IGJsWCAmJiB0aGlzLmVtcHR5WSA9PT0gYmxZKSB0aGlzLmhpc3Rvcnkuc3BsaWNlKC0yLCAyKTtcclxuICB9XHJcblxyXG4gIGJhY2tUaW1lcigpIHtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5oaXN0b3J5Lmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnN0IFsgeCwgeSBdID0gdGhpcy5oaXN0b3J5LnBvcCgpO1xyXG4gICAgICAgIHRoaXMuZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNjZWxsLSR7dGhpcy5hcnJbeF1beV19YCk7XHJcblxyXG4gICAgICAgIHRoaXMubW92ZUFuaW1hdGlvbihbIHgsIHkgXSk7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgdGVtcCA9IHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV07XHJcbiAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldID0gdGhpcy5hcnJbeF1beV07XHJcbiAgICAgICAgICB0aGlzLmFyclt4XVt5XSA9IHRlbXA7XHJcbiAgICAgICAgICB0aGlzLmVtcHR5WCA9IHg7XHJcbiAgICAgICAgICB0aGlzLmVtcHR5WSA9IHk7XHJcbiAgICAgICAgICB0aGlzLnJlbW92ZUJvYXJkKCk7XHJcbiAgICAgICAgICB0aGlzLnJlbmRlckJvYXJkKCk7XHJcbiAgICAgICAgICB0aGlzLnBsYXlTbGlkZVNvdW5kKCk7XHJcbiAgICAgICAgICB0aGlzLmJhY2tUaW1lcigpO1xyXG4gICAgICAgIH0sIHRoaXMuYW5pbWF0aW9uVGltZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5jaGVja1dpbih0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfSwgdGhpcy5hbmltYXRpb25UaW1lKTtcclxuICB9XHJcblxyXG4gIG1vdmUoZGlyZWN0aW9uKSB7XHJcbiAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xyXG4gICAgICBjYXNlICd1cCc6XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgdGhpcy5lbXB0eVggIT09IDAgJiZcclxuICAgICAgICAgICh0aGlzLmhpc3RvcnkubGVuZ3RoIDw9IDEgfHwgdGhpcy5lbXB0eVggLSAxICE9PSB0aGlzLmhpc3RvcnlbdGhpcy5oaXN0b3J5Lmxlbmd0aCAtIDJdWzBdKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXSA9IHRoaXMuYXJyW3RoaXMuZW1wdHlYIC0gMV1bdGhpcy5lbXB0eVldO1xyXG4gICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVggLSAxXVt0aGlzLmVtcHR5WV0gPSAwO1xyXG4gICAgICAgICAgdGhpcy5lbXB0eVggLT0gMTtcclxuICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKFsgdGhpcy5lbXB0eVgsIHRoaXMuZW1wdHlZIF0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmNvdW50ZXIgLT0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdkb3duJzpcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0aGlzLmVtcHR5WCAhPT0gdGhpcy5zaXplIC0gMSAmJlxyXG4gICAgICAgICAgKHRoaXMuaGlzdG9yeS5sZW5ndGggPD0gMSB8fCB0aGlzLmVtcHR5WCArIDEgIT09IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnkubGVuZ3RoIC0gMl1bMF0pXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldID0gdGhpcy5hcnJbdGhpcy5lbXB0eVggKyAxXVt0aGlzLmVtcHR5WV07XHJcbiAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WCArIDFdW3RoaXMuZW1wdHlZXSA9IDA7XHJcbiAgICAgICAgICB0aGlzLmVtcHR5WCArPSAxO1xyXG4gICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2goWyB0aGlzLmVtcHR5WCwgdGhpcy5lbXB0eVkgXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuY291bnRlciAtPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHRoaXMuZW1wdHlZICE9PSB0aGlzLnNpemUgLSAxICYmXHJcbiAgICAgICAgICAodGhpcy5oaXN0b3J5Lmxlbmd0aCA8PSAxIHx8IHRoaXMuZW1wdHlZICsgMSAhPT0gdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeS5sZW5ndGggLSAyXVsxXSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV0gPSB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVkgKyAxXTtcclxuICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WSArIDFdID0gMDtcclxuICAgICAgICAgIHRoaXMuZW1wdHlZICs9IDE7XHJcbiAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChbIHRoaXMuZW1wdHlYLCB0aGlzLmVtcHR5WSBdKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5jb3VudGVyIC09IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdsZWZ0JzpcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0aGlzLmVtcHR5WSAhPT0gMCAmJlxyXG4gICAgICAgICAgKHRoaXMuaGlzdG9yeS5sZW5ndGggPD0gMSB8fCB0aGlzLmVtcHR5WSAtIDEgIT09IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnkubGVuZ3RoIC0gMl1bMV0pXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldID0gdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZIC0gMV07XHJcbiAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVkgLSAxXSA9IDA7XHJcbiAgICAgICAgICB0aGlzLmVtcHR5WSAtPSAxO1xyXG4gICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2goWyB0aGlzLmVtcHR5WCwgdGhpcy5lbXB0eVkgXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuY291bnRlciAtPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJz46KCcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlQm9hcmQoKSB7XHJcbiAgICBjb25zdCBhcnIgPSBbXTtcclxuXHJcbiAgICB0aGlzLmJnUG9zQXJyID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2l6ZTsgaSArPSAxKSB7XHJcbiAgICAgIGFycltpXSA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuc2l6ZTsgaiArPSAxKSB7XHJcbiAgICAgICAgaWYgKGkgKyBqICE9PSAodGhpcy5zaXplIC0gMSkgKiAyKSB7XHJcbiAgICAgICAgICBhcnJbaV1bal0gPSBpICogdGhpcy5zaXplICsgaiArIDE7XHJcbiAgICAgICAgICB0aGlzLmJnUG9zQXJyLnB1c2goXHJcbiAgICAgICAgICAgIGAke01hdGgucm91bmQoMTAwIC8gKHRoaXMuc2l6ZSAtIDEpICogail9JSAke01hdGgucm91bmQoMTAwIC8gKHRoaXMuc2l6ZSAtIDEpICogaSl9JWBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGFycltpXVtqXSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXJyO1xyXG4gIH1cclxuXHJcbiAgc2h1ZmZsZSgpIHtcclxuICAgIHRoaXMuaGlzdG9yeS5wdXNoKFsgdGhpcy5lbXB0eVgsIHRoaXMuZW1wdHlZIF0pO1xyXG4gICAgZm9yICh0aGlzLmNvdW50ZXIgPSAwOyB0aGlzLmNvdW50ZXIgPCB0aGlzLnNpemUgKiogMzsgdGhpcy5jb3VudGVyICs9IDEpIHtcclxuICAgICAgc3dpdGNoIChNYXRoLmZsb29yKDQgKiBNYXRoLnJhbmRvbSgpKSkge1xyXG4gICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgIC8vICBNT1ZFIFVQXHJcblxyXG4gICAgICAgICAgdGhpcy5tb3ZlKCd1cCcpO1xyXG5cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgIC8vICBNT1ZFIFJJR0hUXHJcbiAgICAgICAgICB0aGlzLm1vdmUoJ3JpZ2h0Jyk7XHJcblxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgLy8gIE1PVkUgRE9XTlxyXG4gICAgICAgICAgdGhpcy5tb3ZlKCdkb3duJyk7XHJcblxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgLy8gIE1PVkUgTEVGVFxyXG4gICAgICAgICAgdGhpcy5tb3ZlKCdsZWZ0Jyk7XHJcblxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignPjooJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlckJvYXJkKCkge1xyXG4gICAgbGV0IGJvYXJkID0gYDxkaXYgY2xhc3M9XCJzY29yZS1saXN0XCI+dGVzdDwvZGl2PmA7XHJcbiAgICBjb25zdCBib2FyZFdpZHRoID0gYCR7dGhpcy5ib2FyZFdpZHRofXJlbWA7XHJcbiAgICBsZXQgY2VsbE51bWJlcjtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMCwgb3JkZXIgPSAxOyBpIDwgdGhpcy5zaXplOyBpICs9IDEpIHtcclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnNpemU7IGogKz0gMSkge1xyXG4gICAgICAgIGNlbGxOdW1iZXIgPSB0aGlzLmFycltpXVtqXTtcclxuXHJcbiAgICAgICAgY29uc3QgY2xhc3NOYW1lID0gY2VsbE51bWJlciA/ICdjZWxsJyA6ICdjZWxsIGVtcHR5JztcclxuXHJcbiAgICAgICAgY29uc3QgZHJhZ2dhYmxlID0gISFjZWxsTnVtYmVyO1xyXG5cclxuICAgICAgICBjb25zdCBwcmV2ZW50RGVmID0gIWNlbGxOdW1iZXIgPyBcIm9uZHJhZ292ZXIgPSAnZXZlbnQucHJldmVudERlZmF1bHQoKSdcIiA6ICcnO1xyXG4gICAgICAgIGNvbnN0IGJHcG9zID0gdGhpcy5iZ1Bvc0FycltjZWxsTnVtYmVyIC0gMV07XHJcbiAgICAgICAgY29uc3QgYmdGb3JDZWxsID0gY2VsbE51bWJlclxyXG4gICAgICAgICAgPyBgYmFja2dyb3VuZDogdXJsKC4uL2Fzc2V0cy9pbWFnZXMvJHt0aGlzXHJcbiAgICAgICAgICAgICAgLmltZ051bWJ9LmpwZyk7IGJhY2tncm91bmQtcG9zaXRpb246ICR7Ykdwb3N9OyBiYWNrZ3JvdW5kLXNpemU6ICR7Ym9hcmRXaWR0aH07YFxyXG4gICAgICAgICAgOiAnJztcclxuICAgICAgICBvcmRlciArPSAxO1xyXG5cclxuICAgICAgICBib2FyZCArPSBgPGRpdiBcclxuICAgICAgICAke3ByZXZlbnREZWZ9XHJcbiAgICAgICAgICBzdHlsZT0nd2lkdGg6JHt0aGlzLmNlbGxTaXplfXJlbTtcclxuICAgICAgICAgIGhlaWdodDoke3RoaXMuY2VsbFNpemV9cmVtO1xyXG4gICAgICAgICAgb3JkZXI6JHtvcmRlcn07XHJcbiAgICAgICAgICAke2JnRm9yQ2VsbH0nXHJcbiAgICAgICAgICBpZD0nY2VsbC0ke2NlbGxOdW1iZXJ9J1xyXG4gICAgICAgICAgY2xhc3M9JyR7Y2xhc3NOYW1lfSdcclxuICAgICAgICAgIGRyYWdnYWJsZT1cIiR7ZHJhZ2dhYmxlfVwiPiR7Y2VsbE51bWJlcn08L2Rpdj5gO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdib2FyZCcpO1xyXG4gICAgZWxlbWVudC5zdHlsZS53aWR0aCA9IGJvYXJkV2lkdGg7XHJcbiAgICBlbGVtZW50LmlubmVySFRNTCA9IGJvYXJkO1xyXG5cclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBkcmF3KCkge1xyXG4gICAgY29uc3QgcmVtUGVyVGljayA9IHRoaXMuY2VsbFNpemUgLyB0aGlzLmFuaW1hdGlvblRpbWUgKiB0aGlzLnRpbWVQYXNzZWQ7XHJcbiAgICBzd2l0Y2ggKHRoaXMuZGlyZWN0aW9uKSB7XHJcbiAgICAgIGNhc2UgJ3VwJzpcclxuICAgICAgICB0aGlzLmUuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSggMCwgJHstcmVtUGVyVGlja31yZW0pYDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnZG93bic6XHJcbiAgICAgICAgdGhpcy5lLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoIDAsICR7cmVtUGVyVGlja31yZW0pYDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgICAgdGhpcy5lLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoICR7LXJlbVBlclRpY2t9cmVtLCAwKWA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgICB0aGlzLmUuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSggJHtyZW1QZXJUaWNrfXJlbSwgMClgO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignPjooJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtb3ZlQW5pbWF0aW9uKFsgeCwgeSBdKSB7XHJcbiAgICBpZiAodGhpcy5lbXB0eVggPCB4KSB7XHJcbiAgICAgIHRoaXMuZGlyZWN0aW9uID0gJ3VwJztcclxuICAgIH0gZWxzZSBpZiAodGhpcy5lbXB0eVggPiB4KSB7XHJcbiAgICAgIHRoaXMuZGlyZWN0aW9uID0gJ2Rvd24nO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmVtcHR5WSA8IHkpIHtcclxuICAgICAgdGhpcy5kaXJlY3Rpb24gPSAnbGVmdCc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZW1wdHlZID4geSkge1xyXG4gICAgICB0aGlzLmRpcmVjdGlvbiA9ICdyaWdodCc7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pbkFuaW1hdGlvbiA9IHRydWU7XHJcbiAgICB0aGlzLnN0YXJ0ID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICB0aGlzLnRpbWVQYXNzZWQgPSBEYXRlLm5vdygpIC0gdGhpcy5zdGFydDtcclxuXHJcbiAgICAgIGlmICh0aGlzLnRpbWVQYXNzZWQgPj0gdGhpcy5hbmltYXRpb25UaW1lKSB7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcclxuICAgICAgICB0aGlzLmluQW5pbWF0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmRyYXcoKTtcclxuICAgIH0sIDIwKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZVNvdW5kKCkge1xyXG4gICAgdGhpcy5zb3VuZE9uID0gIXRoaXMuc291bmRPbjtcclxuICB9XHJcblxyXG4gIHN3YXAobnVtYmVyKSB7XHJcbiAgICBpZiAodGhpcy5pbkFuaW1hdGlvbikgcmV0dXJuO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hcnIubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmFycltpXS5sZW5ndGg7IGogKz0gMSkge1xyXG4gICAgICAgIGlmICh0aGlzLmFycltpXVtqXSA9PT0gbnVtYmVyKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5pc05lYXJaZXJvKGksIGopKSB7XHJcbiAgICAgICAgICAgIC8vIE1vdmUgY291bnRlclxyXG4gICAgICAgICAgICB0aGlzLm1vdmVzQ291bnRlciArPSAxO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW92ZScpLmlubmVySFRNTCA9IHRoaXMubW92ZXNDb3VudGVyO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgemVybyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNjZWxsLSR7dGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXX1gKTtcclxuICAgICAgICAgICAgdGhpcy5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2NlbGwtJHt0aGlzLmFycltpXVtqXX1gKTtcclxuXHJcbiAgICAgICAgICAgIC8vICBmaW5kIHdoZXJlIGFyZSB3ZSBtb3ZpbmdcclxuICAgICAgICAgICAgdGhpcy5tb3ZlQW5pbWF0aW9uKFsgaSwgaiBdKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucGxheVNsaWRlU291bmQoKTtcclxuXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSB6ZXJvLnN0eWxlLm9yZGVyO1xyXG4gICAgICAgICAgICAgIHplcm8uc3R5bGUub3JkZXIgPSB0aGlzLmUuc3R5bGUub3JkZXI7XHJcbiAgICAgICAgICAgICAgdGhpcy5lLnN0eWxlLm9yZGVyID0gdGVtcDtcclxuXHJcbiAgICAgICAgICAgICAgdGhpcy5lLnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xyXG5cclxuICAgICAgICAgICAgICBpZiAodGhpcy5lbXB0eVggPT09IHRoaXMuZW1wdHlZICYmIHRoaXMuZW1wdHlZID09PSB0aGlzLnNpemUgLSAxKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja1dpbigpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudGltZXJDLnRpbWVyUGF1c2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIHRoaXMuYW5pbWF0aW9uVGltZSk7XHJcbiAgICAgICAgICAgIFsgdGhpcy5hcnJbaV1bal0sIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV0gXSA9IFtcclxuICAgICAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldLFxyXG4gICAgICAgICAgICAgIHRoaXMuYXJyW2ldW2pdXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIHRoaXMuZW1wdHlYID0gaTtcclxuICAgICAgICAgICAgdGhpcy5lbXB0eVkgPSBqO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGVja0ZvcklkbGluZygpO1xyXG4gICAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChbIHRoaXMuZW1wdHlYLCB0aGlzLmVtcHR5WSBdKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0U2NvcmUoKSB7XHJcbiAgICBsZXQgc2NvcmVMaXN0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2NvcmUtbGlzdCcpKSB8fCBbXTtcclxuICAgIHNjb3JlTGlzdC5wdXNoKHsgbW92ZXM6IHRoaXMubW92ZXNDb3VudGVyLCBzaXplOiB0aGlzLnNpemUsIHRpbWU6IHRoaXMudGltZXJDLnRpbWVyIH0pO1xyXG4gICAgaWYgKHNjb3JlTGlzdC5sZW5ndGggPiAxMCkge1xyXG4gICAgICBzY29yZUxpc3Quc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgIHJldHVybiBhLm1vdmVzIC0gYi5tb3ZlcztcclxuICAgICAgfSk7XHJcbiAgICAgIHNjb3JlTGlzdCA9IHNjb3JlTGlzdC5zbGljZSgwLCAxMCk7XHJcbiAgICB9XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2NvcmUtbGlzdCcsIEpTT04uc3RyaW5naWZ5KHNjb3JlTGlzdCkpO1xyXG4gIH1cclxuXHJcbiAgZ2V0U2NvcmVMaXN0KCkge1xyXG4gICAgdGhpcy5zY29yZUxpc3QgPSAhdGhpcy5zY29yZUxpc3Q7XHJcblxyXG4gICAgY29uc3Qgc2NvcmVFbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNjb3JlLWxpc3QnKTtcclxuICAgIGNvbnN0IHNjb3JlTGlzdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Njb3JlLWxpc3QnKSkgfHwgW107XHJcbiAgICBsZXQgbGlzdCA9ICcnO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSBzY29yZUxpc3QubGVuZ3RoIC0gMTsgaSA+PSAwOyBpIC09IDEpIHtcclxuICAgICAgbGlzdCArPSBgPGxpPlNpemU6ICR7c2NvcmVMaXN0W2ldLnNpemV9LCZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwO01vdmVzOiAke3Njb3JlTGlzdFtpXVxyXG4gICAgICAgIC5tb3Zlc30sJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7VGltZTogJHtzY29yZUxpc3RbaV0udGltZX08L2xpPmA7XHJcbiAgICB9XHJcbiAgICBzY29yZUVsZW0uaW5uZXJIVE1MID0gYDxoMj5CZXN0IFNjb3JlczwvaDI+XHJcbiAgICAgIDxvbCBjbGFzcz1cInNjb3JlXCI+JHtsaXN0fTwvb2w+YDtcclxuICAgIGlmICh0aGlzLnNjb3JlTGlzdCkge1xyXG4gICAgICBzY29yZUVsZW0uY2xhc3NMaXN0LmFkZCgnc2NvcmUtbGlzdC1vbicpO1xyXG4gICAgICB0aGlzLnRpbWVyQy50aW1lclBhdXNlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzY29yZUVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnc2NvcmUtbGlzdC1vbicpO1xyXG4gICAgICB0aGlzLnRpbWVyQy5jYWxjQ3VycmVudFRpbWUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNoZWNrV2luKGNoZWF0KSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2l6ZTsgaSArPSAxKSB7XHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5zaXplOyBqICs9IDEpIHtcclxuICAgICAgICBpZiAoaSArIGogIT09ICh0aGlzLnNpemUgLSAxKSAqIDIpIHtcclxuICAgICAgICAgIGlmICh0aGlzLndpbltpXVtqXSAhPT0gdGhpcy5hcnJbaV1bal0pIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMucGxheVdpblNvdW5kKCk7XHJcbiAgICB0aGlzLnNldFdpbk1lc3NhZ2UoY2hlYXQpO1xyXG4gICAgdGhpcy5zZXRTY29yZSgpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICBzZXRXaW5NZXNzYWdlKGNoZWF0KSB7XHJcbiAgICB0aGlzLndpbkJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJvYXJkJyk7XHJcbiAgICB0aGlzLndpbkJvYXJkLmNsYXNzTGlzdC5hZGQoJ3dpbicpO1xyXG5cclxuICAgIHRoaXMud2luQm9hcmQuaW5uZXJIVE1MICs9IGA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKC4uL2Fzc2V0cy9pbWFnZXMvJHt0aGlzXHJcbiAgICAgIC5pbWdOdW1ifS5qcGcpO1wiIGNsYXNzPSd3aW4tdGV4dCc+JHtjaGVhdFxyXG4gICAgICA/ICfQp9CY0KLQldCgISdcclxuICAgICAgOiBg0KPRgNCwISDQktGLINGA0LXRiNC40LvQuCDQs9C+0LvQvtCy0L7Qu9C+0LzQutGDINC30LAgJHtkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGltZScpXHJcbiAgICAgICAgICAuaW5uZXJIVE1MfSDQuCAke2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb3ZlJykuaW5uZXJIVE1MfSDRhdC+0LTQvtCyPC9kaXY+YH08L2Rpdj5gO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMud2luQm9hcmQucXVlcnlTZWxlY3RvcignLndpbi10ZXh0Jykuc3R5bGUub3BhY2l0eSA9IDE7XHJcbiAgICB9LCA1MCk7XHJcbiAgfVxyXG5cclxuICBwbGF5V2luU291bmQoKSB7XHJcbiAgICBpZiAoIXRoaXMuc291bmRPbikgcmV0dXJuO1xyXG4gICAgdGhpcy53aW5Tb3VuZC5jdXJyZW50VGltZSA9IDA7XHJcbiAgICB0aGlzLndpblNvdW5kLnBsYXkoKTtcclxuICB9XHJcblxyXG4gIHBsYXlTbGlkZVNvdW5kKCkge1xyXG4gICAgaWYgKCF0aGlzLnNvdW5kT24pIHJldHVybjtcclxuICAgIHRoaXMuc2xpZGVTb3VuZC5jdXJyZW50VGltZSA9IDA7XHJcbiAgICB0aGlzLnNsaWRlU291bmQucGxheSgpO1xyXG4gIH1cclxuXHJcbiAgcGxheURyYWdTb3VuZCgpIHtcclxuICAgIGlmICghdGhpcy5zb3VuZE9uKSByZXR1cm47XHJcbiAgICB0aGlzLmRyYWdORHJvcFNvdW5kLmN1cnJlbnRUaW1lID0gMC4xNTtcclxuICAgIHRoaXMuZHJhZ05Ecm9wU291bmQucGxheSgpO1xyXG4gIH1cclxuXHJcbiAgZHJhZ1N0YXJ0KCkge1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG5cclxuICBkcmFnRW5kKCkge1xyXG4gICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XHJcbiAgfVxyXG5cclxuICBkcmFnRW50ZXIoKSB7XHJcbiAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2hvdmVyZWQnKTtcclxuICB9XHJcblxyXG4gIGRyYWdMZWF2ZSgpIHtcclxuICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnaG92ZXJlZCcpO1xyXG4gIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMuc2NvcmVMaXN0ID0gZmFsc2U7XHJcbiAgICB0aGlzLnJhbmRvbUltZ051bWJlcigxNTAsIDEpO1xyXG4gICAgdGhpcy5oaXN0b3J5ID0gW107XHJcbiAgICB0aGlzLm1vdmVzQ291bnRlciA9IDA7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW92ZScpLmlubmVySFRNTCA9IHRoaXMubW92ZXNDb3VudGVyO1xyXG4gICAgdGhpcy5zaXplID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkU2l6ZScpLnZhbHVlO1xyXG5cclxuICAgIHRoaXMuY2VsbFNpemUgPSBwYXJzZUZsb2F0KHRoaXMuYm9hcmRXaWR0aCAvIHRoaXMuc2l6ZSAtIDIgKiB0aGlzLm1hcmdpblNpemUpLnRvRml4ZWQoMyk7XHJcblxyXG4gICAgdGhpcy5yZW1vdmVCb2FyZCgpO1xyXG5cclxuICAgIHRoaXMuZW1wdHlYID0gdGhpcy5zaXplIC0gMTtcclxuICAgIHRoaXMuZW1wdHlZID0gdGhpcy5zaXplIC0gMTtcclxuXHJcbiAgICB0aGlzLmFyciA9IHRoaXMuY3JlYXRlQm9hcmQoKTtcclxuICAgIHRoaXMud2luID0gdGhpcy5jcmVhdGVCb2FyZCgpO1xyXG5cclxuICAgIHRoaXMuc2h1ZmZsZSgpO1xyXG5cclxuICAgIHRoaXMucmVuZGVyQm9hcmQoKTtcclxuICAgIHRoaXMudGltZXJDLmluaXQoKTtcclxuXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpLmZvckVhY2goKGNlbGwpID0+IHtcclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKGV2dCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGVsZW0gPSBldnQudGFyZ2V0O1xyXG4gICAgICAgIHRoaXMuc3dhcChwYXJzZUludChlbGVtLmlubmVySFRNTCwgMTApKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIHRoaXMuZHJhZ1N0YXJ0KTtcclxuXHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCB0aGlzLmRyYWdPdmVyKTtcclxuXHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIHRoaXMuZHJhZ0Ryb3ApO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgdGhpcy5kcmFnRW5kKTtcclxuXHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgdGhpcy5kcmFnRW50ZXIpO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCB0aGlzLmRyYWdMZWF2ZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGxvYWQoKSB7XHJcbiAgICB0aGlzLmNlbGxTaXplID0gcGFyc2VGbG9hdCh0aGlzLmJvYXJkV2lkdGggLyB0aGlzLnNpemUgLSAyICogdGhpcy5tYXJnaW5TaXplKS50b0ZpeGVkKDMpO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vdmUnKS5pbm5lckhUTUwgPSB0aGlzLm1vdmVzQ291bnRlcjtcclxuICAgIHRoaXMucmVtb3ZlQm9hcmQoKTtcclxuICAgIHRoaXMucmVuZGVyQm9hcmQoKTtcclxuICAgIHRoaXMud2luID0gdGhpcy5jcmVhdGVCb2FyZCgpO1xyXG4gICAgdGhpcy50aW1lckMuaW5pdCgpO1xyXG5cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJykuZm9yRWFjaCgoY2VsbCkgPT4ge1xyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZWxlbSA9IGV2dC50YXJnZXQ7XHJcbiAgICAgICAgdGhpcy5zd2FwKHBhcnNlSW50KGVsZW0uaW5uZXJIVE1MLCAxMCkpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgdGhpcy5kcmFnU3RhcnQpO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoaXMuZHJhZ092ZXIpO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgdGhpcy5kcmFnRHJvcCk7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCB0aGlzLmRyYWdFbmQpO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCB0aGlzLmRyYWdFbnRlcik7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIHRoaXMuZHJhZ0xlYXZlKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9