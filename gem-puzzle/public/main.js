(()=>{"use strict";class t{constructor(){this.currentTime=0}calcCurrentTime(){this.time=setInterval((()=>{this.currentTime+=1,this.secToMinAndSec()}),1e3)}secToMinAndSec(){this.minutes=Math.floor(this.currentTime/60),this.sec=(this.currentTime%60).toFixed(0),this.timer=`${this.minutes}:${this.sec<10?"0":""}${this.sec}`,this.renderTimer()}timerStop(){clearInterval(this.time),this.timer="0:00",this.renderTimer()}timerPause(){clearInterval(this.time)}renderTimer(){document.querySelector(".time").innerHTML=this.timer}init(){this.timerStop(),this.currentTime=null,this.calcCurrentTime()}load(){this.timerStop(),this.secToMinAndSec(),this.renderTimer(),this.calcCurrentTime()}}const e=new class{constructor(){this.timerC=new t,this.history=[],this.size=4,this.emptyX=0,this.emptyY=0,this.animationTime=200,this.boardWidth=40.8,this.marginSize=.1,this.soundOn=!0,this.winSound=new Audio("../assets/win.mp3"),this.slideSound=new Audio("../assets/slide.mp3"),this.slideSound.volume=.2,this.removeBoard=()=>{document.querySelectorAll(".board").forEach((t=>{document.body.removeChild(t)}))}}randomImgNumber(t,e){this.imgNumb=Math.floor(Math.random()*(t-e)+e)}back(){this.history.pop(),this.backTimer()}backTimer(){setTimeout((()=>{if(this.history.length){const[t,e]=this.history.pop();this.e=document.querySelector("#cell-"+this.arr[t][e]),this.moveAnimation([t,e]),setTimeout((()=>{const i=this.arr[this.emptyX][this.emptyY];this.arr[this.emptyX][this.emptyY]=this.arr[t][e],this.arr[t][e]=i,this.emptyX=t,this.emptyY=e,this.removeBoard(),this.renderBoard(),this.playSlideSound(),this.backTimer()}),this.animationTime)}else this.checkWin(!0)}),this.animationTime)}move(t){switch(t){case"up":0!==this.emptyX&&(this.history.length<=2||this.emptyX-1!==this.history[this.history.length-2][0])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX-1][this.emptyY],this.arr[this.emptyX-1][this.emptyY]=0,this.emptyX-=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;case"down":this.emptyX!==this.size-1&&(this.history.length<=2||this.emptyX+1!==this.history[this.history.length-2][0])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX+1][this.emptyY],this.arr[this.emptyX+1][this.emptyY]=0,this.emptyX+=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;case"right":this.emptyY!==this.size-1&&(this.history.length<=2||this.emptyY+1!==this.history[this.history.length-2][1])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX][this.emptyY+1],this.arr[this.emptyX][this.emptyY+1]=0,this.emptyY+=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;case"left":0!==this.emptyY&&(this.history.length<=2||this.emptyY-1!==this.history[this.history.length-2][1])?(this.arr[this.emptyX][this.emptyY]=this.arr[this.emptyX][this.emptyY-1],this.arr[this.emptyX][this.emptyY-1]=0,this.emptyY-=1,this.history.push([this.emptyX,this.emptyY])):this.counter-=1;break;default:throw new Error(">:(")}}createBoard(){const t=[];this.bgPosArr=[];for(let e=0;e<this.size;e+=1){t[e]=[];for(let i=0;i<this.size;i+=1)e+i!==2*(this.size-1)?(t[e][i]=e*this.size+i+1,this.bgPosArr.push(`${Math.round(100/(this.size-1)*i)}% ${Math.round(100/(this.size-1)*e)}%`)):t[e][i]=0}return t}shuffle(){for(this.history.push([this.emptyX,this.emptyY]),this.counter=0;this.counter<this.size**3;this.counter+=1)switch(Math.floor(4*Math.random())){case 0:this.move("up");break;case 1:this.move("right");break;case 2:this.move("down");break;case 3:this.move("left");break;default:throw new Error(">:(")}}renderBoard(){let t='<div class="score-list">test</div>';const e=this.boardWidth+"rem";let i;for(let s=0,r=1;s<this.size;s+=1)for(let n=0;n<this.size;n+=1){i=this.arr[s][n];const h=this.arr[s][n]?"cell":"cell empty",o=!!this.arr[s][n],a=this.bgPosArr[i-1],m=this.arr[s][n]?`background: url(../assets/images/${this.imgNumb}.jpg); background-position: ${a}; background-size: ${e};`:"";r+=1,t+=`<div \n          style='width:${this.cellSize}rem;\n          height:${this.cellSize}rem;\n          order:${r};\n          ${m}'\n          id='cell-${i}'\n          class='${h}'\n          draggable="${o}">${i}</div>`}const s=document.createElement("div");s.classList.add("board"),s.style.width=e,s.innerHTML=t,document.body.appendChild(s)}draw(){const t=this.cellSize/this.animationTime*this.timePassed;switch(this.direction){case"up":this.e.style.transform=`translate( 0, ${-t}rem)`;break;case"down":this.e.style.transform=`translate( 0, ${t}rem)`;break;case"left":this.e.style.transform=`translate( ${-t}rem, 0)`;break;case"right":this.e.style.transform=`translate( ${t}rem, 0)`;break;default:throw new Error(">:(")}}moveAnimation([t,e]){this.emptyX<t?this.direction="up":this.emptyX>t?this.direction="down":this.emptyY<e?this.direction="left":this.emptyY>e&&(this.direction="right"),this.inAnimation=!0,this.start=Date.now(),this.timer=setInterval((()=>{if(this.timePassed=Date.now()-this.start,this.timePassed>=this.animationTime)return clearInterval(this.timer),void(this.inAnimation=!1);this.draw()}),20)}toggleSound(){this.soundOn=!this.soundOn}swap(t){if(!this.inAnimation)for(let e=0;e<this.arr.length;e+=1)for(let i=0;i<this.arr[e].length;i+=1)if(this.arr[e][i]===t&&(Math.abs(this.emptyX-e)<=1&&this.emptyY-i==0||Math.abs(this.emptyY-i)<=1&&this.emptyX-e==0)){this.movesCounter+=1,document.querySelector(".move").innerHTML=this.movesCounter;const t=document.querySelector("#cell-"+this.arr[this.emptyX][this.emptyY]);return this.e=document.querySelector("#cell-"+this.arr[e][i]),this.moveAnimation([e,i]),this.playSlideSound(),setTimeout((()=>{const e=t.style.order;t.style.order=this.e.style.order,this.e.style.order=e,this.e.style.transform="",this.emptyX===this.emptyY&&this.emptyY===this.size-1&&this.checkWin()&&this.timerC.timerPause()}),this.animationTime),[this.arr[e][i],this.arr[this.emptyX][this.emptyY]]=[this.arr[this.emptyX][this.emptyY],this.arr[e][i]],this.emptyX=e,this.emptyY=i,void this.history.push([this.emptyX,this.emptyY])}}setScore(){let t=JSON.parse(localStorage.getItem("score-list"))||[];t.push({moves:this.movesCounter,size:this.size,time:this.timerC.timer}),t.length>10&&(t.sort(((t,e)=>t.moves-e.moves)),t=t.slice(0,10)),localStorage.setItem("score-list",JSON.stringify(t))}getScoreList(){this.scoreList=!this.scoreList;const t=document.querySelector(".score-list"),e=JSON.parse(localStorage.getItem("score-list"))||[];let i="";for(let t=e.length-1;t>=0;t-=1)i+=`<li>Size: ${e[t].size},&nbsp;&nbsp;&nbsp;&nbsp;Moves: ${e[t].moves},&nbsp;&nbsp;&nbsp;&nbsp;Time: ${e[t].time}</li>`;t.innerHTML=`<h2>Best Scores</h2>\n      <ol class="score">${i}</ol>`,this.scoreList?(t.classList.add("score-list-on"),this.timerC.timerPause()):(t.classList.remove("score-list-on"),this.timerC.calcCurrentTime())}checkWin(t){for(let t=0;t<this.size;t+=1)for(let e=0;e<this.size;e+=1)if(t+e!==2*(this.size-1)&&this.win[t][e]!==this.arr[t][e])return!1;return this.playWinSound(),this.setWinMessage(t),this.setScore(),!0}setWinMessage(t){this.winBoard=document.querySelector(".board"),this.winBoard.classList.add("win"),this.winBoard.innerHTML+=`<div style="background-image: url(../assets/images/${this.imgNumb}.jpg);" class='win-text'>${t?"ЧИТЕР!":`Ура! Вы решили головоломку за ${document.querySelector(".time").innerHTML} и ${document.querySelector(".move").innerHTML} ходов</div>`}</div>`,setTimeout((()=>{this.winBoard.querySelector(".win-text").style.opacity=1}),50)}playWinSound(){this.soundOn&&(this.winSound.currentTime=0,this.winSound.play())}playSlideSound(){this.soundOn&&(this.slideSound.currentTime=0,this.slideSound.play())}init(){this.scoreList=!1,this.randomImgNumber(150,1),this.history=[],this.movesCounter=0,document.querySelector(".move").innerHTML=this.movesCounter,this.size=document.getElementById("fieldSize").value,this.cellSize=parseFloat(this.boardWidth/this.size-2*this.marginSize).toFixed(3),this.removeBoard(),this.emptyX=this.size-1,this.emptyY=this.size-1,this.arr=this.createBoard(),this.win=this.createBoard(),this.shuffle(),this.renderBoard(),this.timerC.init(),document.querySelectorAll(".cell").forEach((t=>{t.addEventListener("mouseup",(t=>{const e=t.target;this.swap(parseInt(e.innerHTML,10))})),t.addEventListener("dragstart",this.dragStart),t.addEventListener("dragover",this.dragOver),t.addEventListener("drop",this.dragDrop),t.addEventListener("dragend",this.dragEnd)}))}load(){this.cellSize=parseFloat(this.boardWidth/this.size-2*this.marginSize).toFixed(3),document.querySelector(".move").innerHTML=this.movesCounter,this.removeBoard(),this.renderBoard(),this.win=this.createBoard(),this.timerC.init(),document.querySelectorAll(".cell").forEach((t=>{t.addEventListener("mouseup",(t=>{const e=t.target;this.swap(parseInt(e.innerHTML,10))})),t.addEventListener("dragstart",this.dragStart),t.addEventListener("dragover",this.dragOver),t.addEventListener("drop",this.dragDrop),t.addEventListener("dragend",this.dragEnd)}))}},i=document.createElement("header");i.classList.add("header"),i.innerHTML='<h1 class="heading">gem puzzle</h1>',document.body.appendChild(i);const s=document.createElement("div");s.classList.add("menu"),s.innerHTML=`  \n  <div class="settings">\n    <button class="new-game btn">New</button>\n    <button class="save btn">Save</button>\n    <button class="load btn">Load</button>\n    <button class="score btn">Score</button>\n    <button class="sound btn ${e.soundOn?"btn-on":""}">Sound</button>\n    <div class="size">\n      <select id="fieldSize">\n      <option selected="selected" value="4" disabled>Field size</option>\n        <option value="3">3</option>\n        <option value="4">4</option>\n        <option value="5">5</option>\n        <option value="6">6</option>\n        <option value="7">7</option>\n        <option value="8">8</option>\n      </select>\n    </div>\n    <button class="cheat btn">CHEAT</button>\n  </div>\n  <div class="counters">\n    <div class="timer"><span>Timer: </span><span class="time">0:00</span></div>\n    <div class="moves"><span>Moves: </span><span class="move">0</span></div>\n  </div>`,document.body.appendChild(s),e.init(),document.querySelector(".new-game").addEventListener("click",(()=>{e.init()})),document.querySelector(".save").addEventListener("click",(()=>{localStorage.setItem("gameSave",JSON.stringify({bgPosition:e.bgPosArr,history:e.history,size:e.size,boardTable:e.arr,time:e.timerC.currentTime,moves:e.movesCounter,zero:[e.emptyX,e.emptyY],imgNumb:e.imgNumb}))})),document.querySelector(".load").addEventListener("click",(()=>{const{bgPosition:t,history:i,size:s,boardTable:r,time:n,moves:h,zero:o,imgNumb:a}=JSON.parse(localStorage.getItem("gameSave"));e.bgPosArr=t,e.history=i,e.size=s,e.timerC.currentTime=n,e.movesCounter=h,e.arr=r,[e.emptyX,e.emptyY]=o,e.imgNumb=a,e.load(),e.timerC.load()})),document.getElementById("fieldSize").addEventListener("change",(()=>{e.init(),e.timerC.init()})),document.querySelector(".cheat").addEventListener("click",(()=>{e.timerC.timerPause(),e.back()})),document.querySelector(".sound").addEventListener("click",(t=>{e.toggleSound(),e.soundOn?t.target.classList.add("btn-on"):t.target.classList.remove("btn-on")})),document.querySelector(".score").addEventListener("click",(t=>{e.getScoreList(),e.scoreList?t.target.classList.add("btn-on"):t.target.classList.remove("btn-on")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZW0tcHV6emxlLy4vc3JjL1RpbWVyLmpzIiwid2VicGFjazovL2dlbS1wdXp6bGUvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZ2VtLXB1enpsZS8uL3NyYy9Cb2FyZC5qcyJdLCJuYW1lcyI6WyJUaW1lciIsInRoaXMiLCJjdXJyZW50VGltZSIsInRpbWUiLCJzZXRJbnRlcnZhbCIsInNlY1RvTWluQW5kU2VjIiwibWludXRlcyIsIk1hdGgiLCJmbG9vciIsInNlYyIsInRvRml4ZWQiLCJ0aW1lciIsInJlbmRlclRpbWVyIiwiY2xlYXJJbnRlcnZhbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsInRpbWVyU3RvcCIsImNhbGNDdXJyZW50VGltZSIsImJvYXJkIiwidGltZXJDIiwiaGlzdG9yeSIsInNpemUiLCJlbXB0eVgiLCJlbXB0eVkiLCJhbmltYXRpb25UaW1lIiwiYm9hcmRXaWR0aCIsIm1hcmdpblNpemUiLCJzb3VuZE9uIiwid2luU291bmQiLCJBdWRpbyIsInNsaWRlU291bmQiLCJ2b2x1bWUiLCJyZW1vdmVCb2FyZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWxlbSIsImJvZHkiLCJyZW1vdmVDaGlsZCIsIm1heCIsIm1pbiIsImltZ051bWIiLCJyYW5kb20iLCJwb3AiLCJiYWNrVGltZXIiLCJzZXRUaW1lb3V0IiwibGVuZ3RoIiwieCIsInkiLCJlIiwiYXJyIiwibW92ZUFuaW1hdGlvbiIsInRlbXAiLCJyZW5kZXJCb2FyZCIsInBsYXlTbGlkZVNvdW5kIiwiY2hlY2tXaW4iLCJkaXJlY3Rpb24iLCJwdXNoIiwiY291bnRlciIsIkVycm9yIiwiYmdQb3NBcnIiLCJpIiwiaiIsInJvdW5kIiwibW92ZSIsImNlbGxOdW1iZXIiLCJvcmRlciIsImNsYXNzTmFtZSIsImRyYWdnYWJsZSIsImJHcG9zIiwiYmdGb3JDZWxsIiwiY2VsbFNpemUiLCJlbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInN0eWxlIiwid2lkdGgiLCJhcHBlbmRDaGlsZCIsInJlbVBlclRpY2siLCJ0aW1lUGFzc2VkIiwidHJhbnNmb3JtIiwiaW5BbmltYXRpb24iLCJzdGFydCIsIkRhdGUiLCJub3ciLCJkcmF3IiwibnVtYmVyIiwiYWJzIiwibW92ZXNDb3VudGVyIiwiemVybyIsInRpbWVyUGF1c2UiLCJzY29yZUxpc3QiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwibW92ZXMiLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJzY29yZUVsZW0iLCJsaXN0IiwicmVtb3ZlIiwiY2hlYXQiLCJ3aW4iLCJwbGF5V2luU291bmQiLCJzZXRXaW5NZXNzYWdlIiwic2V0U2NvcmUiLCJ3aW5Cb2FyZCIsIm9wYWNpdHkiLCJwbGF5IiwicmFuZG9tSW1nTnVtYmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJ2YWx1ZSIsInBhcnNlRmxvYXQiLCJjcmVhdGVCb2FyZCIsInNodWZmbGUiLCJpbml0IiwiY2VsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJ0YXJnZXQiLCJzd2FwIiwicGFyc2VJbnQiLCJkcmFnU3RhcnQiLCJkcmFnT3ZlciIsImRyYWdEcm9wIiwiZHJhZ0VuZCIsImhlYWRlciIsIm1lbnUiLCJiZ1Bvc2l0aW9uIiwiYm9hcmRUYWJsZSIsImxvYWQiLCJiYWNrIiwidG9nZ2xlU291bmQiLCJnZXRTY29yZUxpc3QiXSwibWFwcGluZ3MiOiJtQkFBZSxNQUFNQSxFQUNuQixjQUNFQyxLQUFLQyxZQUFjLEVBR3JCLGtCQUNFRCxLQUFLRSxLQUFPQyxhQUFZLEtBQ3RCSCxLQUFLQyxhQUFlLEVBQ3BCRCxLQUFLSSxtQkFDSixLQUdMLGlCQUNFSixLQUFLSyxRQUFVQyxLQUFLQyxNQUFNUCxLQUFLQyxZQUFjLElBRTdDRCxLQUFLUSxLQUFPUixLQUFLQyxZQUFjLElBQUlRLFFBQVEsR0FDM0NULEtBQUtVLE1BQVEsR0FB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QUFVZ0MsT0FBTyxjIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBUaW1lciB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmN1cnJlbnRUaW1lID0gMDtcclxuICB9XHJcblxyXG4gIGNhbGNDdXJyZW50VGltZSgpIHtcclxuICAgIHRoaXMudGltZSA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgdGhpcy5jdXJyZW50VGltZSArPSAxO1xyXG4gICAgICB0aGlzLnNlY1RvTWluQW5kU2VjKCk7XHJcbiAgICB9LCAxMDAwKTtcclxuICB9XHJcblxyXG4gIHNlY1RvTWluQW5kU2VjKCkge1xyXG4gICAgdGhpcy5taW51dGVzID0gTWF0aC5mbG9vcih0aGlzLmN1cnJlbnRUaW1lIC8gNjApO1xyXG5cclxuICAgIHRoaXMuc2VjID0gKHRoaXMuY3VycmVudFRpbWUgJSA2MCkudG9GaXhlZCgwKTtcclxuICAgIHRoaXMudGltZXIgPSBgJHt0aGlzLm1pbnV0ZXN9OiR7dGhpcy5zZWMgPCAxMCA/ICcwJyA6ICcnfSR7dGhpcy5zZWN9YDtcclxuICAgIHRoaXMucmVuZGVyVGltZXIoKTtcclxuICB9XHJcblxyXG4gIHRpbWVyU3RvcCgpIHtcclxuICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lKTtcclxuICAgIHRoaXMudGltZXIgPSAnMDowMCc7XHJcbiAgICB0aGlzLnJlbmRlclRpbWVyKCk7XHJcbiAgfVxyXG5cclxuICB0aW1lclBhdXNlKCkge1xyXG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWUpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyVGltZXIoKSB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGltZScpLmlubmVySFRNTCA9IHRoaXMudGltZXI7XHJcbiAgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy50aW1lclN0b3AoKTtcclxuICAgIHRoaXMuY3VycmVudFRpbWUgPSBudWxsO1xyXG4gICAgdGhpcy5jYWxjQ3VycmVudFRpbWUoKTtcclxuICB9XHJcblxyXG4gIGxvYWQoKSB7XHJcbiAgICB0aGlzLnRpbWVyU3RvcCgpO1xyXG4gICAgdGhpcy5zZWNUb01pbkFuZFNlYygpO1xyXG4gICAgdGhpcy5yZW5kZXJUaW1lcigpO1xyXG5cclxuICAgIHRoaXMuY2FsY0N1cnJlbnRUaW1lKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBCb2FyZCBmcm9tICcuL0JvYXJkLmpzJztcclxuXHJcbmNvbnN0IGJvYXJkID0gbmV3IEJvYXJkKCk7XHJcblxyXG5jb25zdCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoZWFkZXInKTtcclxuaGVhZGVyLmNsYXNzTGlzdC5hZGQoJ2hlYWRlcicpO1xyXG5oZWFkZXIuaW5uZXJIVE1MID0gJzxoMSBjbGFzcz1cImhlYWRpbmdcIj5nZW0gcHV6emxlPC9oMT4nO1xyXG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGhlYWRlcik7XHJcblxyXG5jb25zdCBtZW51ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbm1lbnUuY2xhc3NMaXN0LmFkZCgnbWVudScpO1xyXG5cclxubWVudS5pbm5lckhUTUwgPSBgICBcclxuICA8ZGl2IGNsYXNzPVwic2V0dGluZ3NcIj5cclxuICAgIDxidXR0b24gY2xhc3M9XCJuZXctZ2FtZSBidG5cIj5OZXc8L2J1dHRvbj5cclxuICAgIDxidXR0b24gY2xhc3M9XCJzYXZlIGJ0blwiPlNhdmU8L2J1dHRvbj5cclxuICAgIDxidXR0b24gY2xhc3M9XCJsb2FkIGJ0blwiPkxvYWQ8L2J1dHRvbj5cclxuICAgIDxidXR0b24gY2xhc3M9XCJzY29yZSBidG5cIj5TY29yZTwvYnV0dG9uPlxyXG4gICAgPGJ1dHRvbiBjbGFzcz1cInNvdW5kIGJ0biAke2JvYXJkLnNvdW5kT24gPyAnYnRuLW9uJyA6ICcnfVwiPlNvdW5kPC9idXR0b24+XHJcbiAgICA8ZGl2IGNsYXNzPVwic2l6ZVwiPlxyXG4gICAgICA8c2VsZWN0IGlkPVwiZmllbGRTaXplXCI+XHJcbiAgICAgIDxvcHRpb24gc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiIHZhbHVlPVwiNFwiIGRpc2FibGVkPkZpZWxkIHNpemU8L29wdGlvbj5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiM1wiPjM8L29wdGlvbj5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiNFwiPjQ8L29wdGlvbj5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiNVwiPjU8L29wdGlvbj5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiNlwiPjY8L29wdGlvbj5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiN1wiPjc8L29wdGlvbj5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiOFwiPjg8L29wdGlvbj5cclxuICAgICAgPC9zZWxlY3Q+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxidXR0b24gY2xhc3M9XCJjaGVhdCBidG5cIj5DSEVBVDwvYnV0dG9uPlxyXG4gIDwvZGl2PlxyXG4gIDxkaXYgY2xhc3M9XCJjb3VudGVyc1wiPlxyXG4gICAgPGRpdiBjbGFzcz1cInRpbWVyXCI+PHNwYW4+VGltZXI6IDwvc3Bhbj48c3BhbiBjbGFzcz1cInRpbWVcIj4wOjAwPC9zcGFuPjwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cIm1vdmVzXCI+PHNwYW4+TW92ZXM6IDwvc3Bhbj48c3BhbiBjbGFzcz1cIm1vdmVcIj4wPC9zcGFuPjwvZGl2PlxyXG4gIDwvZGl2PmA7XHJcblxyXG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1lbnUpO1xyXG5cclxuYm9hcmQuaW5pdCgpO1xyXG5cclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy1nYW1lJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgYm9hcmQuaW5pdCgpO1xyXG59KTtcclxuXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zYXZlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXHJcbiAgICAnZ2FtZVNhdmUnLFxyXG4gICAgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICBiZ1Bvc2l0aW9uOiBib2FyZC5iZ1Bvc0FycixcclxuICAgICAgaGlzdG9yeTogYm9hcmQuaGlzdG9yeSxcclxuICAgICAgc2l6ZTogYm9hcmQuc2l6ZSxcclxuICAgICAgYm9hcmRUYWJsZTogYm9hcmQuYXJyLFxyXG4gICAgICB0aW1lOiBib2FyZC50aW1lckMuY3VycmVudFRpbWUsXHJcbiAgICAgIG1vdmVzOiBib2FyZC5tb3Zlc0NvdW50ZXIsXHJcbiAgICAgIHplcm86IFsgYm9hcmQuZW1wdHlYLCBib2FyZC5lbXB0eVkgXSxcclxuICAgICAgaW1nTnVtYjogYm9hcmQuaW1nTnVtYlxyXG4gICAgfSlcclxuICApO1xyXG59KTtcclxuXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2FkJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBiZ1Bvc2l0aW9uLCBoaXN0b3J5LCBzaXplLCBib2FyZFRhYmxlLCB0aW1lLCBtb3ZlcywgemVybywgaW1nTnVtYiB9ID0gSlNPTi5wYXJzZShcclxuICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYW1lU2F2ZScpXHJcbiAgKTtcclxuICBib2FyZC5iZ1Bvc0FyciA9IGJnUG9zaXRpb247XHJcbiAgYm9hcmQuaGlzdG9yeSA9IGhpc3Rvcnk7XHJcbiAgYm9hcmQuc2l6ZSA9IHNpemU7XHJcbiAgYm9hcmQudGltZXJDLmN1cnJlbnRUaW1lID0gdGltZTtcclxuICBib2FyZC5tb3Zlc0NvdW50ZXIgPSBtb3ZlcztcclxuICBib2FyZC5hcnIgPSBib2FyZFRhYmxlO1xyXG4gIFsgYm9hcmQuZW1wdHlYLCBib2FyZC5lbXB0eVkgXSA9IHplcm87XHJcbiAgYm9hcmQuaW1nTnVtYiA9IGltZ051bWI7XHJcbiAgYm9hcmQubG9hZCgpO1xyXG4gIGJvYXJkLnRpbWVyQy5sb2FkKCk7XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkU2l6ZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcclxuICBib2FyZC5pbml0KCk7XHJcbiAgYm9hcmQudGltZXJDLmluaXQoKTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hlYXQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBib2FyZC50aW1lckMudGltZXJQYXVzZSgpO1xyXG4gIGJvYXJkLmJhY2soKTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc291bmQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICBib2FyZC50b2dnbGVTb3VuZCgpO1xyXG4gIGlmIChib2FyZC5zb3VuZE9uKSB7XHJcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2J0bi1vbicpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi1vbicpO1xyXG4gIH1cclxufSk7XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2NvcmUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICBib2FyZC5nZXRTY29yZUxpc3QoKTtcclxuICBpZiAoYm9hcmQuc2NvcmVMaXN0KSB7XHJcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2J0bi1vbicpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi1vbicpO1xyXG4gIH1cclxufSk7XHJcbiIsImltcG9ydCBUaW1lciBmcm9tICcuL1RpbWVyLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJvYXJkIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMudGltZXJDID0gbmV3IFRpbWVyKCk7XHJcbiAgICB0aGlzLmhpc3RvcnkgPSBbXTtcclxuICAgIHRoaXMuc2l6ZSA9IDQ7XHJcbiAgICB0aGlzLmVtcHR5WCA9IDA7XHJcbiAgICB0aGlzLmVtcHR5WSA9IDA7XHJcbiAgICB0aGlzLmFuaW1hdGlvblRpbWUgPSAyMDA7XHJcbiAgICB0aGlzLmJvYXJkV2lkdGggPSA0MC44O1xyXG4gICAgdGhpcy5tYXJnaW5TaXplID0gMC4xO1xyXG4gICAgdGhpcy5zb3VuZE9uID0gdHJ1ZTtcclxuICAgIHRoaXMud2luU291bmQgPSBuZXcgQXVkaW8oJy4uL2Fzc2V0cy93aW4ubXAzJyk7XHJcbiAgICB0aGlzLnNsaWRlU291bmQgPSBuZXcgQXVkaW8oJy4uL2Fzc2V0cy9zbGlkZS5tcDMnKTtcclxuICAgIHRoaXMuc2xpZGVTb3VuZC52b2x1bWUgPSAwLjI7XHJcbiAgICB0aGlzLnJlbW92ZUJvYXJkID0gKCkgPT4ge1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYm9hcmQnKS5mb3JFYWNoKChlbGVtKSA9PiB7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbGVtKTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcmFuZG9tSW1nTnVtYmVyKG1heCwgbWluKSB7XHJcbiAgICB0aGlzLmltZ051bWIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSArIG1pbik7XHJcbiAgfVxyXG5cclxuICBiYWNrKCkge1xyXG4gICAgdGhpcy5oaXN0b3J5LnBvcCgpO1xyXG4gICAgdGhpcy5iYWNrVGltZXIoKTtcclxuICB9XHJcblxyXG4gIGJhY2tUaW1lcigpIHtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5oaXN0b3J5Lmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnN0IFsgeCwgeSBdID0gdGhpcy5oaXN0b3J5LnBvcCgpO1xyXG4gICAgICAgIHRoaXMuZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNjZWxsLSR7dGhpcy5hcnJbeF1beV19YCk7XHJcblxyXG4gICAgICAgIHRoaXMubW92ZUFuaW1hdGlvbihbIHgsIHkgXSk7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgdGVtcCA9IHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV07XHJcbiAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldID0gdGhpcy5hcnJbeF1beV07XHJcbiAgICAgICAgICB0aGlzLmFyclt4XVt5XSA9IHRlbXA7XHJcbiAgICAgICAgICB0aGlzLmVtcHR5WCA9IHg7XHJcbiAgICAgICAgICB0aGlzLmVtcHR5WSA9IHk7XHJcbiAgICAgICAgICB0aGlzLnJlbW92ZUJvYXJkKCk7XHJcbiAgICAgICAgICB0aGlzLnJlbmRlckJvYXJkKCk7XHJcbiAgICAgICAgICB0aGlzLnBsYXlTbGlkZVNvdW5kKCk7XHJcbiAgICAgICAgICB0aGlzLmJhY2tUaW1lcigpO1xyXG4gICAgICAgIH0sIHRoaXMuYW5pbWF0aW9uVGltZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5jaGVja1dpbih0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfSwgdGhpcy5hbmltYXRpb25UaW1lKTtcclxuICB9XHJcblxyXG4gIG1vdmUoZGlyZWN0aW9uKSB7XHJcbiAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xyXG4gICAgICBjYXNlICd1cCc6XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgdGhpcy5lbXB0eVggIT09IDAgJiZcclxuICAgICAgICAgICh0aGlzLmhpc3RvcnkubGVuZ3RoIDw9IDIgfHwgdGhpcy5lbXB0eVggLSAxICE9PSB0aGlzLmhpc3RvcnlbdGhpcy5oaXN0b3J5Lmxlbmd0aCAtIDJdWzBdKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXSA9IHRoaXMuYXJyW3RoaXMuZW1wdHlYIC0gMV1bdGhpcy5lbXB0eVldO1xyXG4gICAgICAgICAgdGhpcy5hcnJbdGhpcy5lbXB0eVggLSAxXVt0aGlzLmVtcHR5WV0gPSAwO1xyXG4gICAgICAgICAgdGhpcy5lbXB0eVggLT0gMTtcclxuICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKFsgdGhpcy5lbXB0eVgsIHRoaXMuZW1wdHlZIF0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmNvdW50ZXIgLT0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdkb3duJzpcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0aGlzLmVtcHR5WCAhPT0gdGhpcy5zaXplIC0gMSAmJlxyXG4gICAgICAgICAgKHRoaXMuaGlzdG9yeS5sZW5ndGggPD0gMiB8fCB0aGlzLmVtcHR5WCArIDEgIT09IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnkubGVuZ3RoIC0gMl1bMF0pXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldID0gdGhpcy5hcnJbdGhpcy5lbXB0eVggKyAxXVt0aGlzLmVtcHR5WV07XHJcbiAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WCArIDFdW3RoaXMuZW1wdHlZXSA9IDA7XHJcbiAgICAgICAgICB0aGlzLmVtcHR5WCArPSAxO1xyXG4gICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2goWyB0aGlzLmVtcHR5WCwgdGhpcy5lbXB0eVkgXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuY291bnRlciAtPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHRoaXMuZW1wdHlZICE9PSB0aGlzLnNpemUgLSAxICYmXHJcbiAgICAgICAgICAodGhpcy5oaXN0b3J5Lmxlbmd0aCA8PSAyIHx8IHRoaXMuZW1wdHlZICsgMSAhPT0gdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeS5sZW5ndGggLSAyXVsxXSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV0gPSB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVkgKyAxXTtcclxuICAgICAgICAgIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WSArIDFdID0gMDtcclxuICAgICAgICAgIHRoaXMuZW1wdHlZICs9IDE7XHJcbiAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChbIHRoaXMuZW1wdHlYLCB0aGlzLmVtcHR5WSBdKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5jb3VudGVyIC09IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdsZWZ0JzpcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0aGlzLmVtcHR5WSAhPT0gMCAmJlxyXG4gICAgICAgICAgKHRoaXMuaGlzdG9yeS5sZW5ndGggPD0gMiB8fCB0aGlzLmVtcHR5WSAtIDEgIT09IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnkubGVuZ3RoIC0gMl1bMV0pXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldID0gdGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZIC0gMV07XHJcbiAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVkgLSAxXSA9IDA7XHJcbiAgICAgICAgICB0aGlzLmVtcHR5WSAtPSAxO1xyXG4gICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2goWyB0aGlzLmVtcHR5WCwgdGhpcy5lbXB0eVkgXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuY291bnRlciAtPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJz46KCcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlQm9hcmQoKSB7XHJcbiAgICBjb25zdCBhcnIgPSBbXTtcclxuXHJcbiAgICB0aGlzLmJnUG9zQXJyID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2l6ZTsgaSArPSAxKSB7XHJcbiAgICAgIGFycltpXSA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuc2l6ZTsgaiArPSAxKSB7XHJcbiAgICAgICAgaWYgKGkgKyBqICE9PSAodGhpcy5zaXplIC0gMSkgKiAyKSB7XHJcbiAgICAgICAgICBhcnJbaV1bal0gPSBpICogdGhpcy5zaXplICsgaiArIDE7XHJcbiAgICAgICAgICB0aGlzLmJnUG9zQXJyLnB1c2goXHJcbiAgICAgICAgICAgIGAke01hdGgucm91bmQoMTAwIC8gKHRoaXMuc2l6ZSAtIDEpICogail9JSAke01hdGgucm91bmQoMTAwIC8gKHRoaXMuc2l6ZSAtIDEpICogaSl9JWBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGFycltpXVtqXSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXJyO1xyXG4gIH1cclxuXHJcbiAgc2h1ZmZsZSgpIHtcclxuICAgIHRoaXMuaGlzdG9yeS5wdXNoKFsgdGhpcy5lbXB0eVgsIHRoaXMuZW1wdHlZIF0pO1xyXG4gICAgZm9yICh0aGlzLmNvdW50ZXIgPSAwOyB0aGlzLmNvdW50ZXIgPCB0aGlzLnNpemUgKiogMzsgdGhpcy5jb3VudGVyICs9IDEpIHtcclxuICAgICAgc3dpdGNoIChNYXRoLmZsb29yKDQgKiBNYXRoLnJhbmRvbSgpKSkge1xyXG4gICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgIC8vICBNT1ZFIFVQXHJcblxyXG4gICAgICAgICAgdGhpcy5tb3ZlKCd1cCcpO1xyXG5cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgIC8vICBNT1ZFIFJJR0hUXHJcbiAgICAgICAgICB0aGlzLm1vdmUoJ3JpZ2h0Jyk7XHJcblxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgLy8gIE1PVkUgRE9XTlxyXG4gICAgICAgICAgdGhpcy5tb3ZlKCdkb3duJyk7XHJcblxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgLy8gIE1PVkUgTEVGVFxyXG4gICAgICAgICAgdGhpcy5tb3ZlKCdsZWZ0Jyk7XHJcblxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignPjooJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlckJvYXJkKCkge1xyXG4gICAgbGV0IGJvYXJkID0gYDxkaXYgY2xhc3M9XCJzY29yZS1saXN0XCI+dGVzdDwvZGl2PmA7XHJcbiAgICBjb25zdCBib2FyZFdpZHRoID0gYCR7dGhpcy5ib2FyZFdpZHRofXJlbWA7XHJcbiAgICBsZXQgY2VsbE51bWJlcjtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMCwgb3JkZXIgPSAxOyBpIDwgdGhpcy5zaXplOyBpICs9IDEpIHtcclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnNpemU7IGogKz0gMSkge1xyXG4gICAgICAgIGNlbGxOdW1iZXIgPSB0aGlzLmFycltpXVtqXTtcclxuXHJcbiAgICAgICAgY29uc3QgY2xhc3NOYW1lID0gdGhpcy5hcnJbaV1bal0gPyAnY2VsbCcgOiAnY2VsbCBlbXB0eSc7XHJcblxyXG4gICAgICAgIGNvbnN0IGRyYWdnYWJsZSA9ICEhdGhpcy5hcnJbaV1bal07XHJcbiAgICAgICAgY29uc3QgYkdwb3MgPSB0aGlzLmJnUG9zQXJyW2NlbGxOdW1iZXIgLSAxXTtcclxuICAgICAgICBjb25zdCBiZ0ZvckNlbGwgPSB0aGlzLmFycltpXVtqXVxyXG4gICAgICAgICAgPyBgYmFja2dyb3VuZDogdXJsKC4uL2Fzc2V0cy9pbWFnZXMvJHt0aGlzXHJcbiAgICAgICAgICAgICAgLmltZ051bWJ9LmpwZyk7IGJhY2tncm91bmQtcG9zaXRpb246ICR7Ykdwb3N9OyBiYWNrZ3JvdW5kLXNpemU6ICR7Ym9hcmRXaWR0aH07YFxyXG4gICAgICAgICAgOiAnJztcclxuICAgICAgICBvcmRlciArPSAxO1xyXG5cclxuICAgICAgICBib2FyZCArPSBgPGRpdiBcclxuICAgICAgICAgIHN0eWxlPSd3aWR0aDoke3RoaXMuY2VsbFNpemV9cmVtO1xyXG4gICAgICAgICAgaGVpZ2h0OiR7dGhpcy5jZWxsU2l6ZX1yZW07XHJcbiAgICAgICAgICBvcmRlcjoke29yZGVyfTtcclxuICAgICAgICAgICR7YmdGb3JDZWxsfSdcclxuICAgICAgICAgIGlkPSdjZWxsLSR7Y2VsbE51bWJlcn0nXHJcbiAgICAgICAgICBjbGFzcz0nJHtjbGFzc05hbWV9J1xyXG4gICAgICAgICAgZHJhZ2dhYmxlPVwiJHtkcmFnZ2FibGV9XCI+JHtjZWxsTnVtYmVyfTwvZGl2PmA7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2JvYXJkJyk7XHJcbiAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gYm9hcmRXaWR0aDtcclxuICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gYm9hcmQ7XHJcblxyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICB9XHJcblxyXG4gIGRyYXcoKSB7XHJcbiAgICBjb25zdCByZW1QZXJUaWNrID0gdGhpcy5jZWxsU2l6ZSAvIHRoaXMuYW5pbWF0aW9uVGltZSAqIHRoaXMudGltZVBhc3NlZDtcclxuICAgIHN3aXRjaCAodGhpcy5kaXJlY3Rpb24pIHtcclxuICAgICAgY2FzZSAndXAnOlxyXG4gICAgICAgIHRoaXMuZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCAwLCAkey1yZW1QZXJUaWNrfXJlbSlgO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdkb3duJzpcclxuICAgICAgICB0aGlzLmUuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSggMCwgJHtyZW1QZXJUaWNrfXJlbSlgO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdsZWZ0JzpcclxuICAgICAgICB0aGlzLmUuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSggJHstcmVtUGVyVGlja31yZW0sIDApYDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgIHRoaXMuZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCAke3JlbVBlclRpY2t9cmVtLCAwKWA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCc+OignKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG1vdmVBbmltYXRpb24oWyB4LCB5IF0pIHtcclxuICAgIGlmICh0aGlzLmVtcHR5WCA8IHgpIHtcclxuICAgICAgdGhpcy5kaXJlY3Rpb24gPSAndXAnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmVtcHR5WCA+IHgpIHtcclxuICAgICAgdGhpcy5kaXJlY3Rpb24gPSAnZG93bic7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZW1wdHlZIDwgeSkge1xyXG4gICAgICB0aGlzLmRpcmVjdGlvbiA9ICdsZWZ0JztcclxuICAgIH0gZWxzZSBpZiAodGhpcy5lbXB0eVkgPiB5KSB7XHJcbiAgICAgIHRoaXMuZGlyZWN0aW9uID0gJ3JpZ2h0JztcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmluQW5pbWF0aW9uID0gdHJ1ZTtcclxuICAgIHRoaXMuc3RhcnQgPSBEYXRlLm5vdygpO1xyXG5cclxuICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIHRoaXMudGltZVBhc3NlZCA9IERhdGUubm93KCkgLSB0aGlzLnN0YXJ0O1xyXG5cclxuICAgICAgaWYgKHRoaXMudGltZVBhc3NlZCA+PSB0aGlzLmFuaW1hdGlvblRpbWUpIHtcclxuICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpO1xyXG4gICAgICAgIHRoaXMuaW5BbmltYXRpb24gPSBmYWxzZTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgfSwgMjApO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlU291bmQoKSB7XHJcbiAgICB0aGlzLnNvdW5kT24gPSAhdGhpcy5zb3VuZE9uO1xyXG4gIH1cclxuXHJcbiAgc3dhcChudW1iZXIpIHtcclxuICAgIGlmICh0aGlzLmluQW5pbWF0aW9uKSByZXR1cm47XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFyci5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuYXJyW2ldLmxlbmd0aDsgaiArPSAxKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXJyW2ldW2pdID09PSBudW1iZXIpIHtcclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgKE1hdGguYWJzKHRoaXMuZW1wdHlYIC0gaSkgPD0gMSAmJiB0aGlzLmVtcHR5WSAtIGogPT09IDApIHx8XHJcbiAgICAgICAgICAgIChNYXRoLmFicyh0aGlzLmVtcHR5WSAtIGopIDw9IDEgJiYgdGhpcy5lbXB0eVggLSBpID09PSAwKVxyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIC8vIE1vdmUgY291bnRlclxyXG4gICAgICAgICAgICB0aGlzLm1vdmVzQ291bnRlciArPSAxO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW92ZScpLmlubmVySFRNTCA9IHRoaXMubW92ZXNDb3VudGVyO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgemVybyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNjZWxsLSR7dGhpcy5hcnJbdGhpcy5lbXB0eVhdW3RoaXMuZW1wdHlZXX1gKTtcclxuICAgICAgICAgICAgdGhpcy5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2NlbGwtJHt0aGlzLmFycltpXVtqXX1gKTtcclxuXHJcbiAgICAgICAgICAgIC8vICBmaW5kIHdoZXJlIGFyZSB3ZSBtb3ZpbmdcclxuICAgICAgICAgICAgdGhpcy5tb3ZlQW5pbWF0aW9uKFsgaSwgaiBdKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucGxheVNsaWRlU291bmQoKTtcclxuXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSB6ZXJvLnN0eWxlLm9yZGVyO1xyXG4gICAgICAgICAgICAgIHplcm8uc3R5bGUub3JkZXIgPSB0aGlzLmUuc3R5bGUub3JkZXI7XHJcbiAgICAgICAgICAgICAgdGhpcy5lLnN0eWxlLm9yZGVyID0gdGVtcDtcclxuXHJcbiAgICAgICAgICAgICAgdGhpcy5lLnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xyXG5cclxuICAgICAgICAgICAgICBpZiAodGhpcy5lbXB0eVggPT09IHRoaXMuZW1wdHlZICYmIHRoaXMuZW1wdHlZID09PSB0aGlzLnNpemUgLSAxKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja1dpbigpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudGltZXJDLnRpbWVyUGF1c2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIHRoaXMuYW5pbWF0aW9uVGltZSk7XHJcbiAgICAgICAgICAgIFsgdGhpcy5hcnJbaV1bal0sIHRoaXMuYXJyW3RoaXMuZW1wdHlYXVt0aGlzLmVtcHR5WV0gXSA9IFtcclxuICAgICAgICAgICAgICB0aGlzLmFyclt0aGlzLmVtcHR5WF1bdGhpcy5lbXB0eVldLFxyXG4gICAgICAgICAgICAgIHRoaXMuYXJyW2ldW2pdXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIHRoaXMuZW1wdHlYID0gaTtcclxuICAgICAgICAgICAgdGhpcy5lbXB0eVkgPSBqO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2goWyB0aGlzLmVtcHR5WCwgdGhpcy5lbXB0eVkgXSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldFNjb3JlKCkge1xyXG4gICAgbGV0IHNjb3JlTGlzdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Njb3JlLWxpc3QnKSkgfHwgW107XHJcbiAgICBzY29yZUxpc3QucHVzaCh7IG1vdmVzOiB0aGlzLm1vdmVzQ291bnRlciwgc2l6ZTogdGhpcy5zaXplLCB0aW1lOiB0aGlzLnRpbWVyQy50aW1lciB9KTtcclxuICAgIGlmIChzY29yZUxpc3QubGVuZ3RoID4gMTApIHtcclxuICAgICAgc2NvcmVMaXN0LnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICByZXR1cm4gYS5tb3ZlcyAtIGIubW92ZXM7XHJcbiAgICAgIH0pO1xyXG4gICAgICBzY29yZUxpc3QgPSBzY29yZUxpc3Quc2xpY2UoMCwgMTApO1xyXG4gICAgfVxyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Njb3JlLWxpc3QnLCBKU09OLnN0cmluZ2lmeShzY29yZUxpc3QpKTtcclxuICB9XHJcblxyXG4gIGdldFNjb3JlTGlzdCgpIHtcclxuICAgIHRoaXMuc2NvcmVMaXN0ID0gIXRoaXMuc2NvcmVMaXN0O1xyXG5cclxuICAgIGNvbnN0IHNjb3JlRWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zY29yZS1saXN0Jyk7XHJcbiAgICBjb25zdCBzY29yZUxpc3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzY29yZS1saXN0JykpIHx8IFtdO1xyXG4gICAgbGV0IGxpc3QgPSAnJztcclxuXHJcbiAgICBmb3IgKGxldCBpID0gc2NvcmVMaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaSAtPSAxKSB7XHJcbiAgICAgIGxpc3QgKz0gYDxsaT5TaXplOiAke3Njb3JlTGlzdFtpXS5zaXplfSwmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDtNb3ZlczogJHtzY29yZUxpc3RbaV1cclxuICAgICAgICAubW92ZXN9LCZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwO1RpbWU6ICR7c2NvcmVMaXN0W2ldLnRpbWV9PC9saT5gO1xyXG4gICAgfVxyXG4gICAgc2NvcmVFbGVtLmlubmVySFRNTCA9IGA8aDI+QmVzdCBTY29yZXM8L2gyPlxyXG4gICAgICA8b2wgY2xhc3M9XCJzY29yZVwiPiR7bGlzdH08L29sPmA7XHJcbiAgICBpZiAodGhpcy5zY29yZUxpc3QpIHtcclxuICAgICAgc2NvcmVFbGVtLmNsYXNzTGlzdC5hZGQoJ3Njb3JlLWxpc3Qtb24nKTtcclxuICAgICAgdGhpcy50aW1lckMudGltZXJQYXVzZSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2NvcmVFbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3Njb3JlLWxpc3Qtb24nKTtcclxuICAgICAgdGhpcy50aW1lckMuY2FsY0N1cnJlbnRUaW1lKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjaGVja1dpbihjaGVhdCkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNpemU7IGkgKz0gMSkge1xyXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuc2l6ZTsgaiArPSAxKSB7XHJcbiAgICAgICAgaWYgKGkgKyBqICE9PSAodGhpcy5zaXplIC0gMSkgKiAyKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy53aW5baV1bal0gIT09IHRoaXMuYXJyW2ldW2pdKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLnBsYXlXaW5Tb3VuZCgpO1xyXG4gICAgdGhpcy5zZXRXaW5NZXNzYWdlKGNoZWF0KTtcclxuICAgIHRoaXMuc2V0U2NvcmUoKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgc2V0V2luTWVzc2FnZShjaGVhdCkge1xyXG4gICAgdGhpcy53aW5Cb2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib2FyZCcpO1xyXG4gICAgdGhpcy53aW5Cb2FyZC5jbGFzc0xpc3QuYWRkKCd3aW4nKTtcclxuXHJcbiAgICB0aGlzLndpbkJvYXJkLmlubmVySFRNTCArPSBgPGRpdiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCguLi9hc3NldHMvaW1hZ2VzLyR7dGhpc1xyXG4gICAgICAuaW1nTnVtYn0uanBnKTtcIiBjbGFzcz0nd2luLXRleHQnPiR7Y2hlYXRcclxuICAgICAgPyAn0KfQmNCi0JXQoCEnXHJcbiAgICAgIDogYNCj0YDQsCEg0JLRiyDRgNC10YjQuNC70Lgg0LPQvtC70L7QstC+0LvQvtC80LrRgyDQt9CwICR7ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRpbWUnKVxyXG4gICAgICAgICAgLmlubmVySFRNTH0g0LggJHtkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW92ZScpLmlubmVySFRNTH0g0YXQvtC00L7QsjwvZGl2PmB9PC9kaXY+YDtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLndpbkJvYXJkLnF1ZXJ5U2VsZWN0b3IoJy53aW4tdGV4dCcpLnN0eWxlLm9wYWNpdHkgPSAxO1xyXG4gICAgfSwgNTApO1xyXG4gIH1cclxuXHJcbiAgcGxheVdpblNvdW5kKCkge1xyXG4gICAgaWYgKCF0aGlzLnNvdW5kT24pIHJldHVybjtcclxuICAgIHRoaXMud2luU291bmQuY3VycmVudFRpbWUgPSAwO1xyXG4gICAgdGhpcy53aW5Tb3VuZC5wbGF5KCk7XHJcbiAgfVxyXG5cclxuICBwbGF5U2xpZGVTb3VuZCgpIHtcclxuICAgIGlmICghdGhpcy5zb3VuZE9uKSByZXR1cm47XHJcbiAgICB0aGlzLnNsaWRlU291bmQuY3VycmVudFRpbWUgPSAwO1xyXG4gICAgdGhpcy5zbGlkZVNvdW5kLnBsYXkoKTtcclxuICB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnNjb3JlTGlzdCA9IGZhbHNlO1xyXG4gICAgdGhpcy5yYW5kb21JbWdOdW1iZXIoMTUwLCAxKTtcclxuICAgIHRoaXMuaGlzdG9yeSA9IFtdO1xyXG4gICAgdGhpcy5tb3Zlc0NvdW50ZXIgPSAwO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vdmUnKS5pbm5lckhUTUwgPSB0aGlzLm1vdmVzQ291bnRlcjtcclxuICAgIHRoaXMuc2l6ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZFNpemUnKS52YWx1ZTtcclxuXHJcbiAgICB0aGlzLmNlbGxTaXplID0gcGFyc2VGbG9hdCh0aGlzLmJvYXJkV2lkdGggLyB0aGlzLnNpemUgLSAyICogdGhpcy5tYXJnaW5TaXplKS50b0ZpeGVkKDMpO1xyXG5cclxuICAgIHRoaXMucmVtb3ZlQm9hcmQoKTtcclxuXHJcbiAgICB0aGlzLmVtcHR5WCA9IHRoaXMuc2l6ZSAtIDE7XHJcbiAgICB0aGlzLmVtcHR5WSA9IHRoaXMuc2l6ZSAtIDE7XHJcblxyXG4gICAgdGhpcy5hcnIgPSB0aGlzLmNyZWF0ZUJvYXJkKCk7XHJcbiAgICB0aGlzLndpbiA9IHRoaXMuY3JlYXRlQm9hcmQoKTtcclxuXHJcbiAgICB0aGlzLnNodWZmbGUoKTtcclxuXHJcbiAgICB0aGlzLnJlbmRlckJvYXJkKCk7XHJcbiAgICB0aGlzLnRpbWVyQy5pbml0KCk7XHJcblxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKS5mb3JFYWNoKChjZWxsKSA9PiB7XHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIChldnQpID0+IHtcclxuICAgICAgICBjb25zdCBlbGVtID0gZXZ0LnRhcmdldDtcclxuICAgICAgICB0aGlzLnN3YXAocGFyc2VJbnQoZWxlbS5pbm5lckhUTUwsIDEwKSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCB0aGlzLmRyYWdTdGFydCk7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgdGhpcy5kcmFnT3Zlcik7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCB0aGlzLmRyYWdEcm9wKTtcclxuXHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIHRoaXMuZHJhZ0VuZCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGxvYWQoKSB7XHJcbiAgICB0aGlzLmNlbGxTaXplID0gcGFyc2VGbG9hdCh0aGlzLmJvYXJkV2lkdGggLyB0aGlzLnNpemUgLSAyICogdGhpcy5tYXJnaW5TaXplKS50b0ZpeGVkKDMpO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vdmUnKS5pbm5lckhUTUwgPSB0aGlzLm1vdmVzQ291bnRlcjtcclxuICAgIHRoaXMucmVtb3ZlQm9hcmQoKTtcclxuICAgIHRoaXMucmVuZGVyQm9hcmQoKTtcclxuICAgIHRoaXMud2luID0gdGhpcy5jcmVhdGVCb2FyZCgpO1xyXG4gICAgdGhpcy50aW1lckMuaW5pdCgpO1xyXG5cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJykuZm9yRWFjaCgoY2VsbCkgPT4ge1xyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZWxlbSA9IGV2dC50YXJnZXQ7XHJcbiAgICAgICAgdGhpcy5zd2FwKHBhcnNlSW50KGVsZW0uaW5uZXJIVE1MLCAxMCkpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgdGhpcy5kcmFnU3RhcnQpO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoaXMuZHJhZ092ZXIpO1xyXG5cclxuICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgdGhpcy5kcmFnRHJvcCk7XHJcblxyXG4gICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCB0aGlzLmRyYWdFbmQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=